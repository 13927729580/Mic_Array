###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.2.10312/W32 for ARM       22/Feb/2016  14:14:23
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\STM32F7xx_HAL_Driver\Src\stm32f7xx_hal_sai_ex.c
#    Command line =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\STM32F7xx_HAL_Driver\Src\stm32f7xx_hal_sai_ex.c
#        -D USE_HAL_DRIVER -D STM32F746xx -D USE_STM32746G_DISCO -D
#        USE_IOEXPANDER -D USE_USB_FS -lC
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -lA
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -o
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M7 -e --fpu=VFPv5_sp --dlib_config "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 7.3\arm\INC\c\DLib_Config_Full.h"
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\CMSIS\Device\ST\STM32F7xx\Include\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\STM32F7xx_HAL_Driver\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\STM32746G-Discovery\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\Components\Common\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Log\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Fonts\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\CPU\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Core\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Core\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Class\MSC\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\drivers\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_Audio\Addons\PDM\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Class\AUDIO\Inc\
#        -On --use_c++_inline --require_prototypes -I "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 7.3\arm\CMSIS\Include\" -D
#        ARM_MATH_CM7
#    List file    =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List\stm32f7xx_hal_sai_ex.lst
#    Object file  =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj\stm32f7xx_hal_sai_ex.o
#
###############################################################################

D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\STM32F7xx_HAL_Driver\Src\stm32f7xx_hal_sai_ex.c
      1          /**
      2            ******************************************************************************
      3            * @file    stm32f7xx_hal_sai_ex.c
      4            * @author  MCD Application Team
      5            * @version V1.0.1
      6            * @date    25-June-2015
      7            * @brief   SAI Extension HAL module driver.
      8            *          This file provides firmware functions to manage the following 
      9            *          functionalities of SAI extension peripheral:
     10            *           + Extension features functions
     11            *         
     12            @verbatim
     13            ==============================================================================
     14                         ##### SAI peripheral extension features  #####
     15            ==============================================================================
     16             
     17                               ##### How to use this driver #####
     18            ==============================================================================
     19            [..] This driver provides functions to manage several sources to clock SAI
     20            
     21            @endverbatim
     22            ******************************************************************************
     23            * @attention
     24            *
     25            * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
     26            *
     27            * Redistribution and use in source and binary forms, with or without modification,
     28            * are permitted provided that the following conditions are met:
     29            *   1. Redistributions of source code must retain the above copyright notice,
     30            *      this list of conditions and the following disclaimer.
     31            *   2. Redistributions in binary form must reproduce the above copyright notice,
     32            *      this list of conditions and the following disclaimer in the documentation
     33            *      and/or other materials provided with the distribution.
     34            *   3. Neither the name of STMicroelectronics nor the names of its contributors
     35            *      may be used to endorse or promote products derived from this software
     36            *      without specific prior written permission.
     37            *
     38            * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     39            * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     40            * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     41            * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
     42            * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     43            * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     44            * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
     45            * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
     46            * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
     47            * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     48            *
     49            ******************************************************************************
     50            */ 
     51          
     52          /* Includes ------------------------------------------------------------------*/
     53          #include "stm32f7xx_hal.h"

  /**
    ^
"D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\Inc\stm32f7xx_hal_conf.h",1  Warning[Pa050]: 
          non-native end of line sequence detected (this diagnostic is only
          issued once)
     54          
     55          /** @addtogroup STM32F7xx_HAL_Driver
     56            * @{
     57            */
     58          
     59          /** @defgroup SAIEx SAIEx
     60            * @brief SAI Extension HAL module driver
     61            * @{
     62            */
     63          
     64          #ifdef HAL_SAI_MODULE_ENABLED
     65          
     66          /* Private typedef -----------------------------------------------------------*/
     67          /* Private define ------------------------------------------------------------*/
     68          /* SAI registers Masks */
     69          /* Private macro -------------------------------------------------------------*/
     70          /* Private variables ---------------------------------------------------------*/
     71          /* Private function prototypes -----------------------------------------------*/
     72          /* Private functions ---------------------------------------------------------*/
     73          
     74          /** @defgroup SAI_Private_Functions  SAI Private Functions
     75            * @{
     76            */
     77           /**
     78            * @}
     79            */
     80            
     81          /* Exported functions --------------------------------------------------------*/
     82          /** @defgroup SAIEx_Exported_Functions SAI Extended Exported Functions
     83            * @{
     84            */
     85          
     86          /** @defgroup SAIEx_Exported_Functions_Group1 Extension features functions 
     87            *  @brief   Extension features functions
     88            *
     89          @verbatim    
     90           ===============================================================================
     91                                 ##### Extension features Functions #####
     92           ===============================================================================  
     93              [..]
     94              This subsection provides a set of functions allowing to manage the possible 
     95              SAI clock sources.
     96          
     97          @endverbatim
     98            * @{
     99            */
    100          
    101          /**
    102            * @brief  Configure SAI Block synchronization mode
    103            * @param  hsai: pointer to a SAI_HandleTypeDef structure that contains
    104            *               the configuration information for SAI module.   
    105            * @retval SAI Clock Input 
    106            */

   \                                 In section .text, align 2, keep-with-next
    107          void SAI_BlockSynchroConfig(SAI_HandleTypeDef *hsai)
    108          {
    109            uint32_t tmpregisterGCR = 0;
   \                     SAI_BlockSynchroConfig: (+1)
   \   00000000   0x2100             MOVS     R1,#+0
    110           
    111            /* This setting must be done with both audio block (A & B) disabled     */
    112            switch(hsai->Init.SynchroExt)
   \   00000002   0x68C2             LDR      R2,[R0, #+12]
   \   00000004   0x2A00             CMP      R2,#+0
   \   00000006   0xD006             BEQ.N    ??SAI_BlockSynchroConfig_0
   \   00000008   0x2A01             CMP      R2,#+1
   \   0000000A   0xD007             BEQ.N    ??SAI_BlockSynchroConfig_1
   \   0000000C   0x2A02             CMP      R2,#+2
   \   0000000E   0xD008             BEQ.N    ??SAI_BlockSynchroConfig_2
   \   00000010   0x2A04             CMP      R2,#+4
   \   00000012   0xD009             BEQ.N    ??SAI_BlockSynchroConfig_3
   \   00000014   0xE00B             B.N      ??SAI_BlockSynchroConfig_4
    113            {
    114            case SAI_SYNCEXT_DISABLE :
    115              tmpregisterGCR = 0;
   \                     ??SAI_BlockSynchroConfig_0: (+1)
   \   00000016   0x2200             MOVS     R2,#+0
   \   00000018   0x0011             MOVS     R1,R2
    116              break;
   \   0000001A   0xE008             B.N      ??SAI_BlockSynchroConfig_5
    117            case SAI_SYNCEXT_IN_ENABLE :
    118              tmpregisterGCR = SAI_GCR_SYNCIN_0;
   \                     ??SAI_BlockSynchroConfig_1: (+1)
   \   0000001C   0x2201             MOVS     R2,#+1
   \   0000001E   0x0011             MOVS     R1,R2
    119              break;
   \   00000020   0xE005             B.N      ??SAI_BlockSynchroConfig_5
    120            case SAI_SYNCEXT_OUTBLOCKA_ENABLE :
    121              tmpregisterGCR = SAI_GCR_SYNCOUT_0;
   \                     ??SAI_BlockSynchroConfig_2: (+1)
   \   00000022   0x2210             MOVS     R2,#+16
   \   00000024   0x0011             MOVS     R1,R2
    122              break;
   \   00000026   0xE002             B.N      ??SAI_BlockSynchroConfig_5
    123            case SAI_SYNCEXT_OUTBLOCKB_ENABLE :
    124              tmpregisterGCR = SAI_GCR_SYNCOUT_1;
   \                     ??SAI_BlockSynchroConfig_3: (+1)
   \   00000028   0x2220             MOVS     R2,#+32
   \   0000002A   0x0011             MOVS     R1,R2
    125              break;
   \   0000002C   0xE7FF             B.N      ??SAI_BlockSynchroConfig_5
    126            default :
    127              break;
    128            }
    129            
    130            if((hsai->Instance == SAI1_Block_A) || (hsai->Instance == SAI1_Block_B))
   \                     ??SAI_BlockSynchroConfig_4: (+1)
   \                     ??SAI_BlockSynchroConfig_5: (+1)
   \   0000002E   0x6802             LDR      R2,[R0, #+0]
   \   00000030   0x....             LDR.N    R3,??DataTable1  ;; 0x40015804
   \   00000032   0x429A             CMP      R2,R3
   \   00000034   0xD003             BEQ.N    ??SAI_BlockSynchroConfig_6
   \   00000036   0x6802             LDR      R2,[R0, #+0]
   \   00000038   0x....             LDR.N    R3,??DataTable1_1  ;; 0x40015824
   \   0000003A   0x429A             CMP      R2,R3
   \   0000003C   0xD102             BNE.N    ??SAI_BlockSynchroConfig_7
    131            {
    132              SAI1->GCR = tmpregisterGCR;
   \                     ??SAI_BlockSynchroConfig_6: (+1)
   \   0000003E   0x....             LDR.N    R2,??DataTable1_2  ;; 0x40015800
   \   00000040   0x6011             STR      R1,[R2, #+0]
   \   00000042   0xE001             B.N      ??SAI_BlockSynchroConfig_8
    133            }
    134            else 
    135            {
    136              SAI2->GCR = tmpregisterGCR;
   \                     ??SAI_BlockSynchroConfig_7: (+1)
   \   00000044   0x....             LDR.N    R2,??DataTable1_3  ;; 0x40015c00
   \   00000046   0x6011             STR      R1,[R2, #+0]
    137            }
    138          }
   \                     ??SAI_BlockSynchroConfig_8: (+1)
   \   00000048   0x4770             BX       LR               ;; return
    139            /**
    140            * @brief  Get SAI Input Clock based on SAI source clock selection
    141            * @param  hsai: pointer to a SAI_HandleTypeDef structure that contains
    142            *               the configuration information for SAI module.   
    143            * @retval SAI Clock Input 
    144            */

   \                                 In section .text, align 2, keep-with-next
    145          uint32_t SAI_GetInputClock(SAI_HandleTypeDef *hsai)   
    146          {
   \                     SAI_GetInputClock: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
    147            /* This variable used to store the SAI_CK_x (value in Hz) */
    148            uint32_t saiclocksource = 0;
   \   00000004   0x2500             MOVS     R5,#+0
    149          
    150            if ((hsai->Instance == SAI1_Block_A) || (hsai->Instance == SAI1_Block_B))
   \   00000006   0x6820             LDR      R0,[R4, #+0]
   \   00000008   0x....             LDR.N    R1,??DataTable1  ;; 0x40015804
   \   0000000A   0x4288             CMP      R0,R1
   \   0000000C   0xD003             BEQ.N    ??SAI_GetInputClock_0
   \   0000000E   0x6820             LDR      R0,[R4, #+0]
   \   00000010   0x....             LDR.N    R1,??DataTable1_1  ;; 0x40015824
   \   00000012   0x4288             CMP      R0,R1
   \   00000014   0xD105             BNE.N    ??SAI_GetInputClock_1
    151            {
    152              saiclocksource = HAL_RCCEx_GetPeriphCLKFreq(RCC_PERIPHCLK_SAI1);
   \                     ??SAI_GetInputClock_0: (+1)
   \   00000016   0xF45F 0x2000      MOVS     R0,#+524288
   \   0000001A   0x.... 0x....      BL       HAL_RCCEx_GetPeriphCLKFreq
   \   0000001E   0x0005             MOVS     R5,R0
   \   00000020   0xE004             B.N      ??SAI_GetInputClock_2
    153            }
    154            else /* SAI2_Block_A || SAI2_Block_B*/
    155            {
    156              saiclocksource = HAL_RCCEx_GetPeriphCLKFreq(RCC_PERIPHCLK_SAI2); 
   \                     ??SAI_GetInputClock_1: (+1)
   \   00000022   0xF45F 0x1080      MOVS     R0,#+1048576
   \   00000026   0x.... 0x....      BL       HAL_RCCEx_GetPeriphCLKFreq
   \   0000002A   0x0005             MOVS     R5,R0
    157            }
    158            /* the return result is the value of SAI clock */
    159            return saiclocksource;        
   \                     ??SAI_GetInputClock_2: (+1)
   \   0000002C   0x0028             MOVS     R0,R5
   \   0000002E   0xBD32             POP      {R1,R4,R5,PC}    ;; return
    160          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   0x40015804         DC32     0x40015804

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_1:
   \   00000000   0x40015824         DC32     0x40015824

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_2:
   \   00000000   0x40015800         DC32     0x40015800

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_3:
   \   00000000   0x40015C00         DC32     0x40015c00
    161          
    162          /**
    163            * @}
    164            */
    165          
    166          /**
    167            * @}
    168            */
    169          
    170          #endif /* HAL_SAI_MODULE_ENABLED */
    171          /**
    172            * @}
    173            */
    174          
    175          /**
    176            * @}
    177            */
    178          
    179          /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   SAI_BlockSynchroConfig
      16   SAI_GetInputClock
        16   -> HAL_RCCEx_GetPeriphCLKFreq


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable1_2
       4  ??DataTable1_3
      74  SAI_BlockSynchroConfig
      48  SAI_GetInputClock

 
 138 bytes in section .text
 
 138 bytes of CODE memory

Errors: none
Warnings: 1
