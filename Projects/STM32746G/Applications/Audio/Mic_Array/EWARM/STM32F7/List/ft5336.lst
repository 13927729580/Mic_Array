###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.2.10312/W32 for ARM       25/Feb/2016  15:20:36
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\BSP\Components\ft5336\ft5336.c
#    Command line =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\BSP\Components\ft5336\ft5336.c
#        -D USE_HAL_DRIVER -D STM32F746xx -D USE_STM32746G_DISCO -D
#        USE_IOEXPANDER -D USE_USB_FS -lC
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -lA
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -o
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M7 -e --fpu=VFPv5_sp --dlib_config "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 7.3\arm\INC\c\DLib_Config_Full.h"
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\CMSIS\Device\ST\STM32F7xx\Include\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\STM32F7xx_HAL_Driver\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\STM32746G-Discovery\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\Components\Common\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Log\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Fonts\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\CPU\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Core\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Core\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Class\MSC\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\drivers\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_Audio\Addons\PDM\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Class\AUDIO\Inc\
#        -On --use_c++_inline --require_prototypes -I "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 7.3\arm\CMSIS\Include\" -D
#        ARM_MATH_CM7
#    List file    =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List\ft5336.lst
#    Object file  =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj\ft5336.o
#
###############################################################################

D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\BSP\Components\ft5336\ft5336.c
      1          /**
      2            ******************************************************************************
      3            * @file    ft5336.c
      4            * @author  MCD Application Team
      5            * @version V1.0.0
      6            * @date    25-June-2015
      7            * @brief   This file provides a set of functions needed to manage the FT5336
      8            *          touch screen devices.
      9            ******************************************************************************
     10            * @attention
     11            *
     12            * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
     13            *
     14            * Redistribution and use in source and binary forms, with or without modification,
     15            * are permitted provided that the following conditions are met:
     16            *   1. Redistributions of source code must retain the above copyright notice,
     17            *      this list of conditions and the following disclaimer.
     18            *   2. Redistributions in binary form must reproduce the above copyright notice,
     19            *      this list of conditions and the following disclaimer in the documentation
     20            *      and/or other materials provided with the distribution.
     21            *   3. Neither the name of STMicroelectronics nor the names of its contributors
     22            *      may be used to endorse or promote products derived from this software
     23            *      without specific prior written permission.
     24            *
     25            * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     26            * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     27            * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     28            * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
     29            * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     30            * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     31            * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
     32            * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
     33            * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
     34            * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     35            *
     36            ******************************************************************************
     37            */
     38          
     39          /* Includes ------------------------------------------------------------------*/
     40          #include "ft5336.h"
     41          
     42          /** @addtogroup BSP
     43            * @{
     44            */
     45          
     46          /** @addtogroup Component
     47            * @{
     48            */
     49          
     50          /** @defgroup FT5336
     51            * @{
     52            */
     53          
     54          /* Private typedef -----------------------------------------------------------*/
     55          
     56          /** @defgroup FT5336_Private_Types_Definitions
     57            * @{
     58            */
     59          
     60          /* Private define ------------------------------------------------------------*/
     61          
     62          /** @defgroup FT5336_Private_Defines
     63            * @{
     64            */
     65          
     66          /* Private macro -------------------------------------------------------------*/
     67          
     68          /** @defgroup FT5336_Private_Macros
     69            * @{
     70            */
     71          
     72          /* Private variables ---------------------------------------------------------*/
     73          
     74          /** @defgroup FT5336_Private_Variables
     75            * @{
     76            */
     77          
     78          /* Touch screen driver structure initialization */

   \                                 In section .data, align 4
     79          TS_DrvTypeDef ft5336_ts_drv =
   \                     ft5336_ts_drv:
   \   00000000   0x........         DC32 ft5336_Init, ft5336_ReadID, ft5336_Reset, ft5336_TS_Start
   \              0x........   
   \              0x........   
   \              0x........   
   \   00000010   0x........         DC32 ft5336_TS_DetectTouch, ft5336_TS_GetXY, ft5336_TS_EnableIT
   \              0x........   
   \              0x........   
   \   0000001C   0x........         DC32 ft5336_TS_ClearIT, ft5336_TS_ITStatus, ft5336_TS_DisableIT
   \              0x........   
   \              0x........   
     80          {
     81            ft5336_Init,
     82            ft5336_ReadID,
     83            ft5336_Reset,
     84          
     85            ft5336_TS_Start,
     86            ft5336_TS_DetectTouch,
     87            ft5336_TS_GetXY,
     88          
     89            ft5336_TS_EnableIT,
     90            ft5336_TS_ClearIT,
     91            ft5336_TS_ITStatus,
     92            ft5336_TS_DisableIT
     93          
     94          };
     95          
     96          /* Global ft5336 handle */

   \                                 In section .bss, align 4
     97          static ft5336_handle_TypeDef ft5336_handle = { FT5336_I2C_NOT_INITIALIZED, 0, 0};
   \                     ft5336_handle:
   \   00000000                      DS8 4
     98          
     99          /**
    100            * @}
    101            */
    102          
    103          /** @defgroup ft5336_Private_Function_Prototypes
    104            * @{
    105            */
    106          
    107          /* Private functions prototypes-----------------------------------------------*/
    108          
    109          /**
    110            * @brief  Return the status of I2C was initialized or not.
    111            * @param  None.
    112            * @retval : I2C initialization status.
    113            */
    114          static uint8_t ft5336_Get_I2C_InitializedStatus(void);
    115          
    116          /**
    117            * @brief  I2C initialize if needed.
    118            * @param  None.
    119            * @retval : None.
    120            */
    121          static void ft5336_I2C_InitializeIfRequired(void);
    122          
    123          /**
    124            * @brief  Basic static configuration of TouchScreen
    125            * @param  DeviceAddr: FT5336 Device address for communication on I2C Bus.
    126            * @retval Status FT5336_STATUS_OK or FT5336_STATUS_NOT_OK.
    127            */
    128          static uint32_t ft5336_TS_Configure(uint16_t DeviceAddr);
    129          
    130          /** @defgroup ft5336_Private_Functions
    131            * @{
    132            */
    133          
    134          /** @defgroup ft5336_Public_Function_Body
    135            * @{
    136            */
    137          
    138          /* Public functions bodies-----------------------------------------------*/
    139          
    140          
    141          /**
    142            * @brief  Initialize the ft5336 communication bus
    143            *         from MCU to FT5336 : ie I2C channel initialization (if required).
    144            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    145            * @retval None
    146            */

   \                                 In section .text, align 2, keep-with-next
    147          void ft5336_Init(uint16_t DeviceAddr)
    148          {
   \                     ft5336_Init: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    149            /* Wait at least 200ms after power up before accessing registers
    150             * Trsi timing (Time of starting to report point after resetting) from FT5336GQQ datasheet */
    151            TS_IO_Delay(200);
   \   00000004   0x20C8             MOVS     R0,#+200
   \   00000006   0x.... 0x....      BL       TS_IO_Delay
    152          
    153            /* Initialize I2C link if needed */
    154            ft5336_I2C_InitializeIfRequired();
   \   0000000A   0x.... 0x....      BL       ft5336_I2C_InitializeIfRequired
    155          }
   \   0000000E   0xBD10             POP      {R4,PC}          ;; return
    156          
    157          /**
    158            * @brief  Software Reset the ft5336.
    159            *         @note : Not applicable to FT5336.
    160            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    161            * @retval None
    162            */

   \                                 In section .text, align 2, keep-with-next
    163          void ft5336_Reset(uint16_t DeviceAddr)
    164          {
    165            /* Do nothing */
    166            /* No software reset sequence available in FT5336 IC */
    167          }
   \                     ft5336_Reset: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    168          
    169          /**
    170            * @brief  Read the ft5336 device ID, pre initialize I2C in case of need to be
    171            *         able to read the FT5336 device ID, and verify this is a FT5336.
    172            * @param  DeviceAddr: I2C FT5336 Slave address.
    173            * @retval The Device ID (two bytes).
    174            */

   \                                 In section .text, align 2, keep-with-next
    175          uint16_t ft5336_ReadID(uint16_t DeviceAddr)
    176          {
   \                     ft5336_ReadID: (+1)
   \   00000000   0xB570             PUSH     {R4-R6,LR}
   \   00000002   0xB082             SUB      SP,SP,#+8
   \   00000004   0x0004             MOVS     R4,R0
    177            volatile uint8_t ucReadId = 0;
   \   00000006   0x2000             MOVS     R0,#+0
   \   00000008   0xF88D 0x0000      STRB     R0,[SP, #+0]
    178            uint8_t nbReadAttempts = 0;
   \   0000000C   0x2500             MOVS     R5,#+0
    179            uint8_t bFoundDevice = 0; /* Device not found by default */
   \   0000000E   0x2600             MOVS     R6,#+0
    180          
    181            /* Initialize I2C link if needed */
    182            ft5336_I2C_InitializeIfRequired();
   \   00000010   0x.... 0x....      BL       ft5336_I2C_InitializeIfRequired
    183          
    184            /* At maximum 4 attempts to read ID : exit at first finding of the searched device ID */
    185            for(nbReadAttempts = 0; ((nbReadAttempts < 3) && !(bFoundDevice)); nbReadAttempts++)
   \   00000014   0x2000             MOVS     R0,#+0
   \   00000016   0x0005             MOVS     R5,R0
   \                     ??ft5336_ReadID_0: (+1)
   \   00000018   0xB2ED             UXTB     R5,R5            ;; ZeroExt  R5,R5,#+24,#+24
   \   0000001A   0x2D03             CMP      R5,#+3
   \   0000001C   0xDA11             BGE.N    ??ft5336_ReadID_1
   \   0000001E   0xB2F6             UXTB     R6,R6            ;; ZeroExt  R6,R6,#+24,#+24
   \   00000020   0x2E00             CMP      R6,#+0
   \   00000022   0xD10E             BNE.N    ??ft5336_ReadID_1
    186            {
    187              /* Read register FT5336_CHIP_ID_REG as DeviceID detection */
    188              ucReadId = TS_IO_Read(DeviceAddr, FT5336_CHIP_ID_REG);
   \   00000024   0x21A8             MOVS     R1,#+168
   \   00000026   0x0020             MOVS     R0,R4
   \   00000028   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000002A   0x.... 0x....      BL       TS_IO_Read
   \   0000002E   0xF88D 0x0000      STRB     R0,[SP, #+0]
    189          
    190              /* Found the searched device ID ? */
    191              if(ucReadId == FT5336_ID_VALUE)
   \   00000032   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000036   0x2851             CMP      R0,#+81
   \   00000038   0xD101             BNE.N    ??ft5336_ReadID_2
    192              {
    193                /* Set device as found */
    194                bFoundDevice = 1;
   \   0000003A   0x2001             MOVS     R0,#+1
   \   0000003C   0x0006             MOVS     R6,R0
    195              }
    196            }
   \                     ??ft5336_ReadID_2: (+1)
   \   0000003E   0x1C6D             ADDS     R5,R5,#+1
   \   00000040   0xE7EA             B.N      ??ft5336_ReadID_0
    197          
    198            /* Return the device ID value */
    199            return (ucReadId);
   \                     ??ft5336_ReadID_1: (+1)
   \   00000042   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000046   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000048   0xBD76             POP      {R1,R2,R4-R6,PC}  ;; return
    200          }
    201          
    202          /**
    203            * @brief  Configures the touch Screen IC device to start detecting touches
    204            * @param  DeviceAddr: Device address on communication Bus (I2C slave address).
    205            * @retval None.
    206            */

   \                                 In section .text, align 2, keep-with-next
    207          void ft5336_TS_Start(uint16_t DeviceAddr)
    208          {
   \                     ft5336_TS_Start: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    209            /* Minimum static configuration of FT5336 */
    210            FT5336_ASSERT(ft5336_TS_Configure(DeviceAddr));
   \   00000004   0x0020             MOVS     R0,R4
   \   00000006   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000008   0x.... 0x....      BL       ft5336_TS_Configure
    211          
    212            /* By default set FT5336 IC in Polling mode : no INT generation on FT5336 for new touch available */
    213            /* Note TS_INT is active low                                                                      */
    214            ft5336_TS_DisableIT(DeviceAddr);
   \   0000000C   0x0020             MOVS     R0,R4
   \   0000000E   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000010   0x.... 0x....      BL       ft5336_TS_DisableIT
    215          }
   \   00000014   0xBD10             POP      {R4,PC}          ;; return
    216          
    217          /**
    218            * @brief  Return if there is touches detected or not.
    219            *         Try to detect new touches and forget the old ones (reset internal global
    220            *         variables).
    221            * @param  DeviceAddr: Device address on communication Bus.
    222            * @retval : Number of active touches detected (can be 0, 1 or 2).
    223            */

   \                                 In section .text, align 2, keep-with-next
    224          uint8_t ft5336_TS_DetectTouch(uint16_t DeviceAddr)
    225          {
   \                     ft5336_TS_DetectTouch: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0xB082             SUB      SP,SP,#+8
   \   00000004   0x0004             MOVS     R4,R0
    226            volatile uint8_t nbTouch = 0;
   \   00000006   0x2000             MOVS     R0,#+0
   \   00000008   0xF88D 0x0000      STRB     R0,[SP, #+0]
    227          
    228            /* Read register FT5336_TD_STAT_REG to check number of touches detection */
    229            nbTouch = TS_IO_Read(DeviceAddr, FT5336_TD_STAT_REG);
   \   0000000C   0x2102             MOVS     R1,#+2
   \   0000000E   0x0020             MOVS     R0,R4
   \   00000010   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000012   0x.... 0x....      BL       TS_IO_Read
   \   00000016   0xF88D 0x0000      STRB     R0,[SP, #+0]
    230            nbTouch &= FT5336_TD_STAT_MASK;
   \   0000001A   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000001E   0xF010 0x000F      ANDS     R0,R0,#0xF
   \   00000022   0xF88D 0x0000      STRB     R0,[SP, #+0]
    231          
    232            if(nbTouch > FT5336_MAX_DETECTABLE_TOUCH)
   \   00000026   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000002A   0x2806             CMP      R0,#+6
   \   0000002C   0xDB02             BLT.N    ??ft5336_TS_DetectTouch_0
    233            {
    234              /* If invalid number of touch detected, set it to zero */
    235              nbTouch = 0;
   \   0000002E   0x2000             MOVS     R0,#+0
   \   00000030   0xF88D 0x0000      STRB     R0,[SP, #+0]
    236            }
    237          
    238            /* Update ft5336 driver internal global : current number of active touches */
    239            ft5336_handle.currActiveTouchNb = nbTouch;
   \                     ??ft5336_TS_DetectTouch_0: (+1)
   \   00000034   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000038   0x....             LDR.N    R1,??DataTable4
   \   0000003A   0x7048             STRB     R0,[R1, #+1]
    240          
    241            /* Reset current active touch index on which to work on */
    242            ft5336_handle.currActiveTouchIdx = 0;
   \   0000003C   0x2000             MOVS     R0,#+0
   \   0000003E   0x....             LDR.N    R1,??DataTable4
   \   00000040   0x7088             STRB     R0,[R1, #+2]
    243          
    244            return(nbTouch);
   \   00000042   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000046   0xBD16             POP      {R1,R2,R4,PC}    ;; return
    245          }
    246          
    247          /**
    248            * @brief  Get the touch screen X and Y positions values
    249            *         Manage multi touch thanks to touch Index global
    250            *         variable 'ft5336_handle.currActiveTouchIdx'.
    251            * @param  DeviceAddr: Device address on communication Bus.
    252            * @param  X: Pointer to X position value
    253            * @param  Y: Pointer to Y position value
    254            * @retval None.
    255            */

   \                                 In section .text, align 2, keep-with-next
    256          void ft5336_TS_GetXY(uint16_t DeviceAddr, uint16_t *X, uint16_t *Y)
    257          {
   \                     ft5336_TS_GetXY: (+1)
   \   00000000   0xE92D 0x47F0      PUSH     {R4-R10,LR}
   \   00000004   0xB082             SUB      SP,SP,#+8
   \   00000006   0x0004             MOVS     R4,R0
   \   00000008   0x000D             MOVS     R5,R1
   \   0000000A   0x0016             MOVS     R6,R2
    258            volatile uint8_t ucReadData = 0;
   \   0000000C   0x2000             MOVS     R0,#+0
   \   0000000E   0xF88D 0x0000      STRB     R0,[SP, #+0]
    259            static uint16_t coord;
    260            uint8_t regAddressXLow = 0;
   \   00000012   0x2700             MOVS     R7,#+0
    261            uint8_t regAddressXHigh = 0;
   \   00000014   0xF05F 0x0800      MOVS     R8,#+0
    262            uint8_t regAddressYLow = 0;
   \   00000018   0xF05F 0x0900      MOVS     R9,#+0
    263            uint8_t regAddressYHigh = 0;
   \   0000001C   0xF05F 0x0A00      MOVS     R10,#+0
    264          
    265            if(ft5336_handle.currActiveTouchIdx < ft5336_handle.currActiveTouchNb)
   \   00000020   0x....             LDR.N    R0,??DataTable4
   \   00000022   0x7880             LDRB     R0,[R0, #+2]
   \   00000024   0x....             LDR.N    R1,??DataTable4
   \   00000026   0x7849             LDRB     R1,[R1, #+1]
   \   00000028   0x4288             CMP      R0,R1
   \   0000002A   0xF080 0x80B4      BCS.W    ??ft5336_TS_GetXY_0
    266            {
    267              switch(ft5336_handle.currActiveTouchIdx)
   \   0000002E   0x....             LDR.N    R0,??DataTable4
   \   00000030   0x7880             LDRB     R0,[R0, #+2]
   \   00000032   0x2800             CMP      R0,#+0
   \   00000034   0xD00E             BEQ.N    ??ft5336_TS_GetXY_1
   \   00000036   0x2802             CMP      R0,#+2
   \   00000038   0xD01E             BEQ.N    ??ft5336_TS_GetXY_2
   \   0000003A   0xD314             BCC.N    ??ft5336_TS_GetXY_3
   \   0000003C   0x2804             CMP      R0,#+4
   \   0000003E   0xD02D             BEQ.N    ??ft5336_TS_GetXY_4
   \   00000040   0xD323             BCC.N    ??ft5336_TS_GetXY_5
   \   00000042   0x2806             CMP      R0,#+6
   \   00000044   0xD03C             BEQ.N    ??ft5336_TS_GetXY_6
   \   00000046   0xD332             BCC.N    ??ft5336_TS_GetXY_7
   \   00000048   0x2808             CMP      R0,#+8
   \   0000004A   0xD04B             BEQ.N    ??ft5336_TS_GetXY_8
   \   0000004C   0xD341             BCC.N    ??ft5336_TS_GetXY_9
   \   0000004E   0x2809             CMP      R0,#+9
   \   00000050   0xD051             BEQ.N    ??ft5336_TS_GetXY_10
   \   00000052   0xE059             B.N      ??ft5336_TS_GetXY_11
    268              {
    269              case 0 :
    270                regAddressXLow  = FT5336_P1_XL_REG;
   \                     ??ft5336_TS_GetXY_1: (+1)
   \   00000054   0x2004             MOVS     R0,#+4
   \   00000056   0x0007             MOVS     R7,R0
    271                regAddressXHigh = FT5336_P1_XH_REG;
   \   00000058   0x2003             MOVS     R0,#+3
   \   0000005A   0x4680             MOV      R8,R0
    272                regAddressYLow  = FT5336_P1_YL_REG;
   \   0000005C   0x2006             MOVS     R0,#+6
   \   0000005E   0x4681             MOV      R9,R0
    273                regAddressYHigh = FT5336_P1_YH_REG;
   \   00000060   0x2005             MOVS     R0,#+5
   \   00000062   0x4682             MOV      R10,R0
    274                break;
   \   00000064   0xE050             B.N      ??ft5336_TS_GetXY_12
    275          
    276              case 1 :
    277                regAddressXLow  = FT5336_P2_XL_REG;
   \                     ??ft5336_TS_GetXY_3: (+1)
   \   00000066   0x200A             MOVS     R0,#+10
   \   00000068   0x0007             MOVS     R7,R0
    278                regAddressXHigh = FT5336_P2_XH_REG;
   \   0000006A   0x2009             MOVS     R0,#+9
   \   0000006C   0x4680             MOV      R8,R0
    279                regAddressYLow  = FT5336_P2_YL_REG;
   \   0000006E   0x200C             MOVS     R0,#+12
   \   00000070   0x4681             MOV      R9,R0
    280                regAddressYHigh = FT5336_P2_YH_REG;
   \   00000072   0x200B             MOVS     R0,#+11
   \   00000074   0x4682             MOV      R10,R0
    281                break;
   \   00000076   0xE047             B.N      ??ft5336_TS_GetXY_12
    282          
    283              case 2 :
    284                regAddressXLow  = FT5336_P3_XL_REG;
   \                     ??ft5336_TS_GetXY_2: (+1)
   \   00000078   0x2010             MOVS     R0,#+16
   \   0000007A   0x0007             MOVS     R7,R0
    285                regAddressXHigh = FT5336_P3_XH_REG;
   \   0000007C   0x200F             MOVS     R0,#+15
   \   0000007E   0x4680             MOV      R8,R0
    286                regAddressYLow  = FT5336_P3_YL_REG;
   \   00000080   0x2012             MOVS     R0,#+18
   \   00000082   0x4681             MOV      R9,R0
    287                regAddressYHigh = FT5336_P3_YH_REG;
   \   00000084   0x2011             MOVS     R0,#+17
   \   00000086   0x4682             MOV      R10,R0
    288                break;
   \   00000088   0xE03E             B.N      ??ft5336_TS_GetXY_12
    289          
    290              case 3 :
    291                regAddressXLow  = FT5336_P4_XL_REG;
   \                     ??ft5336_TS_GetXY_5: (+1)
   \   0000008A   0x2016             MOVS     R0,#+22
   \   0000008C   0x0007             MOVS     R7,R0
    292                regAddressXHigh = FT5336_P4_XH_REG;
   \   0000008E   0x2015             MOVS     R0,#+21
   \   00000090   0x4680             MOV      R8,R0
    293                regAddressYLow  = FT5336_P4_YL_REG;
   \   00000092   0x2018             MOVS     R0,#+24
   \   00000094   0x4681             MOV      R9,R0
    294                regAddressYHigh = FT5336_P4_YH_REG;
   \   00000096   0x2017             MOVS     R0,#+23
   \   00000098   0x4682             MOV      R10,R0
    295                break;
   \   0000009A   0xE035             B.N      ??ft5336_TS_GetXY_12
    296          
    297              case 4 :
    298                regAddressXLow  = FT5336_P5_XL_REG;
   \                     ??ft5336_TS_GetXY_4: (+1)
   \   0000009C   0x201C             MOVS     R0,#+28
   \   0000009E   0x0007             MOVS     R7,R0
    299                regAddressXHigh = FT5336_P5_XH_REG;
   \   000000A0   0x201B             MOVS     R0,#+27
   \   000000A2   0x4680             MOV      R8,R0
    300                regAddressYLow  = FT5336_P5_YL_REG;
   \   000000A4   0x201E             MOVS     R0,#+30
   \   000000A6   0x4681             MOV      R9,R0
    301                regAddressYHigh = FT5336_P5_YH_REG;
   \   000000A8   0x201D             MOVS     R0,#+29
   \   000000AA   0x4682             MOV      R10,R0
    302                break;
   \   000000AC   0xE02C             B.N      ??ft5336_TS_GetXY_12
    303          
    304              case 5 :
    305                regAddressXLow  = FT5336_P6_XL_REG;
   \                     ??ft5336_TS_GetXY_7: (+1)
   \   000000AE   0x2022             MOVS     R0,#+34
   \   000000B0   0x0007             MOVS     R7,R0
    306                regAddressXHigh = FT5336_P6_XH_REG;
   \   000000B2   0x2021             MOVS     R0,#+33
   \   000000B4   0x4680             MOV      R8,R0
    307                regAddressYLow  = FT5336_P6_YL_REG;
   \   000000B6   0x2024             MOVS     R0,#+36
   \   000000B8   0x4681             MOV      R9,R0
    308                regAddressYHigh = FT5336_P6_YH_REG;
   \   000000BA   0x2023             MOVS     R0,#+35
   \   000000BC   0x4682             MOV      R10,R0
    309                break;
   \   000000BE   0xE023             B.N      ??ft5336_TS_GetXY_12
    310          
    311              case 6 :
    312                regAddressXLow  = FT5336_P7_XL_REG;
   \                     ??ft5336_TS_GetXY_6: (+1)
   \   000000C0   0x2028             MOVS     R0,#+40
   \   000000C2   0x0007             MOVS     R7,R0
    313                regAddressXHigh = FT5336_P7_XH_REG;
   \   000000C4   0x2027             MOVS     R0,#+39
   \   000000C6   0x4680             MOV      R8,R0
    314                regAddressYLow  = FT5336_P7_YL_REG;
   \   000000C8   0x202A             MOVS     R0,#+42
   \   000000CA   0x4681             MOV      R9,R0
    315                regAddressYHigh = FT5336_P7_YH_REG;
   \   000000CC   0x2029             MOVS     R0,#+41
   \   000000CE   0x4682             MOV      R10,R0
    316                break;
   \   000000D0   0xE01A             B.N      ??ft5336_TS_GetXY_12
    317          
    318              case 7 :
    319                regAddressXLow  = FT5336_P8_XL_REG;
   \                     ??ft5336_TS_GetXY_9: (+1)
   \   000000D2   0x202E             MOVS     R0,#+46
   \   000000D4   0x0007             MOVS     R7,R0
    320                regAddressXHigh = FT5336_P8_XH_REG;
   \   000000D6   0x202D             MOVS     R0,#+45
   \   000000D8   0x4680             MOV      R8,R0
    321                regAddressYLow  = FT5336_P8_YL_REG;
   \   000000DA   0x2030             MOVS     R0,#+48
   \   000000DC   0x4681             MOV      R9,R0
    322                regAddressYHigh = FT5336_P8_YH_REG;
   \   000000DE   0x202F             MOVS     R0,#+47
   \   000000E0   0x4682             MOV      R10,R0
    323                break;
   \   000000E2   0xE011             B.N      ??ft5336_TS_GetXY_12
    324          
    325              case 8 :
    326                regAddressXLow  = FT5336_P9_XL_REG;
   \                     ??ft5336_TS_GetXY_8: (+1)
   \   000000E4   0x2034             MOVS     R0,#+52
   \   000000E6   0x0007             MOVS     R7,R0
    327                regAddressXHigh = FT5336_P9_XH_REG;
   \   000000E8   0x2033             MOVS     R0,#+51
   \   000000EA   0x4680             MOV      R8,R0
    328                regAddressYLow  = FT5336_P9_YL_REG;
   \   000000EC   0x2036             MOVS     R0,#+54
   \   000000EE   0x4681             MOV      R9,R0
    329                regAddressYHigh = FT5336_P9_YH_REG;
   \   000000F0   0x2035             MOVS     R0,#+53
   \   000000F2   0x4682             MOV      R10,R0
    330                break;
   \   000000F4   0xE008             B.N      ??ft5336_TS_GetXY_12
    331          
    332              case 9 :
    333                regAddressXLow  = FT5336_P10_XL_REG;
   \                     ??ft5336_TS_GetXY_10: (+1)
   \   000000F6   0x203A             MOVS     R0,#+58
   \   000000F8   0x0007             MOVS     R7,R0
    334                regAddressXHigh = FT5336_P10_XH_REG;
   \   000000FA   0x2039             MOVS     R0,#+57
   \   000000FC   0x4680             MOV      R8,R0
    335                regAddressYLow  = FT5336_P10_YL_REG;
   \   000000FE   0x203C             MOVS     R0,#+60
   \   00000100   0x4681             MOV      R9,R0
    336                regAddressYHigh = FT5336_P10_YH_REG;
   \   00000102   0x203B             MOVS     R0,#+59
   \   00000104   0x4682             MOV      R10,R0
    337                break;
   \   00000106   0xE7FF             B.N      ??ft5336_TS_GetXY_12
    338          
    339              default :
    340                break;
    341          
    342              } /* end switch(ft5336_handle.currActiveTouchIdx) */
    343          
    344              /* Read low part of X position */
    345              ucReadData = TS_IO_Read(DeviceAddr, regAddressXLow);
   \                     ??ft5336_TS_GetXY_11: (+1)
   \                     ??ft5336_TS_GetXY_12: (+1)
   \   00000108   0x0039             MOVS     R1,R7
   \   0000010A   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   0000010C   0x0020             MOVS     R0,R4
   \   0000010E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000110   0x.... 0x....      BL       TS_IO_Read
   \   00000114   0xF88D 0x0000      STRB     R0,[SP, #+0]
    346              coord = (ucReadData & FT5336_TOUCH_POS_LSB_MASK) >> FT5336_TOUCH_POS_LSB_SHIFT;
   \   00000118   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000011C   0x....             LDR.N    R1,??DataTable4_1
   \   0000011E   0x8008             STRH     R0,[R1, #+0]
    347          
    348              /* Read high part of X position */
    349              ucReadData = TS_IO_Read(DeviceAddr, regAddressXHigh);
   \   00000120   0x4641             MOV      R1,R8
   \   00000122   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000124   0x0020             MOVS     R0,R4
   \   00000126   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000128   0x.... 0x....      BL       TS_IO_Read
   \   0000012C   0xF88D 0x0000      STRB     R0,[SP, #+0]
    350              coord |= ((ucReadData & FT5336_TOUCH_POS_MSB_MASK) >> FT5336_TOUCH_POS_MSB_SHIFT) << 8;
   \   00000130   0x....             LDR.N    R0,??DataTable4_1
   \   00000132   0x8800             LDRH     R0,[R0, #+0]
   \   00000134   0xF89D 0x1000      LDRB     R1,[SP, #+0]
   \   00000138   0xF011 0x010F      ANDS     R1,R1,#0xF
   \   0000013C   0xEA50 0x2001      ORRS     R0,R0,R1, LSL #+8
   \   00000140   0x....             LDR.N    R1,??DataTable4_1
   \   00000142   0x8008             STRH     R0,[R1, #+0]
    351          
    352              /* Send back ready X position to caller */
    353              *X = coord;
   \   00000144   0x....             LDR.N    R0,??DataTable4_1
   \   00000146   0x8800             LDRH     R0,[R0, #+0]
   \   00000148   0x8028             STRH     R0,[R5, #+0]
    354          
    355              /* Read low part of Y position */
    356              ucReadData = TS_IO_Read(DeviceAddr, regAddressYLow);
   \   0000014A   0x4649             MOV      R1,R9
   \   0000014C   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   0000014E   0x0020             MOVS     R0,R4
   \   00000150   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000152   0x.... 0x....      BL       TS_IO_Read
   \   00000156   0xF88D 0x0000      STRB     R0,[SP, #+0]
    357              coord = (ucReadData & FT5336_TOUCH_POS_LSB_MASK) >> FT5336_TOUCH_POS_LSB_SHIFT;
   \   0000015A   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000015E   0x....             LDR.N    R1,??DataTable4_1
   \   00000160   0x8008             STRH     R0,[R1, #+0]
    358          
    359              /* Read high part of Y position */
    360              ucReadData = TS_IO_Read(DeviceAddr, regAddressYHigh);
   \   00000162   0x4651             MOV      R1,R10
   \   00000164   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000166   0x0020             MOVS     R0,R4
   \   00000168   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000016A   0x.... 0x....      BL       TS_IO_Read
   \   0000016E   0xF88D 0x0000      STRB     R0,[SP, #+0]
    361              coord |= ((ucReadData & FT5336_TOUCH_POS_MSB_MASK) >> FT5336_TOUCH_POS_MSB_SHIFT) << 8;
   \   00000172   0x....             LDR.N    R0,??DataTable4_1
   \   00000174   0x8800             LDRH     R0,[R0, #+0]
   \   00000176   0xF89D 0x1000      LDRB     R1,[SP, #+0]
   \   0000017A   0xF011 0x010F      ANDS     R1,R1,#0xF
   \   0000017E   0xEA50 0x2001      ORRS     R0,R0,R1, LSL #+8
   \   00000182   0x....             LDR.N    R1,??DataTable4_1
   \   00000184   0x8008             STRH     R0,[R1, #+0]
    362          
    363              /* Send back ready Y position to caller */
    364              *Y = coord;
   \   00000186   0x....             LDR.N    R0,??DataTable4_1
   \   00000188   0x8800             LDRH     R0,[R0, #+0]
   \   0000018A   0x8030             STRH     R0,[R6, #+0]
    365          
    366              ft5336_handle.currActiveTouchIdx++; /* next call will work on next touch */
   \   0000018C   0x....             LDR.N    R0,??DataTable4
   \   0000018E   0x7880             LDRB     R0,[R0, #+2]
   \   00000190   0x1C40             ADDS     R0,R0,#+1
   \   00000192   0x....             LDR.N    R1,??DataTable4
   \   00000194   0x7088             STRB     R0,[R1, #+2]
    367          
    368            } /* of if(ft5336_handle.currActiveTouchIdx < ft5336_handle.currActiveTouchNb) */
    369          }
   \                     ??ft5336_TS_GetXY_0: (+1)
   \   00000196   0xE8BD 0x87F3      POP      {R0,R1,R4-R10,PC}  ;; return

   \                                 In section .bss, align 2
   \                     ??coord:
   \   00000000                      DS8 2
    370          
    371          /**
    372            * @brief  Configure the FT5336 device to generate IT on given INT pin
    373            *         connected to MCU as EXTI.
    374            * @param  DeviceAddr: Device address on communication Bus (Slave I2C address of FT5336).
    375            * @retval None
    376            */

   \                                 In section .text, align 2, keep-with-next
    377          void ft5336_TS_EnableIT(uint16_t DeviceAddr)
    378          {
   \                     ft5336_TS_EnableIT: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
    379             uint8_t regValue = 0;
   \   00000004   0x2500             MOVS     R5,#+0
    380             regValue = (FT5336_G_MODE_INTERRUPT_TRIGGER & (FT5336_G_MODE_INTERRUPT_MASK >> FT5336_G_MODE_INTERRUPT_SHIFT)) << FT5336_G_MODE_INTERRUPT_SHIFT;
   \   00000006   0x2001             MOVS     R0,#+1
   \   00000008   0x0005             MOVS     R5,R0
    381          
    382             /* Set interrupt trigger mode in FT5336_GMODE_REG */
    383             TS_IO_Write(DeviceAddr, FT5336_GMODE_REG, regValue);
   \   0000000A   0x002A             MOVS     R2,R5
   \   0000000C   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   0000000E   0x21A4             MOVS     R1,#+164
   \   00000010   0x0020             MOVS     R0,R4
   \   00000012   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000014   0x.... 0x....      BL       TS_IO_Write
    384          }
   \   00000018   0xBD31             POP      {R0,R4,R5,PC}    ;; return
    385          
    386          /**
    387            * @brief  Configure the FT5336 device to stop generating IT on the given INT pin
    388            *         connected to MCU as EXTI.
    389            * @param  DeviceAddr: Device address on communication Bus (Slave I2C address of FT5336).
    390            * @retval None
    391            */

   \                                 In section .text, align 2, keep-with-next
    392          void ft5336_TS_DisableIT(uint16_t DeviceAddr)
    393          {
   \                     ft5336_TS_DisableIT: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
    394            uint8_t regValue = 0;
   \   00000004   0x2500             MOVS     R5,#+0
    395            regValue = (FT5336_G_MODE_INTERRUPT_POLLING & (FT5336_G_MODE_INTERRUPT_MASK >> FT5336_G_MODE_INTERRUPT_SHIFT)) << FT5336_G_MODE_INTERRUPT_SHIFT;
   \   00000006   0x2000             MOVS     R0,#+0
   \   00000008   0x0005             MOVS     R5,R0
    396          
    397            /* Set interrupt polling mode in FT5336_GMODE_REG */
    398            TS_IO_Write(DeviceAddr, FT5336_GMODE_REG, regValue);
   \   0000000A   0x002A             MOVS     R2,R5
   \   0000000C   0xB2D2             UXTB     R2,R2            ;; ZeroExt  R2,R2,#+24,#+24
   \   0000000E   0x21A4             MOVS     R1,#+164
   \   00000010   0x0020             MOVS     R0,R4
   \   00000012   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000014   0x.... 0x....      BL       TS_IO_Write
    399          }
   \   00000018   0xBD31             POP      {R0,R4,R5,PC}    ;; return
    400          
    401          /**
    402            * @brief  Get IT status from FT5336 interrupt status registers
    403            *         Should be called Following an EXTI coming to the MCU to know the detailed
    404            *         reason of the interrupt.
    405            *         @note : This feature is not applicable to FT5336.
    406            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    407            * @retval TS interrupts status : always return 0 here
    408            */

   \                                 In section .text, align 2, keep-with-next
    409          uint8_t ft5336_TS_ITStatus(uint16_t DeviceAddr)
    410          {
   \                     ft5336_TS_ITStatus: (+1)
   \   00000000   0x0001             MOVS     R1,R0
    411            /* Always return 0 as feature not applicable to FT5336 */
    412            return 0;
   \   00000002   0x2000             MOVS     R0,#+0
   \   00000004   0x4770             BX       LR               ;; return
    413          }
    414          
    415          /**
    416            * @brief  Clear IT status in FT5336 interrupt status clear registers
    417            *         Should be called Following an EXTI coming to the MCU.
    418            *         @note : This feature is not applicable to FT5336.
    419            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    420            * @retval None
    421            */

   \                                 In section .text, align 2, keep-with-next
    422          void ft5336_TS_ClearIT(uint16_t DeviceAddr)
    423          {
    424            /* Nothing to be done here for FT5336 */
    425          }
   \                     ft5336_TS_ClearIT: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    426          
    427          /**** NEW FEATURES enabled when Multi-touch support is enabled ****/
    428          
    429          #if (TS_MULTI_TOUCH_SUPPORTED == 1)
    430          
    431          /**
    432            * @brief  Get the last touch gesture identification (zoom, move up/down...).
    433            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    434            * @param  pGestureId : Pointer to get last touch gesture Identification.
    435            * @retval None.
    436            */

   \                                 In section .text, align 2, keep-with-next
    437          void ft5336_TS_GetGestureID(uint16_t DeviceAddr, uint32_t * pGestureId)
    438          {
   \                     ft5336_TS_GetGestureID: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
   \   00000004   0x000D             MOVS     R5,R1
    439            volatile uint8_t ucReadData = 0;
   \   00000006   0x2000             MOVS     R0,#+0
   \   00000008   0xF88D 0x0000      STRB     R0,[SP, #+0]
    440          
    441            ucReadData = TS_IO_Read(DeviceAddr, FT5336_GEST_ID_REG);
   \   0000000C   0x2101             MOVS     R1,#+1
   \   0000000E   0x0020             MOVS     R0,R4
   \   00000010   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000012   0x.... 0x....      BL       TS_IO_Read
   \   00000016   0xF88D 0x0000      STRB     R0,[SP, #+0]
    442          
    443            * pGestureId = ucReadData;
   \   0000001A   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000001E   0x6028             STR      R0,[R5, #+0]
    444          }
   \   00000020   0xBD31             POP      {R0,R4,R5,PC}    ;; return
    445          
    446          /**
    447            * @brief  Get the touch detailed informations on touch number 'touchIdx' (0..1)
    448            *         This touch detailed information contains :
    449            *         - weight that was applied to this touch
    450            *         - sub-area of the touch in the touch panel
    451            *         - event of linked to the touch (press down, lift up, ...)
    452            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    453            * @param  touchIdx : Passed index of the touch (0..1) on which we want to get the
    454            *                    detailed information.
    455            * @param  pWeight : Pointer to to get the weight information of 'touchIdx'.
    456            * @param  pArea   : Pointer to to get the sub-area information of 'touchIdx'.
    457            * @param  pEvent  : Pointer to to get the event information of 'touchIdx'.
    458          
    459            * @retval None.
    460            */

   \                                 In section .text, align 2, keep-with-next
    461          void ft5336_TS_GetTouchInfo(uint16_t   DeviceAddr,
    462                                      uint32_t   touchIdx,
    463                                      uint32_t * pWeight,
    464                                      uint32_t * pArea,
    465                                      uint32_t * pEvent)
    466          {
   \                     ft5336_TS_GetTouchInfo: (+1)
   \   00000000   0xE92D 0x4FF8      PUSH     {R3-R11,LR}
   \   00000004   0x0004             MOVS     R4,R0
   \   00000006   0x000D             MOVS     R5,R1
   \   00000008   0x0016             MOVS     R6,R2
   \   0000000A   0x001F             MOVS     R7,R3
   \   0000000C   0xF8DD 0x8028      LDR      R8,[SP, #+40]
    467            volatile uint8_t ucReadData = 0;
   \   00000010   0x2000             MOVS     R0,#+0
   \   00000012   0xF88D 0x0000      STRB     R0,[SP, #+0]
    468            uint8_t regAddressXHigh = 0;
   \   00000016   0xF05F 0x0900      MOVS     R9,#+0
    469            uint8_t regAddressPWeight = 0;
   \   0000001A   0xF05F 0x0A00      MOVS     R10,#+0
    470            uint8_t regAddressPMisc = 0;
   \   0000001E   0xF05F 0x0B00      MOVS     R11,#+0
    471          
    472            if(touchIdx < ft5336_handle.currActiveTouchNb)
   \   00000022   0x....             LDR.N    R0,??DataTable4
   \   00000024   0x7840             LDRB     R0,[R0, #+1]
   \   00000026   0x4285             CMP      R5,R0
   \   00000028   0xF080 0x807F      BCS.W    ??ft5336_TS_GetTouchInfo_0
    473            {
    474              switch(touchIdx)
   \   0000002C   0x2D00             CMP      R5,#+0
   \   0000002E   0xD00E             BEQ.N    ??ft5336_TS_GetTouchInfo_1
   \   00000030   0x2D02             CMP      R5,#+2
   \   00000032   0xD01A             BEQ.N    ??ft5336_TS_GetTouchInfo_2
   \   00000034   0xD312             BCC.N    ??ft5336_TS_GetTouchInfo_3
   \   00000036   0x2D04             CMP      R5,#+4
   \   00000038   0xD025             BEQ.N    ??ft5336_TS_GetTouchInfo_4
   \   0000003A   0xD31D             BCC.N    ??ft5336_TS_GetTouchInfo_5
   \   0000003C   0x2D06             CMP      R5,#+6
   \   0000003E   0xD030             BEQ.N    ??ft5336_TS_GetTouchInfo_6
   \   00000040   0xD328             BCC.N    ??ft5336_TS_GetTouchInfo_7
   \   00000042   0x2D08             CMP      R5,#+8
   \   00000044   0xD03B             BEQ.N    ??ft5336_TS_GetTouchInfo_8
   \   00000046   0xD333             BCC.N    ??ft5336_TS_GetTouchInfo_9
   \   00000048   0x2D09             CMP      R5,#+9
   \   0000004A   0xD03F             BEQ.N    ??ft5336_TS_GetTouchInfo_10
   \   0000004C   0xE045             B.N      ??ft5336_TS_GetTouchInfo_11
    475              {
    476              case 0 :
    477                regAddressXHigh   = FT5336_P1_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_1: (+1)
   \   0000004E   0x2003             MOVS     R0,#+3
   \   00000050   0x4681             MOV      R9,R0
    478                regAddressPWeight = FT5336_P1_WEIGHT_REG;
   \   00000052   0x2007             MOVS     R0,#+7
   \   00000054   0x4682             MOV      R10,R0
    479                regAddressPMisc   = FT5336_P1_MISC_REG;
   \   00000056   0x2008             MOVS     R0,#+8
   \   00000058   0x4683             MOV      R11,R0
    480                break;
   \   0000005A   0xE03E             B.N      ??ft5336_TS_GetTouchInfo_12
    481          
    482              case 1 :
    483                regAddressXHigh   = FT5336_P2_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_3: (+1)
   \   0000005C   0x2009             MOVS     R0,#+9
   \   0000005E   0x4681             MOV      R9,R0
    484                regAddressPWeight = FT5336_P2_WEIGHT_REG;
   \   00000060   0x200D             MOVS     R0,#+13
   \   00000062   0x4682             MOV      R10,R0
    485                regAddressPMisc   = FT5336_P2_MISC_REG;
   \   00000064   0x200E             MOVS     R0,#+14
   \   00000066   0x4683             MOV      R11,R0
    486                break;
   \   00000068   0xE037             B.N      ??ft5336_TS_GetTouchInfo_12
    487          
    488              case 2 :
    489                regAddressXHigh   = FT5336_P3_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_2: (+1)
   \   0000006A   0x200F             MOVS     R0,#+15
   \   0000006C   0x4681             MOV      R9,R0
    490                regAddressPWeight = FT5336_P3_WEIGHT_REG;
   \   0000006E   0x2013             MOVS     R0,#+19
   \   00000070   0x4682             MOV      R10,R0
    491                regAddressPMisc   = FT5336_P3_MISC_REG;
   \   00000072   0x2014             MOVS     R0,#+20
   \   00000074   0x4683             MOV      R11,R0
    492                break;
   \   00000076   0xE030             B.N      ??ft5336_TS_GetTouchInfo_12
    493          
    494              case 3 :
    495                regAddressXHigh   = FT5336_P4_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_5: (+1)
   \   00000078   0x2015             MOVS     R0,#+21
   \   0000007A   0x4681             MOV      R9,R0
    496                regAddressPWeight = FT5336_P4_WEIGHT_REG;
   \   0000007C   0x2019             MOVS     R0,#+25
   \   0000007E   0x4682             MOV      R10,R0
    497                regAddressPMisc   = FT5336_P4_MISC_REG;
   \   00000080   0x201A             MOVS     R0,#+26
   \   00000082   0x4683             MOV      R11,R0
    498                break;
   \   00000084   0xE029             B.N      ??ft5336_TS_GetTouchInfo_12
    499          
    500              case 4 :
    501                regAddressXHigh   = FT5336_P5_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_4: (+1)
   \   00000086   0x201B             MOVS     R0,#+27
   \   00000088   0x4681             MOV      R9,R0
    502                regAddressPWeight = FT5336_P5_WEIGHT_REG;
   \   0000008A   0x201F             MOVS     R0,#+31
   \   0000008C   0x4682             MOV      R10,R0
    503                regAddressPMisc   = FT5336_P5_MISC_REG;
   \   0000008E   0x2020             MOVS     R0,#+32
   \   00000090   0x4683             MOV      R11,R0
    504                break;
   \   00000092   0xE022             B.N      ??ft5336_TS_GetTouchInfo_12
    505          
    506              case 5 :
    507                regAddressXHigh   = FT5336_P6_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_7: (+1)
   \   00000094   0x2021             MOVS     R0,#+33
   \   00000096   0x4681             MOV      R9,R0
    508                regAddressPWeight = FT5336_P6_WEIGHT_REG;
   \   00000098   0x2025             MOVS     R0,#+37
   \   0000009A   0x4682             MOV      R10,R0
    509                regAddressPMisc   = FT5336_P6_MISC_REG;
   \   0000009C   0x2026             MOVS     R0,#+38
   \   0000009E   0x4683             MOV      R11,R0
    510                break;
   \   000000A0   0xE01B             B.N      ??ft5336_TS_GetTouchInfo_12
    511          
    512              case 6 :
    513                regAddressXHigh   = FT5336_P7_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_6: (+1)
   \   000000A2   0x2027             MOVS     R0,#+39
   \   000000A4   0x4681             MOV      R9,R0
    514                regAddressPWeight = FT5336_P7_WEIGHT_REG;
   \   000000A6   0x202B             MOVS     R0,#+43
   \   000000A8   0x4682             MOV      R10,R0
    515                regAddressPMisc   = FT5336_P7_MISC_REG;
   \   000000AA   0x202C             MOVS     R0,#+44
   \   000000AC   0x4683             MOV      R11,R0
    516                break;
   \   000000AE   0xE014             B.N      ??ft5336_TS_GetTouchInfo_12
    517          
    518              case 7 :
    519                regAddressXHigh   = FT5336_P8_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_9: (+1)
   \   000000B0   0x202D             MOVS     R0,#+45
   \   000000B2   0x4681             MOV      R9,R0
    520                regAddressPWeight = FT5336_P8_WEIGHT_REG;
   \   000000B4   0x2031             MOVS     R0,#+49
   \   000000B6   0x4682             MOV      R10,R0
    521                regAddressPMisc   = FT5336_P8_MISC_REG;
   \   000000B8   0x2032             MOVS     R0,#+50
   \   000000BA   0x4683             MOV      R11,R0
    522                break;
   \   000000BC   0xE00D             B.N      ??ft5336_TS_GetTouchInfo_12
    523          
    524              case 8 :
    525                regAddressXHigh   = FT5336_P9_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_8: (+1)
   \   000000BE   0x2033             MOVS     R0,#+51
   \   000000C0   0x4681             MOV      R9,R0
    526                regAddressPWeight = FT5336_P9_WEIGHT_REG;
   \   000000C2   0x2037             MOVS     R0,#+55
   \   000000C4   0x4682             MOV      R10,R0
    527                regAddressPMisc   = FT5336_P9_MISC_REG;
   \   000000C6   0x2038             MOVS     R0,#+56
   \   000000C8   0x4683             MOV      R11,R0
    528                break;
   \   000000CA   0xE006             B.N      ??ft5336_TS_GetTouchInfo_12
    529          
    530              case 9 :
    531                regAddressXHigh   = FT5336_P10_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_10: (+1)
   \   000000CC   0x2039             MOVS     R0,#+57
   \   000000CE   0x4681             MOV      R9,R0
    532                regAddressPWeight = FT5336_P10_WEIGHT_REG;
   \   000000D0   0x203D             MOVS     R0,#+61
   \   000000D2   0x4682             MOV      R10,R0
    533                regAddressPMisc   = FT5336_P10_MISC_REG;
   \   000000D4   0x203E             MOVS     R0,#+62
   \   000000D6   0x4683             MOV      R11,R0
    534                break;
   \   000000D8   0xE7FF             B.N      ??ft5336_TS_GetTouchInfo_12
    535          
    536              default :
    537                break;
    538          
    539              } /* end switch(touchIdx) */
    540          
    541              /* Read Event Id of touch index */
    542              ucReadData = TS_IO_Read(DeviceAddr, regAddressXHigh);
   \                     ??ft5336_TS_GetTouchInfo_11: (+1)
   \                     ??ft5336_TS_GetTouchInfo_12: (+1)
   \   000000DA   0x4649             MOV      R1,R9
   \   000000DC   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   000000DE   0x0020             MOVS     R0,R4
   \   000000E0   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   000000E2   0x.... 0x....      BL       TS_IO_Read
   \   000000E6   0xF88D 0x0000      STRB     R0,[SP, #+0]
    543              * pEvent = (ucReadData & FT5336_TOUCH_EVT_FLAG_MASK) >> FT5336_TOUCH_EVT_FLAG_SHIFT;
   \   000000EA   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   000000EE   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   000000F0   0x0980             LSRS     R0,R0,#+6
   \   000000F2   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   000000F4   0xF8C8 0x0000      STR      R0,[R8, #+0]
    544          
    545              /* Read weight of touch index */
    546              ucReadData = TS_IO_Read(DeviceAddr, regAddressPWeight);
   \   000000F8   0x4651             MOV      R1,R10
   \   000000FA   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   000000FC   0x0020             MOVS     R0,R4
   \   000000FE   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000100   0x.... 0x....      BL       TS_IO_Read
   \   00000104   0xF88D 0x0000      STRB     R0,[SP, #+0]
    547              * pWeight = (ucReadData & FT5336_TOUCH_WEIGHT_MASK) >> FT5336_TOUCH_WEIGHT_SHIFT;
   \   00000108   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000010C   0x6030             STR      R0,[R6, #+0]
    548          
    549              /* Read area of touch index */
    550              ucReadData = TS_IO_Read(DeviceAddr, regAddressPMisc);
   \   0000010E   0x4659             MOV      R1,R11
   \   00000110   0xB2C9             UXTB     R1,R1            ;; ZeroExt  R1,R1,#+24,#+24
   \   00000112   0x0020             MOVS     R0,R4
   \   00000114   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000116   0x.... 0x....      BL       TS_IO_Read
   \   0000011A   0xF88D 0x0000      STRB     R0,[SP, #+0]
    551              * pArea = (ucReadData & FT5336_TOUCH_AREA_MASK) >> FT5336_TOUCH_AREA_SHIFT;
   \   0000011E   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000122   0x1100             ASRS     R0,R0,#+4
   \   00000124   0xF010 0x0004      ANDS     R0,R0,#0x4
   \   00000128   0x6038             STR      R0,[R7, #+0]
    552          
    553            } /* of if(touchIdx < ft5336_handle.currActiveTouchNb) */
    554          }
   \                     ??ft5336_TS_GetTouchInfo_0: (+1)
   \   0000012A   0xE8BD 0x8FF1      POP      {R0,R4-R11,PC}   ;; return
    555          
    556          #endif /* TS_MULTI_TOUCH_SUPPORTED == 1 */
    557          
    558          /** @defgroup ft5336_Static_Function_Body
    559            * @{
    560            */
    561          
    562          /* Static functions bodies-----------------------------------------------*/
    563          
    564          
    565          /**
    566            * @brief  Return the status of I2C was initialized or not.
    567            * @param  None.
    568            * @retval : I2C initialization status.
    569            */

   \                                 In section .text, align 2, keep-with-next
    570          static uint8_t ft5336_Get_I2C_InitializedStatus(void)
    571          {
    572            return(ft5336_handle.i2cInitialized);
   \                     ft5336_Get_I2C_InitializedStatus: (+1)
   \   00000000   0x....             LDR.N    R0,??DataTable4
   \   00000002   0x7800             LDRB     R0,[R0, #+0]
   \   00000004   0x4770             BX       LR               ;; return
    573          }
    574          
    575          /**
    576            * @brief  I2C initialize if needed.
    577            * @param  None.
    578            * @retval : None.
    579            */

   \                                 In section .text, align 2, keep-with-next
    580          static void ft5336_I2C_InitializeIfRequired(void)
    581          {
   \                     ft5336_I2C_InitializeIfRequired: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    582            if(ft5336_Get_I2C_InitializedStatus() == FT5336_I2C_NOT_INITIALIZED)
   \   00000002   0x.... 0x....      BL       ft5336_Get_I2C_InitializedStatus
   \   00000006   0x2800             CMP      R0,#+0
   \   00000008   0xD104             BNE.N    ??ft5336_I2C_InitializeIfRequired_0
    583            {
    584              /* Initialize TS IO BUS layer (I2C) */
    585              TS_IO_Init();
   \   0000000A   0x.... 0x....      BL       TS_IO_Init
    586          
    587              /* Set state to initialized */
    588              ft5336_handle.i2cInitialized = FT5336_I2C_INITIALIZED;
   \   0000000E   0x2001             MOVS     R0,#+1
   \   00000010   0x....             LDR.N    R1,??DataTable4
   \   00000012   0x7008             STRB     R0,[R1, #+0]
    589            }
    590          }
   \                     ??ft5336_I2C_InitializeIfRequired_0: (+1)
   \   00000014   0xBD01             POP      {R0,PC}          ;; return
    591          
    592          /**
    593            * @brief  Basic static configuration of TouchScreen
    594            * @param  DeviceAddr: FT5336 Device address for communication on I2C Bus.
    595            * @retval Status FT5336_STATUS_OK or FT5336_STATUS_NOT_OK.
    596            */

   \                                 In section .text, align 2, keep-with-next
    597          static uint32_t ft5336_TS_Configure(uint16_t DeviceAddr)
    598          {
   \                     ft5336_TS_Configure: (+1)
   \   00000000   0x0001             MOVS     R1,R0
    599            uint32_t status = FT5336_STATUS_OK;
   \   00000002   0x2000             MOVS     R0,#+0
    600          
    601            /* Nothing special to be done for FT5336 */
    602          
    603            return(status);
   \   00000004   0x4770             BX       LR               ;; return
    604          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   0x........         DC32     ft5336_handle

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4_1:
   \   00000000   0x........         DC32     ??coord
    605          
    606          /**
    607            * @}
    608            */
    609          
    610          /**
    611            * @}
    612            */
    613          
    614          /**
    615            * @}
    616            */
    617          
    618          /**
    619            * @}
    620            */
    621          
    622          /**
    623            * @}
    624            */
    625          /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   ft5336_Get_I2C_InitializedStatus
       8   ft5336_I2C_InitializeIfRequired
         8   -> TS_IO_Init
         8   -> ft5336_Get_I2C_InitializedStatus
       8   ft5336_Init
         8   -> TS_IO_Delay
         8   -> ft5336_I2C_InitializeIfRequired
      24   ft5336_ReadID
        24   -> TS_IO_Read
        24   -> ft5336_I2C_InitializeIfRequired
       0   ft5336_Reset
       0   ft5336_TS_ClearIT
       0   ft5336_TS_Configure
      16   ft5336_TS_DetectTouch
        16   -> TS_IO_Read
      16   ft5336_TS_DisableIT
        16   -> TS_IO_Write
      16   ft5336_TS_EnableIT
        16   -> TS_IO_Write
      16   ft5336_TS_GetGestureID
        16   -> TS_IO_Read
      40   ft5336_TS_GetTouchInfo
        40   -> TS_IO_Read
      40   ft5336_TS_GetXY
        40   -> TS_IO_Read
       0   ft5336_TS_ITStatus
       8   ft5336_TS_Start
         8   -> ft5336_TS_Configure
         8   -> ft5336_TS_DisableIT


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       4  ??DataTable4_1
       2  coord
       6  ft5336_Get_I2C_InitializedStatus
      22  ft5336_I2C_InitializeIfRequired
      16  ft5336_Init
      74  ft5336_ReadID
       2  ft5336_Reset
       2  ft5336_TS_ClearIT
       6  ft5336_TS_Configure
      72  ft5336_TS_DetectTouch
      26  ft5336_TS_DisableIT
      26  ft5336_TS_EnableIT
      34  ft5336_TS_GetGestureID
     302  ft5336_TS_GetTouchInfo
     410  ft5336_TS_GetXY
       6  ft5336_TS_ITStatus
      22  ft5336_TS_Start
       4  ft5336_handle
      40  ft5336_ts_drv

 
     6 bytes in section .bss
    40 bytes in section .data
 1 034 bytes in section .text
 
 1 034 bytes of CODE memory
    46 bytes of DATA memory

Errors: none
Warnings: none
