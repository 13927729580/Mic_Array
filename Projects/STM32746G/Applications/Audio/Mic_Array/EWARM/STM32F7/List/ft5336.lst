###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.2.10312/W32 for ARM       27/Feb/2016  00:32:26
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Drivers\BSP\Components\ft5336\ft5336.c
#    Command line =  
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Drivers\BSP\Components\ft5336\ft5336.c
#        -D USE_HAL_DRIVER -D STM32F746xx -D USE_STM32746G_DISCO -D
#        USE_IOEXPANDER -D USE_USB_FS -lC
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -lA
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -o
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj
#        --no_unroll --no_inline --no_tbaa --no_scheduling --debug
#        --endian=little --cpu=Cortex-M7 -e --fpu=VFPv5_sp --dlib_config
#        "D:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Full.h" -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\Inc\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\CMSIS\Device\ST\STM32F7xx\Include\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\STM32F7xx_HAL_Driver\Inc\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\STM32746G-Discovery\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\Components\Common\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Log\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Fonts\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\CPU\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Core\Inc\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Core\Inc\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Class\MSC\Inc\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\drivers\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_Audio\Addons\PDM\
#        -I
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Class\AUDIO\Inc\
#        -Om --use_c++_inline --require_prototypes -I "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 7.3\arm\CMSIS\Include\" -D
#        ARM_MATH_CM7
#    List file    =  
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List\ft5336.lst
#    Object file  =  
#        H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj\ft5336.o
#
###############################################################################

H:\PhanLeSon\ActivNoise\Microphone\F7\Mic_Array_Project\Mic_Array\Drivers\BSP\Components\ft5336\ft5336.c
      1          /**
      2            ******************************************************************************
      3            * @file    ft5336.c
      4            * @author  MCD Application Team
      5            * @version V1.0.0
      6            * @date    25-June-2015
      7            * @brief   This file provides a set of functions needed to manage the FT5336
      8            *          touch screen devices.
      9            ******************************************************************************
     10            * @attention
     11            *
     12            * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
     13            *
     14            * Redistribution and use in source and binary forms, with or without modification,
     15            * are permitted provided that the following conditions are met:
     16            *   1. Redistributions of source code must retain the above copyright notice,
     17            *      this list of conditions and the following disclaimer.
     18            *   2. Redistributions in binary form must reproduce the above copyright notice,
     19            *      this list of conditions and the following disclaimer in the documentation
     20            *      and/or other materials provided with the distribution.
     21            *   3. Neither the name of STMicroelectronics nor the names of its contributors
     22            *      may be used to endorse or promote products derived from this software
     23            *      without specific prior written permission.
     24            *
     25            * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     26            * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     27            * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     28            * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
     29            * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     30            * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     31            * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
     32            * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
     33            * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
     34            * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     35            *
     36            ******************************************************************************
     37            */
     38          
     39          /* Includes ------------------------------------------------------------------*/
     40          #include "ft5336.h"
     41          
     42          /** @addtogroup BSP
     43            * @{
     44            */
     45          
     46          /** @addtogroup Component
     47            * @{
     48            */
     49          
     50          /** @defgroup FT5336
     51            * @{
     52            */
     53          
     54          /* Private typedef -----------------------------------------------------------*/
     55          
     56          /** @defgroup FT5336_Private_Types_Definitions
     57            * @{
     58            */
     59          
     60          /* Private define ------------------------------------------------------------*/
     61          
     62          /** @defgroup FT5336_Private_Defines
     63            * @{
     64            */
     65          
     66          /* Private macro -------------------------------------------------------------*/
     67          
     68          /** @defgroup FT5336_Private_Macros
     69            * @{
     70            */
     71          
     72          /* Private variables ---------------------------------------------------------*/
     73          
     74          /** @defgroup FT5336_Private_Variables
     75            * @{
     76            */
     77          
     78          /* Touch screen driver structure initialization */

   \                                 In section .data, align 4
     79          TS_DrvTypeDef ft5336_ts_drv =
   \                     ft5336_ts_drv:
   \   00000000   0x........         DC32 ft5336_Init, ft5336_ReadID, ft5336_Reset, ft5336_TS_Start
   \              0x........   
   \              0x........   
   \              0x........   
   \   00000010   0x........         DC32 ft5336_TS_DetectTouch, ft5336_TS_GetXY, ft5336_TS_EnableIT
   \              0x........   
   \              0x........   
   \   0000001C   0x........         DC32 ft5336_TS_ClearIT, ft5336_TS_ITStatus, ft5336_TS_DisableIT
   \              0x........   
   \              0x........   
     80          {
     81            ft5336_Init,
     82            ft5336_ReadID,
     83            ft5336_Reset,
     84          
     85            ft5336_TS_Start,
     86            ft5336_TS_DetectTouch,
     87            ft5336_TS_GetXY,
     88          
     89            ft5336_TS_EnableIT,
     90            ft5336_TS_ClearIT,
     91            ft5336_TS_ITStatus,
     92            ft5336_TS_DisableIT
     93          
     94          };
     95          
     96          /* Global ft5336 handle */
     97          static ft5336_handle_TypeDef ft5336_handle = { FT5336_I2C_NOT_INITIALIZED, 0, 0};
     98          
     99          /**
    100            * @}
    101            */
    102          
    103          /** @defgroup ft5336_Private_Function_Prototypes
    104            * @{
    105            */
    106          
    107          /* Private functions prototypes-----------------------------------------------*/
    108          
    109          /**
    110            * @brief  Return the status of I2C was initialized or not.
    111            * @param  None.
    112            * @retval : I2C initialization status.
    113            */
    114          static uint8_t ft5336_Get_I2C_InitializedStatus(void);
    115          
    116          /**
    117            * @brief  I2C initialize if needed.
    118            * @param  None.
    119            * @retval : None.
    120            */
    121          static void ft5336_I2C_InitializeIfRequired(void);
    122          
    123          /**
    124            * @brief  Basic static configuration of TouchScreen
    125            * @param  DeviceAddr: FT5336 Device address for communication on I2C Bus.
    126            * @retval Status FT5336_STATUS_OK or FT5336_STATUS_NOT_OK.
    127            */
    128          static uint32_t ft5336_TS_Configure(uint16_t DeviceAddr);
    129          
    130          /** @defgroup ft5336_Private_Functions
    131            * @{
    132            */
    133          
    134          /** @defgroup ft5336_Public_Function_Body
    135            * @{
    136            */
    137          
    138          /* Public functions bodies-----------------------------------------------*/
    139          
    140          
    141          /**
    142            * @brief  Initialize the ft5336 communication bus
    143            *         from MCU to FT5336 : ie I2C channel initialization (if required).
    144            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    145            * @retval None
    146            */

   \                                 In section .text, align 2, keep-with-next
    147          void ft5336_Init(uint16_t DeviceAddr)
    148          {
   \                     ft5336_Init: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    149            /* Wait at least 200ms after power up before accessing registers
    150             * Trsi timing (Time of starting to report point after resetting) from FT5336GQQ datasheet */
    151            TS_IO_Delay(200);
   \   00000002   0x20C8             MOVS     R0,#+200
   \   00000004   0x.... 0x....      BL       TS_IO_Delay
    152          
    153            /* Initialize I2C link if needed */
    154            ft5336_I2C_InitializeIfRequired();
   \   00000008   0xE8BD 0x4001      POP      {R0,LR}
   \   0000000C   0x....             B.N      ft5336_I2C_InitializeIfRequired
    155          }
    156          
    157          /**
    158            * @brief  Software Reset the ft5336.
    159            *         @note : Not applicable to FT5336.
    160            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    161            * @retval None
    162            */

   \                                 In section .text, align 2, keep-with-next
    163          void ft5336_Reset(uint16_t DeviceAddr)
    164          {
    165            /* Do nothing */
    166            /* No software reset sequence available in FT5336 IC */
    167          }
   \                     ft5336_Reset: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    168          
    169          /**
    170            * @brief  Read the ft5336 device ID, pre initialize I2C in case of need to be
    171            *         able to read the FT5336 device ID, and verify this is a FT5336.
    172            * @param  DeviceAddr: I2C FT5336 Slave address.
    173            * @retval The Device ID (two bytes).
    174            */

   \                                 In section .text, align 2, keep-with-next
    175          uint16_t ft5336_ReadID(uint16_t DeviceAddr)
    176          {
   \                     ft5336_ReadID: (+1)
   \   00000000   0xB570             PUSH     {R4-R6,LR}
   \   00000002   0xB082             SUB      SP,SP,#+8
   \   00000004   0x4604             MOV      R4,R0
    177            volatile uint8_t ucReadId = 0;
   \   00000006   0x2000             MOVS     R0,#+0
   \   00000008   0xF88D 0x0000      STRB     R0,[SP, #+0]
    178            uint8_t nbReadAttempts = 0;
   \   0000000C   0x4605             MOV      R5,R0
    179            uint8_t bFoundDevice = 0; /* Device not found by default */
   \   0000000E   0x4606             MOV      R6,R0
    180          
    181            /* Initialize I2C link if needed */
    182            ft5336_I2C_InitializeIfRequired();
   \   00000010   0x.... 0x....      BL       ft5336_I2C_InitializeIfRequired
    183          
    184            /* At maximum 4 attempts to read ID : exit at first finding of the searched device ID */
    185            for(nbReadAttempts = 0; ((nbReadAttempts < 3) && !(bFoundDevice)); nbReadAttempts++)
   \   00000014   0xE00C             B.N      ??ft5336_ReadID_0
    186            {
    187              /* Read register FT5336_CHIP_ID_REG as DeviceID detection */
    188              ucReadId = TS_IO_Read(DeviceAddr, FT5336_CHIP_ID_REG);
   \                     ??ft5336_ReadID_1: (+1)
   \   00000016   0x21A8             MOVS     R1,#+168
   \   00000018   0x4620             MOV      R0,R4
   \   0000001A   0xB2C0             UXTB     R0,R0
   \   0000001C   0x.... 0x....      BL       TS_IO_Read
   \   00000020   0xF88D 0x0000      STRB     R0,[SP, #+0]
    189          
    190              /* Found the searched device ID ? */
    191              if(ucReadId == FT5336_ID_VALUE)
   \   00000024   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000028   0x2851             CMP      R0,#+81
   \   0000002A   0xD100             BNE.N    ??ft5336_ReadID_2
    192              {
    193                /* Set device as found */
    194                bFoundDevice = 1;
   \   0000002C   0x2601             MOVS     R6,#+1
    195              }
    196            }
   \                     ??ft5336_ReadID_2: (+1)
   \   0000002E   0x1C6D             ADDS     R5,R5,#+1
   \                     ??ft5336_ReadID_0: (+1)
   \   00000030   0xB2ED             UXTB     R5,R5
   \   00000032   0x2D03             CMP      R5,#+3
   \   00000034   0xDA01             BGE.N    ??ft5336_ReadID_3
   \   00000036   0x2E00             CMP      R6,#+0
   \   00000038   0xD0ED             BEQ.N    ??ft5336_ReadID_1
    197          
    198            /* Return the device ID value */
    199            return (ucReadId);
   \                     ??ft5336_ReadID_3: (+1)
   \   0000003A   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000003E   0xBD76             POP      {R1,R2,R4-R6,PC}  ;; return
    200          }
    201          
    202          /**
    203            * @brief  Configures the touch Screen IC device to start detecting touches
    204            * @param  DeviceAddr: Device address on communication Bus (I2C slave address).
    205            * @retval None.
    206            */

   \                                 In section .text, align 2, keep-with-next
    207          void ft5336_TS_Start(uint16_t DeviceAddr)
    208          {
   \                     ft5336_TS_Start: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x4604             MOV      R4,R0
    209            /* Minimum static configuration of FT5336 */
    210            FT5336_ASSERT(ft5336_TS_Configure(DeviceAddr));
   \   00000004   0x.... 0x....      BL       ft5336_TS_Configure
    211          
    212            /* By default set FT5336 IC in Polling mode : no INT generation on FT5336 for new touch available */
    213            /* Note TS_INT is active low                                                                      */
    214            ft5336_TS_DisableIT(DeviceAddr);
   \   00000008   0x4620             MOV      R0,R4
   \   0000000A   0xE8BD 0x4010      POP      {R4,LR}
   \   0000000E   0x....             B.N      ft5336_TS_DisableIT
    215          }
    216          
    217          /**
    218            * @brief  Return if there is touches detected or not.
    219            *         Try to detect new touches and forget the old ones (reset internal global
    220            *         variables).
    221            * @param  DeviceAddr: Device address on communication Bus.
    222            * @retval : Number of active touches detected (can be 0, 1 or 2).
    223            */

   \                                 In section .text, align 2, keep-with-next
    224          uint8_t ft5336_TS_DetectTouch(uint16_t DeviceAddr)
    225          {
   \                     ft5336_TS_DetectTouch: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    226            volatile uint8_t nbTouch = 0;
   \   00000002   0x2100             MOVS     R1,#+0
   \   00000004   0xF88D 0x1000      STRB     R1,[SP, #+0]
    227          
    228            /* Read register FT5336_TD_STAT_REG to check number of touches detection */
    229            nbTouch = TS_IO_Read(DeviceAddr, FT5336_TD_STAT_REG);
   \   00000008   0x2102             MOVS     R1,#+2
   \   0000000A   0xB2C0             UXTB     R0,R0
   \   0000000C   0x.... 0x....      BL       TS_IO_Read
   \   00000010   0xF88D 0x0000      STRB     R0,[SP, #+0]
    230            nbTouch &= FT5336_TD_STAT_MASK;
   \   00000014   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000018   0xF000 0x000F      AND      R0,R0,#0xF
   \   0000001C   0xF88D 0x0000      STRB     R0,[SP, #+0]
    231          
    232            if(nbTouch > FT5336_MAX_DETECTABLE_TOUCH)
   \   00000020   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000024   0x2806             CMP      R0,#+6
   \   00000026   0xDB02             BLT.N    ??ft5336_TS_DetectTouch_0
    233            {
    234              /* If invalid number of touch detected, set it to zero */
    235              nbTouch = 0;
   \   00000028   0x2000             MOVS     R0,#+0
   \   0000002A   0xF88D 0x0000      STRB     R0,[SP, #+0]
    236            }
    237          
    238            /* Update ft5336 driver internal global : current number of active touches */
    239            ft5336_handle.currActiveTouchNb = nbTouch;
   \                     ??ft5336_TS_DetectTouch_0: (+1)
   \   0000002E   0x....             LDR.N    R0,??DataTable4
   \   00000030   0xF89D 0x1000      LDRB     R1,[SP, #+0]
   \   00000034   0x7041             STRB     R1,[R0, #+1]
    240          
    241            /* Reset current active touch index on which to work on */
    242            ft5336_handle.currActiveTouchIdx = 0;
   \   00000036   0x2100             MOVS     R1,#+0
   \   00000038   0x7081             STRB     R1,[R0, #+2]
    243          
    244            return(nbTouch);
   \   0000003A   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000003E   0xBD02             POP      {R1,PC}          ;; return
    245          }
    246          
    247          /**
    248            * @brief  Get the touch screen X and Y positions values
    249            *         Manage multi touch thanks to touch Index global
    250            *         variable 'ft5336_handle.currActiveTouchIdx'.
    251            * @param  DeviceAddr: Device address on communication Bus.
    252            * @param  X: Pointer to X position value
    253            * @param  Y: Pointer to Y position value
    254            * @retval None.
    255            */

   \                                 In section .text, align 4, keep-with-next
    256          void ft5336_TS_GetXY(uint16_t DeviceAddr, uint16_t *X, uint16_t *Y)
    257          {
   \                     ft5336_TS_GetXY: (+1)
   \   00000000   0xE92D 0x47F0      PUSH     {R4-R10,LR}
   \   00000004   0xB082             SUB      SP,SP,#+8
   \   00000006   0x4604             MOV      R4,R0
   \   00000008   0x460D             MOV      R5,R1
   \   0000000A   0x4616             MOV      R6,R2
    258            volatile uint8_t ucReadData = 0;
   \   0000000C   0x2000             MOVS     R0,#+0
   \   0000000E   0xF88D 0x0000      STRB     R0,[SP, #+0]
    259            static uint16_t coord;
    260            uint8_t regAddressXLow = 0;
   \   00000012   0x4601             MOV      R1,R0
    261            uint8_t regAddressXHigh = 0;
   \   00000014   0x4607             MOV      R7,R0
    262            uint8_t regAddressYLow = 0;
   \   00000016   0x4680             MOV      R8,R0
    263            uint8_t regAddressYHigh = 0;
   \   00000018   0x4681             MOV      R9,R0
    264          
    265            if(ft5336_handle.currActiveTouchIdx < ft5336_handle.currActiveTouchNb)
   \   0000001A   0x.... 0x....      LDR.W    R10,??DataTable4
   \   0000001E   0xF89A 0x0002      LDRB     R0,[R10, #+2]
   \   00000022   0xF89A 0x2001      LDRB     R2,[R10, #+1]
   \   00000026   0x4290             CMP      R0,R2
   \   00000028   0xF080 0x808C      BCS.W    ??ft5336_TS_GetXY_1
    266            {
    267              switch(ft5336_handle.currActiveTouchIdx)
   \   0000002C   0x2809             CMP      R0,#+9
   \   0000002E   0xD84B             BHI.N    ??ft5336_TS_GetXY_2
   \   00000030   0xE8DF 0xF000      TBB      [PC, R0]
   \                     ??ft5336_TS_GetXY_0:
   \   00000034   0x05 0x0C          DC8      0x5,0xC,0x13,0x1A
   \              0x13 0x1A    
   \   00000038   0x21 0x28          DC8      0x21,0x28,0x2F,0x36
   \              0x2F 0x36    
   \   0000003C   0x3D 0x44          DC8      0x3D,0x44
    268              {
    269              case 0 :
    270                regAddressXLow  = FT5336_P1_XL_REG;
   \                     ??ft5336_TS_GetXY_3: (+1)
   \   0000003E   0x2104             MOVS     R1,#+4
    271                regAddressXHigh = FT5336_P1_XH_REG;
   \   00000040   0x2703             MOVS     R7,#+3
    272                regAddressYLow  = FT5336_P1_YL_REG;
   \   00000042   0xF04F 0x0806      MOV      R8,#+6
    273                regAddressYHigh = FT5336_P1_YH_REG;
   \   00000046   0xF04F 0x0905      MOV      R9,#+5
    274                break;
   \   0000004A   0xE03D             B.N      ??ft5336_TS_GetXY_2
    275          
    276              case 1 :
    277                regAddressXLow  = FT5336_P2_XL_REG;
   \                     ??ft5336_TS_GetXY_4: (+1)
   \   0000004C   0x210A             MOVS     R1,#+10
    278                regAddressXHigh = FT5336_P2_XH_REG;
   \   0000004E   0x2709             MOVS     R7,#+9
    279                regAddressYLow  = FT5336_P2_YL_REG;
   \   00000050   0xF04F 0x080C      MOV      R8,#+12
    280                regAddressYHigh = FT5336_P2_YH_REG;
   \   00000054   0xF04F 0x090B      MOV      R9,#+11
    281                break;
   \   00000058   0xE036             B.N      ??ft5336_TS_GetXY_2
    282          
    283              case 2 :
    284                regAddressXLow  = FT5336_P3_XL_REG;
   \                     ??ft5336_TS_GetXY_5: (+1)
   \   0000005A   0x2110             MOVS     R1,#+16
    285                regAddressXHigh = FT5336_P3_XH_REG;
   \   0000005C   0x270F             MOVS     R7,#+15
    286                regAddressYLow  = FT5336_P3_YL_REG;
   \   0000005E   0xF04F 0x0812      MOV      R8,#+18
    287                regAddressYHigh = FT5336_P3_YH_REG;
   \   00000062   0xF04F 0x0911      MOV      R9,#+17
    288                break;
   \   00000066   0xE02F             B.N      ??ft5336_TS_GetXY_2
    289          
    290              case 3 :
    291                regAddressXLow  = FT5336_P4_XL_REG;
   \                     ??ft5336_TS_GetXY_6: (+1)
   \   00000068   0x2116             MOVS     R1,#+22
    292                regAddressXHigh = FT5336_P4_XH_REG;
   \   0000006A   0x2715             MOVS     R7,#+21
    293                regAddressYLow  = FT5336_P4_YL_REG;
   \   0000006C   0xF04F 0x0818      MOV      R8,#+24
    294                regAddressYHigh = FT5336_P4_YH_REG;
   \   00000070   0xF04F 0x0917      MOV      R9,#+23
    295                break;
   \   00000074   0xE028             B.N      ??ft5336_TS_GetXY_2
    296          
    297              case 4 :
    298                regAddressXLow  = FT5336_P5_XL_REG;
   \                     ??ft5336_TS_GetXY_7: (+1)
   \   00000076   0x211C             MOVS     R1,#+28
    299                regAddressXHigh = FT5336_P5_XH_REG;
   \   00000078   0x271B             MOVS     R7,#+27
    300                regAddressYLow  = FT5336_P5_YL_REG;
   \   0000007A   0xF04F 0x081E      MOV      R8,#+30
    301                regAddressYHigh = FT5336_P5_YH_REG;
   \   0000007E   0xF04F 0x091D      MOV      R9,#+29
    302                break;
   \   00000082   0xE021             B.N      ??ft5336_TS_GetXY_2
    303          
    304              case 5 :
    305                regAddressXLow  = FT5336_P6_XL_REG;
   \                     ??ft5336_TS_GetXY_8: (+1)
   \   00000084   0x2122             MOVS     R1,#+34
    306                regAddressXHigh = FT5336_P6_XH_REG;
   \   00000086   0x2721             MOVS     R7,#+33
    307                regAddressYLow  = FT5336_P6_YL_REG;
   \   00000088   0xF04F 0x0824      MOV      R8,#+36
    308                regAddressYHigh = FT5336_P6_YH_REG;
   \   0000008C   0xF04F 0x0923      MOV      R9,#+35
    309                break;
   \   00000090   0xE01A             B.N      ??ft5336_TS_GetXY_2
    310          
    311              case 6 :
    312                regAddressXLow  = FT5336_P7_XL_REG;
   \                     ??ft5336_TS_GetXY_9: (+1)
   \   00000092   0x2128             MOVS     R1,#+40
    313                regAddressXHigh = FT5336_P7_XH_REG;
   \   00000094   0x2727             MOVS     R7,#+39
    314                regAddressYLow  = FT5336_P7_YL_REG;
   \   00000096   0xF04F 0x082A      MOV      R8,#+42
    315                regAddressYHigh = FT5336_P7_YH_REG;
   \   0000009A   0xF04F 0x0929      MOV      R9,#+41
    316                break;
   \   0000009E   0xE013             B.N      ??ft5336_TS_GetXY_2
    317          
    318              case 7 :
    319                regAddressXLow  = FT5336_P8_XL_REG;
   \                     ??ft5336_TS_GetXY_10: (+1)
   \   000000A0   0x212E             MOVS     R1,#+46
    320                regAddressXHigh = FT5336_P8_XH_REG;
   \   000000A2   0x272D             MOVS     R7,#+45
    321                regAddressYLow  = FT5336_P8_YL_REG;
   \   000000A4   0xF04F 0x0830      MOV      R8,#+48
    322                regAddressYHigh = FT5336_P8_YH_REG;
   \   000000A8   0xF04F 0x092F      MOV      R9,#+47
    323                break;
   \   000000AC   0xE00C             B.N      ??ft5336_TS_GetXY_2
    324          
    325              case 8 :
    326                regAddressXLow  = FT5336_P9_XL_REG;
   \                     ??ft5336_TS_GetXY_11: (+1)
   \   000000AE   0x2134             MOVS     R1,#+52
    327                regAddressXHigh = FT5336_P9_XH_REG;
   \   000000B0   0x2733             MOVS     R7,#+51
    328                regAddressYLow  = FT5336_P9_YL_REG;
   \   000000B2   0xF04F 0x0836      MOV      R8,#+54
    329                regAddressYHigh = FT5336_P9_YH_REG;
   \   000000B6   0xF04F 0x0935      MOV      R9,#+53
    330                break;
   \   000000BA   0xE005             B.N      ??ft5336_TS_GetXY_2
    331          
    332              case 9 :
    333                regAddressXLow  = FT5336_P10_XL_REG;
   \                     ??ft5336_TS_GetXY_12: (+1)
   \   000000BC   0x213A             MOVS     R1,#+58
    334                regAddressXHigh = FT5336_P10_XH_REG;
   \   000000BE   0x2739             MOVS     R7,#+57
    335                regAddressYLow  = FT5336_P10_YL_REG;
   \   000000C0   0xF04F 0x083C      MOV      R8,#+60
    336                regAddressYHigh = FT5336_P10_YH_REG;
   \   000000C4   0xF04F 0x093B      MOV      R9,#+59
    337                break;
    338          
    339              default :
    340                break;
    341          
    342              } /* end switch(ft5336_handle.currActiveTouchIdx) */
    343          
    344              /* Read low part of X position */
    345              ucReadData = TS_IO_Read(DeviceAddr, regAddressXLow);
   \                     ??ft5336_TS_GetXY_2: (+1)
   \   000000C8   0x4620             MOV      R0,R4
   \   000000CA   0xB2C0             UXTB     R0,R0
   \   000000CC   0x.... 0x....      BL       TS_IO_Read
   \   000000D0   0xF88D 0x0000      STRB     R0,[SP, #+0]
    346              coord = (ucReadData & FT5336_TOUCH_POS_LSB_MASK) >> FT5336_TOUCH_POS_LSB_SHIFT;
   \   000000D4   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   000000D8   0xF8AA 0x0004      STRH     R0,[R10, #+4]
    347          
    348              /* Read high part of X position */
    349              ucReadData = TS_IO_Read(DeviceAddr, regAddressXHigh);
   \   000000DC   0x4639             MOV      R1,R7
   \   000000DE   0x4620             MOV      R0,R4
   \   000000E0   0xB2C0             UXTB     R0,R0
   \   000000E2   0x.... 0x....      BL       TS_IO_Read
   \   000000E6   0xF88D 0x0000      STRB     R0,[SP, #+0]
    350              coord |= ((ucReadData & FT5336_TOUCH_POS_MSB_MASK) >> FT5336_TOUCH_POS_MSB_SHIFT) << 8;
   \   000000EA   0xF8BA 0x0004      LDRH     R0,[R10, #+4]
   \   000000EE   0xF89D 0x1000      LDRB     R1,[SP, #+0]
   \   000000F2   0xF001 0x010F      AND      R1,R1,#0xF
   \   000000F6   0xEA40 0x2001      ORR      R0,R0,R1, LSL #+8
   \   000000FA   0xF8AA 0x0004      STRH     R0,[R10, #+4]
    351          
    352              /* Send back ready X position to caller */
    353              *X = coord;
   \   000000FE   0x8028             STRH     R0,[R5, #+0]
    354          
    355              /* Read low part of Y position */
    356              ucReadData = TS_IO_Read(DeviceAddr, regAddressYLow);
   \   00000100   0x4641             MOV      R1,R8
   \   00000102   0x4620             MOV      R0,R4
   \   00000104   0xB2C0             UXTB     R0,R0
   \   00000106   0x.... 0x....      BL       TS_IO_Read
   \   0000010A   0xF88D 0x0000      STRB     R0,[SP, #+0]
    357              coord = (ucReadData & FT5336_TOUCH_POS_LSB_MASK) >> FT5336_TOUCH_POS_LSB_SHIFT;
   \   0000010E   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   00000112   0xF8AA 0x0004      STRH     R0,[R10, #+4]
    358          
    359              /* Read high part of Y position */
    360              ucReadData = TS_IO_Read(DeviceAddr, regAddressYHigh);
   \   00000116   0x4649             MOV      R1,R9
   \   00000118   0x4620             MOV      R0,R4
   \   0000011A   0xB2C0             UXTB     R0,R0
   \   0000011C   0x.... 0x....      BL       TS_IO_Read
   \   00000120   0xF88D 0x0000      STRB     R0,[SP, #+0]
    361              coord |= ((ucReadData & FT5336_TOUCH_POS_MSB_MASK) >> FT5336_TOUCH_POS_MSB_SHIFT) << 8;
   \   00000124   0xF8BA 0x0004      LDRH     R0,[R10, #+4]
   \   00000128   0xF89D 0x1000      LDRB     R1,[SP, #+0]
   \   0000012C   0xF001 0x010F      AND      R1,R1,#0xF
   \   00000130   0xEA40 0x2001      ORR      R0,R0,R1, LSL #+8
   \   00000134   0xF8AA 0x0004      STRH     R0,[R10, #+4]
    362          
    363              /* Send back ready Y position to caller */
    364              *Y = coord;
   \   00000138   0x8030             STRH     R0,[R6, #+0]
    365          
    366              ft5336_handle.currActiveTouchIdx++; /* next call will work on next touch */
   \   0000013A   0xF89A 0x0002      LDRB     R0,[R10, #+2]
   \   0000013E   0x1C40             ADDS     R0,R0,#+1
   \   00000140   0xF88A 0x0002      STRB     R0,[R10, #+2]
    367          
    368            } /* of if(ft5336_handle.currActiveTouchIdx < ft5336_handle.currActiveTouchNb) */
    369          }
   \                     ??ft5336_TS_GetXY_1: (+1)
   \   00000144   0xE8BD 0x87F3      POP      {R0,R1,R4-R10,PC}  ;; return

   \                                 In section .bss, align 4
   \                     ft5336_handle:
   \   00000000                      DS8 4
   \   00000004                      DS8 2
    370          
    371          /**
    372            * @brief  Configure the FT5336 device to generate IT on given INT pin
    373            *         connected to MCU as EXTI.
    374            * @param  DeviceAddr: Device address on communication Bus (Slave I2C address of FT5336).
    375            * @retval None
    376            */

   \                                 In section .text, align 2, keep-with-next
    377          void ft5336_TS_EnableIT(uint16_t DeviceAddr)
    378          {
    379             uint8_t regValue = 0;
    380             regValue = (FT5336_G_MODE_INTERRUPT_TRIGGER & (FT5336_G_MODE_INTERRUPT_MASK >> FT5336_G_MODE_INTERRUPT_SHIFT)) << FT5336_G_MODE_INTERRUPT_SHIFT;
    381          
    382             /* Set interrupt trigger mode in FT5336_GMODE_REG */
    383             TS_IO_Write(DeviceAddr, FT5336_GMODE_REG, regValue);
   \                     ft5336_TS_EnableIT: (+1)
   \   00000000   0x2201             MOVS     R2,#+1
   \   00000002   0x21A4             MOVS     R1,#+164
   \   00000004   0xB2C0             UXTB     R0,R0
   \   00000006   0x.... 0x....      B.W      TS_IO_Write
    384          }
    385          
    386          /**
    387            * @brief  Configure the FT5336 device to stop generating IT on the given INT pin
    388            *         connected to MCU as EXTI.
    389            * @param  DeviceAddr: Device address on communication Bus (Slave I2C address of FT5336).
    390            * @retval None
    391            */

   \                                 In section .text, align 2, keep-with-next
    392          void ft5336_TS_DisableIT(uint16_t DeviceAddr)
    393          {
    394            uint8_t regValue = 0;
    395            regValue = (FT5336_G_MODE_INTERRUPT_POLLING & (FT5336_G_MODE_INTERRUPT_MASK >> FT5336_G_MODE_INTERRUPT_SHIFT)) << FT5336_G_MODE_INTERRUPT_SHIFT;
    396          
    397            /* Set interrupt polling mode in FT5336_GMODE_REG */
    398            TS_IO_Write(DeviceAddr, FT5336_GMODE_REG, regValue);
   \                     ft5336_TS_DisableIT: (+1)
   \   00000000   0x2200             MOVS     R2,#+0
   \   00000002   0x21A4             MOVS     R1,#+164
   \   00000004   0xB2C0             UXTB     R0,R0
   \   00000006   0x.... 0x....      B.W      TS_IO_Write
    399          }
    400          
    401          /**
    402            * @brief  Get IT status from FT5336 interrupt status registers
    403            *         Should be called Following an EXTI coming to the MCU to know the detailed
    404            *         reason of the interrupt.
    405            *         @note : This feature is not applicable to FT5336.
    406            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    407            * @retval TS interrupts status : always return 0 here
    408            */

   \                                 In section .text, align 2, keep-with-next
    409          uint8_t ft5336_TS_ITStatus(uint16_t DeviceAddr)
    410          {
    411            /* Always return 0 as feature not applicable to FT5336 */
    412            return 0;
   \                     ft5336_TS_ITStatus: (+1)
   \   00000000   0x2000             MOVS     R0,#+0
   \   00000002   0x4770             BX       LR               ;; return
    413          }
    414          
    415          /**
    416            * @brief  Clear IT status in FT5336 interrupt status clear registers
    417            *         Should be called Following an EXTI coming to the MCU.
    418            *         @note : This feature is not applicable to FT5336.
    419            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    420            * @retval None
    421            */

   \                                 In section .text, align 2, keep-with-next
    422          void ft5336_TS_ClearIT(uint16_t DeviceAddr)
    423          {
    424            /* Nothing to be done here for FT5336 */
    425          }
   \                     ft5336_TS_ClearIT: (+1)
   \   00000000   0x4770             BX       LR               ;; return
    426          
    427          /**** NEW FEATURES enabled when Multi-touch support is enabled ****/
    428          
    429          #if (TS_MULTI_TOUCH_SUPPORTED == 1)
    430          
    431          /**
    432            * @brief  Get the last touch gesture identification (zoom, move up/down...).
    433            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    434            * @param  pGestureId : Pointer to get last touch gesture Identification.
    435            * @retval None.
    436            */

   \                                 In section .text, align 2, keep-with-next
    437          void ft5336_TS_GetGestureID(uint16_t DeviceAddr, uint32_t * pGestureId)
    438          {
   \                     ft5336_TS_GetGestureID: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0xB082             SUB      SP,SP,#+8
   \   00000004   0x460C             MOV      R4,R1
    439            volatile uint8_t ucReadData = 0;
   \   00000006   0x2100             MOVS     R1,#+0
   \   00000008   0xF88D 0x1000      STRB     R1,[SP, #+0]
    440          
    441            ucReadData = TS_IO_Read(DeviceAddr, FT5336_GEST_ID_REG);
   \   0000000C   0x2101             MOVS     R1,#+1
   \   0000000E   0xB2C0             UXTB     R0,R0
   \   00000010   0x.... 0x....      BL       TS_IO_Read
   \   00000014   0xF88D 0x0000      STRB     R0,[SP, #+0]
    442          
    443            * pGestureId = ucReadData;
   \   00000018   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   0000001C   0x6020             STR      R0,[R4, #+0]
    444          }
   \   0000001E   0xBD13             POP      {R0,R1,R4,PC}    ;; return
    445          
    446          /**
    447            * @brief  Get the touch detailed informations on touch number 'touchIdx' (0..1)
    448            *         This touch detailed information contains :
    449            *         - weight that was applied to this touch
    450            *         - sub-area of the touch in the touch panel
    451            *         - event of linked to the touch (press down, lift up, ...)
    452            * @param  DeviceAddr: Device address on communication Bus (I2C slave address of FT5336).
    453            * @param  touchIdx : Passed index of the touch (0..1) on which we want to get the
    454            *                    detailed information.
    455            * @param  pWeight : Pointer to to get the weight information of 'touchIdx'.
    456            * @param  pArea   : Pointer to to get the sub-area information of 'touchIdx'.
    457            * @param  pEvent  : Pointer to to get the event information of 'touchIdx'.
    458          
    459            * @retval None.
    460            */

   \                                 In section .text, align 4, keep-with-next
    461          void ft5336_TS_GetTouchInfo(uint16_t   DeviceAddr,
    462                                      uint32_t   touchIdx,
    463                                      uint32_t * pWeight,
    464                                      uint32_t * pArea,
    465                                      uint32_t * pEvent)
    466          {
   \                     ft5336_TS_GetTouchInfo: (+1)
   \   00000000   0xE92D 0x41F0      PUSH     {R4-R8,LR}
   \   00000004   0xB082             SUB      SP,SP,#+8
   \   00000006   0x4605             MOV      R5,R0
   \   00000008   0x4616             MOV      R6,R2
   \   0000000A   0x461C             MOV      R4,R3
    467            volatile uint8_t ucReadData = 0;
   \   0000000C   0x2000             MOVS     R0,#+0
   \   0000000E   0xF88D 0x0000      STRB     R0,[SP, #+0]
    468            uint8_t regAddressXHigh = 0;
    469            uint8_t regAddressPWeight = 0;
   \   00000012   0x4680             MOV      R8,R0
    470            uint8_t regAddressPMisc = 0;
   \   00000014   0x4607             MOV      R7,R0
    471          
    472            if(touchIdx < ft5336_handle.currActiveTouchNb)
   \   00000016   0x....             LDR.N    R2,??DataTable4
   \   00000018   0x7852             LDRB     R2,[R2, #+1]
   \   0000001A   0x4291             CMP      R1,R2
   \   0000001C   0xD25C             BCS.N    ??ft5336_TS_GetTouchInfo_1
    473            {
    474              switch(touchIdx)
   \   0000001E   0x2909             CMP      R1,#+9
   \   00000020   0xD837             BHI.N    ??ft5336_TS_GetTouchInfo_2
   \   00000022   0xE8DF 0xF001      TBB      [PC, R1]
   \                     ??ft5336_TS_GetTouchInfo_0:
   \   00000026   0x05 0x0A          DC8      0x5,0xA,0xF,0x14
   \              0x0F 0x14    
   \   0000002A   0x19 0x1E          DC8      0x19,0x1E,0x23,0x28
   \              0x23 0x28    
   \   0000002E   0x2D 0x32          DC8      0x2D,0x32
    475              {
    476              case 0 :
    477                regAddressXHigh   = FT5336_P1_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_3: (+1)
   \   00000030   0x2003             MOVS     R0,#+3
    478                regAddressPWeight = FT5336_P1_WEIGHT_REG;
   \   00000032   0xF04F 0x0807      MOV      R8,#+7
    479                regAddressPMisc   = FT5336_P1_MISC_REG;
   \   00000036   0x2708             MOVS     R7,#+8
    480                break;
   \   00000038   0xE02B             B.N      ??ft5336_TS_GetTouchInfo_2
    481          
    482              case 1 :
    483                regAddressXHigh   = FT5336_P2_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_4: (+1)
   \   0000003A   0x2009             MOVS     R0,#+9
    484                regAddressPWeight = FT5336_P2_WEIGHT_REG;
   \   0000003C   0xF04F 0x080D      MOV      R8,#+13
    485                regAddressPMisc   = FT5336_P2_MISC_REG;
   \   00000040   0x270E             MOVS     R7,#+14
    486                break;
   \   00000042   0xE026             B.N      ??ft5336_TS_GetTouchInfo_2
    487          
    488              case 2 :
    489                regAddressXHigh   = FT5336_P3_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_5: (+1)
   \   00000044   0x200F             MOVS     R0,#+15
    490                regAddressPWeight = FT5336_P3_WEIGHT_REG;
   \   00000046   0xF04F 0x0813      MOV      R8,#+19
    491                regAddressPMisc   = FT5336_P3_MISC_REG;
   \   0000004A   0x2714             MOVS     R7,#+20
    492                break;
   \   0000004C   0xE021             B.N      ??ft5336_TS_GetTouchInfo_2
    493          
    494              case 3 :
    495                regAddressXHigh   = FT5336_P4_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_6: (+1)
   \   0000004E   0x2015             MOVS     R0,#+21
    496                regAddressPWeight = FT5336_P4_WEIGHT_REG;
   \   00000050   0xF04F 0x0819      MOV      R8,#+25
    497                regAddressPMisc   = FT5336_P4_MISC_REG;
   \   00000054   0x271A             MOVS     R7,#+26
    498                break;
   \   00000056   0xE01C             B.N      ??ft5336_TS_GetTouchInfo_2
    499          
    500              case 4 :
    501                regAddressXHigh   = FT5336_P5_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_7: (+1)
   \   00000058   0x201B             MOVS     R0,#+27
    502                regAddressPWeight = FT5336_P5_WEIGHT_REG;
   \   0000005A   0xF04F 0x081F      MOV      R8,#+31
    503                regAddressPMisc   = FT5336_P5_MISC_REG;
   \   0000005E   0x2720             MOVS     R7,#+32
    504                break;
   \   00000060   0xE017             B.N      ??ft5336_TS_GetTouchInfo_2
    505          
    506              case 5 :
    507                regAddressXHigh   = FT5336_P6_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_8: (+1)
   \   00000062   0x2021             MOVS     R0,#+33
    508                regAddressPWeight = FT5336_P6_WEIGHT_REG;
   \   00000064   0xF04F 0x0825      MOV      R8,#+37
    509                regAddressPMisc   = FT5336_P6_MISC_REG;
   \   00000068   0x2726             MOVS     R7,#+38
    510                break;
   \   0000006A   0xE012             B.N      ??ft5336_TS_GetTouchInfo_2
    511          
    512              case 6 :
    513                regAddressXHigh   = FT5336_P7_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_9: (+1)
   \   0000006C   0x2027             MOVS     R0,#+39
    514                regAddressPWeight = FT5336_P7_WEIGHT_REG;
   \   0000006E   0xF04F 0x082B      MOV      R8,#+43
    515                regAddressPMisc   = FT5336_P7_MISC_REG;
   \   00000072   0x272C             MOVS     R7,#+44
    516                break;
   \   00000074   0xE00D             B.N      ??ft5336_TS_GetTouchInfo_2
    517          
    518              case 7 :
    519                regAddressXHigh   = FT5336_P8_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_10: (+1)
   \   00000076   0x202D             MOVS     R0,#+45
    520                regAddressPWeight = FT5336_P8_WEIGHT_REG;
   \   00000078   0xF04F 0x0831      MOV      R8,#+49
    521                regAddressPMisc   = FT5336_P8_MISC_REG;
   \   0000007C   0x2732             MOVS     R7,#+50
    522                break;
   \   0000007E   0xE008             B.N      ??ft5336_TS_GetTouchInfo_2
    523          
    524              case 8 :
    525                regAddressXHigh   = FT5336_P9_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_11: (+1)
   \   00000080   0x2033             MOVS     R0,#+51
    526                regAddressPWeight = FT5336_P9_WEIGHT_REG;
   \   00000082   0xF04F 0x0837      MOV      R8,#+55
    527                regAddressPMisc   = FT5336_P9_MISC_REG;
   \   00000086   0x2738             MOVS     R7,#+56
    528                break;
   \   00000088   0xE003             B.N      ??ft5336_TS_GetTouchInfo_2
    529          
    530              case 9 :
    531                regAddressXHigh   = FT5336_P10_XH_REG;
   \                     ??ft5336_TS_GetTouchInfo_12: (+1)
   \   0000008A   0x2039             MOVS     R0,#+57
    532                regAddressPWeight = FT5336_P10_WEIGHT_REG;
   \   0000008C   0xF04F 0x083D      MOV      R8,#+61
    533                regAddressPMisc   = FT5336_P10_MISC_REG;
   \   00000090   0x273E             MOVS     R7,#+62
    534                break;
    535          
    536              default :
    537                break;
    538          
    539              } /* end switch(touchIdx) */
    540          
    541              /* Read Event Id of touch index */
    542              ucReadData = TS_IO_Read(DeviceAddr, regAddressXHigh);
   \                     ??ft5336_TS_GetTouchInfo_2: (+1)
   \   00000092   0x4601             MOV      R1,R0
   \   00000094   0x4628             MOV      R0,R5
   \   00000096   0xB2C0             UXTB     R0,R0
   \   00000098   0x.... 0x....      BL       TS_IO_Read
   \   0000009C   0xF88D 0x0000      STRB     R0,[SP, #+0]
    543              * pEvent = (ucReadData & FT5336_TOUCH_EVT_FLAG_MASK) >> FT5336_TOUCH_EVT_FLAG_SHIFT;
   \   000000A0   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   000000A4   0x0980             LSRS     R0,R0,#+6
   \   000000A6   0x9908             LDR      R1,[SP, #+32]
   \   000000A8   0x6008             STR      R0,[R1, #+0]
    544          
    545              /* Read weight of touch index */
    546              ucReadData = TS_IO_Read(DeviceAddr, regAddressPWeight);
   \   000000AA   0x4641             MOV      R1,R8
   \   000000AC   0x4628             MOV      R0,R5
   \   000000AE   0xB2C0             UXTB     R0,R0
   \   000000B0   0x.... 0x....      BL       TS_IO_Read
   \   000000B4   0xF88D 0x0000      STRB     R0,[SP, #+0]
    547              * pWeight = (ucReadData & FT5336_TOUCH_WEIGHT_MASK) >> FT5336_TOUCH_WEIGHT_SHIFT;
   \   000000B8   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   000000BC   0x6030             STR      R0,[R6, #+0]
    548          
    549              /* Read area of touch index */
    550              ucReadData = TS_IO_Read(DeviceAddr, regAddressPMisc);
   \   000000BE   0x4639             MOV      R1,R7
   \   000000C0   0x4628             MOV      R0,R5
   \   000000C2   0xB2C0             UXTB     R0,R0
   \   000000C4   0x.... 0x....      BL       TS_IO_Read
   \   000000C8   0xF88D 0x0000      STRB     R0,[SP, #+0]
    551              * pArea = (ucReadData & FT5336_TOUCH_AREA_MASK) >> FT5336_TOUCH_AREA_SHIFT;
   \   000000CC   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \   000000D0   0x1100             ASRS     R0,R0,#+4
   \   000000D2   0xF000 0x0004      AND      R0,R0,#0x4
   \   000000D6   0x6020             STR      R0,[R4, #+0]
    552          
    553            } /* of if(touchIdx < ft5336_handle.currActiveTouchNb) */
    554          }
   \                     ??ft5336_TS_GetTouchInfo_1: (+1)
   \   000000D8   0xE8BD 0x81F3      POP      {R0,R1,R4-R8,PC}  ;; return
    555          
    556          #endif /* TS_MULTI_TOUCH_SUPPORTED == 1 */
    557          
    558          /** @defgroup ft5336_Static_Function_Body
    559            * @{
    560            */
    561          
    562          /* Static functions bodies-----------------------------------------------*/
    563          
    564          
    565          /**
    566            * @brief  Return the status of I2C was initialized or not.
    567            * @param  None.
    568            * @retval : I2C initialization status.
    569            */

   \                                 In section .text, align 2, keep-with-next
    570          static uint8_t ft5336_Get_I2C_InitializedStatus(void)
    571          {
    572            return(ft5336_handle.i2cInitialized);
   \                     ft5336_Get_I2C_InitializedStatus: (+1)
   \   00000000   0x....             LDR.N    R0,??DataTable4
   \   00000002   0x7800             LDRB     R0,[R0, #+0]
   \   00000004   0x4770             BX       LR               ;; return
    573          }
    574          
    575          /**
    576            * @brief  I2C initialize if needed.
    577            * @param  None.
    578            * @retval : None.
    579            */

   \                                 In section .text, align 2, keep-with-next
    580          static void ft5336_I2C_InitializeIfRequired(void)
    581          {
   \                     ft5336_I2C_InitializeIfRequired: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    582            if(ft5336_Get_I2C_InitializedStatus() == FT5336_I2C_NOT_INITIALIZED)
   \   00000002   0x.... 0x....      BL       ft5336_Get_I2C_InitializedStatus
   \   00000006   0x2800             CMP      R0,#+0
   \   00000008   0xD104             BNE.N    ??ft5336_I2C_InitializeIfRequired_0
    583            {
    584              /* Initialize TS IO BUS layer (I2C) */
    585              TS_IO_Init();
   \   0000000A   0x.... 0x....      BL       TS_IO_Init
    586          
    587              /* Set state to initialized */
    588              ft5336_handle.i2cInitialized = FT5336_I2C_INITIALIZED;
   \   0000000E   0x2001             MOVS     R0,#+1
   \   00000010   0x....             LDR.N    R1,??DataTable4
   \   00000012   0x7008             STRB     R0,[R1, #+0]
    589            }
    590          }
   \                     ??ft5336_I2C_InitializeIfRequired_0: (+1)
   \   00000014   0xBD01             POP      {R0,PC}          ;; return
    591          
    592          /**
    593            * @brief  Basic static configuration of TouchScreen
    594            * @param  DeviceAddr: FT5336 Device address for communication on I2C Bus.
    595            * @retval Status FT5336_STATUS_OK or FT5336_STATUS_NOT_OK.
    596            */

   \                                 In section .text, align 2, keep-with-next
    597          static uint32_t ft5336_TS_Configure(uint16_t DeviceAddr)
    598          {
    599            uint32_t status = FT5336_STATUS_OK;
    600          
    601            /* Nothing special to be done for FT5336 */
    602          
    603            return(status);
   \                     ft5336_TS_Configure: (+1)
   \   00000000   0x2000             MOVS     R0,#+0
   \   00000002   0x4770             BX       LR               ;; return
    604          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable4:
   \   00000000   0x........         DC32     ft5336_handle
    605          
    606          /**
    607            * @}
    608            */
    609          
    610          /**
    611            * @}
    612            */
    613          
    614          /**
    615            * @}
    616            */
    617          
    618          /**
    619            * @}
    620            */
    621          
    622          /**
    623            * @}
    624            */
    625          /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   ft5336_Get_I2C_InitializedStatus
       8   ft5336_I2C_InitializeIfRequired
         8   -> TS_IO_Init
         8   -> ft5336_Get_I2C_InitializedStatus
       8   ft5336_Init
         8   -> TS_IO_Delay
         0   -> ft5336_I2C_InitializeIfRequired
      24   ft5336_ReadID
        24   -> TS_IO_Read
        24   -> ft5336_I2C_InitializeIfRequired
       0   ft5336_Reset
       0   ft5336_TS_ClearIT
       0   ft5336_TS_Configure
       8   ft5336_TS_DetectTouch
         8   -> TS_IO_Read
       0   ft5336_TS_DisableIT
         0   -> TS_IO_Write
       0   ft5336_TS_EnableIT
         0   -> TS_IO_Write
      16   ft5336_TS_GetGestureID
        16   -> TS_IO_Read
      32   ft5336_TS_GetTouchInfo
        32   -> TS_IO_Read
      40   ft5336_TS_GetXY
        40   -> TS_IO_Read
       0   ft5336_TS_ITStatus
       8   ft5336_TS_Start
         8   -> ft5336_TS_Configure
         0   -> ft5336_TS_DisableIT


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       6  ft5336_Get_I2C_InitializedStatus
      22  ft5336_I2C_InitializeIfRequired
      14  ft5336_Init
      64  ft5336_ReadID
       2  ft5336_Reset
       2  ft5336_TS_ClearIT
       4  ft5336_TS_Configure
      64  ft5336_TS_DetectTouch
      10  ft5336_TS_DisableIT
      10  ft5336_TS_EnableIT
      32  ft5336_TS_GetGestureID
     220  ft5336_TS_GetTouchInfo
     328  ft5336_TS_GetXY
       4  ft5336_TS_ITStatus
      16  ft5336_TS_Start
       6  ft5336_handle
          coord
      40  ft5336_ts_drv

 
   6 bytes in section .bss
  40 bytes in section .data
 802 bytes in section .text
 
 802 bytes of CODE memory
  46 bytes of DATA memory

Errors: none
Warnings: none
