###############################################################################
#
# IAR ANSI C/C++ Compiler V7.50.2.10312/W32 for ARM       25/Feb/2016  12:02:36
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\STM32F7xx_HAL_Driver\Src\stm32f7xx_hal_rcc_ex.c
#    Command line =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\STM32F7xx_HAL_Driver\Src\stm32f7xx_hal_rcc_ex.c
#        -D USE_HAL_DRIVER -D STM32F746xx -D USE_STM32746G_DISCO -D
#        USE_IOEXPANDER -D USE_USB_FS -lC
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -lA
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List
#        -o
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj
#        --no_unroll --debug --endian=little --cpu=Cortex-M7 -e --fpu=VFPv5_sp
#        --dlib_config "D:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.3\arm\INC\c\DLib_Config_Full.h" -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\CMSIS\Device\ST\STM32F7xx\Include\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\STM32F7xx_HAL_Driver\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\STM32746G-Discovery\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Drivers\BSP\Components\Common\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Log\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\Fonts\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Utilities\CPU\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Core\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Core\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_HOST_Library\Class\MSC\Inc\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\Third_Party\FatFs\src\drivers\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_Audio\Addons\PDM\
#        -I
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\..\..\..\..\..\..\Middlewares\ST\STM32_USB_Device_Library\Class\AUDIO\Inc\
#        -Ohs --use_c++_inline --require_prototypes -I "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench 7.3\arm\CMSIS\Include\" -D
#        ARM_MATH_CM7
#    List file    =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\List\stm32f7xx_hal_rcc_ex.lst
#    Object file  =  
#        D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Projects\STM32746G\Applications\Audio\Mic_Array\EWARM\STM32F7\Obj\stm32f7xx_hal_rcc_ex.o
#
###############################################################################

D:\sop1hc\Github\data\Mic_Array_V00\USB_STREAMING\Mic_Array\Drivers\STM32F7xx_HAL_Driver\Src\stm32f7xx_hal_rcc_ex.c
      1          /**
      2            ******************************************************************************
      3            * @file    stm32f7xx_hal_rcc_ex.c
      4            * @author  MCD Application Team
      5            * @version V1.0.1
      6            * @date    25-June-2015
      7            * @brief   Extension RCC HAL module driver.
      8            *          This file provides firmware functions to manage the following 
      9            *          functionalities RCC extension peripheral:
     10            *           + Extended Peripheral Control functions
     11            *  
     12            ******************************************************************************
     13            * @attention
     14            *
     15            * <h2><center>&copy; COPYRIGHT(c) 2015 STMicroelectronics</center></h2>
     16            *
     17            * Redistribution and use in source and binary forms, with or without modification,
     18            * are permitted provided that the following conditions are met:
     19            *   1. Redistributions of source code must retain the above copyright notice,
     20            *      this list of conditions and the following disclaimer.
     21            *   2. Redistributions in binary form must reproduce the above copyright notice,
     22            *      this list of conditions and the following disclaimer in the documentation
     23            *      and/or other materials provided with the distribution.
     24            *   3. Neither the name of STMicroelectronics nor the names of its contributors
     25            *      may be used to endorse or promote products derived from this software
     26            *      without specific prior written permission.
     27            *
     28            * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
     29            * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
     30            * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
     31            * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
     32            * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
     33            * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     34            * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
     35            * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
     36            * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
     37            * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     38            *
     39            ******************************************************************************
     40            */ 
     41          
     42          /* Includes ------------------------------------------------------------------*/
     43          #include "stm32f7xx_hal.h"
     44          
     45          /** @addtogroup STM32F7xx_HAL_Driver
     46            * @{
     47            */
     48          
     49          /** @defgroup RCCEx RCCEx
     50            * @brief RCCEx HAL module driver
     51            * @{
     52            */
     53          
     54          #ifdef HAL_RCC_MODULE_ENABLED
     55          
     56          /* Private typedef -----------------------------------------------------------*/
     57          /* Private define ------------------------------------------------------------*/
     58          /** @defgroup RCCEx_Private_Defines RCCEx Private Defines
     59            * @{
     60            */
     61            
     62          #define PLLI2S_TIMEOUT_VALUE    100 /* Timeout value fixed to 100 ms  */
     63          #define PLLSAI_TIMEOUT_VALUE    100 /* Timeout value fixed to 100 ms  */
     64          
     65          /**
     66            * @}
     67            */
     68          /* Private macro -------------------------------------------------------------*/
     69          /** @defgroup RCCEx_Private_Macros RCCEx Private Macros
     70           * @{
     71           */
     72          /**
     73            * @}
     74            */
     75          
     76          /** @defgroup RCCEx_Private_Macros RCCEx Private Macros
     77           * @{
     78           */
     79          
     80          /**
     81            * @}
     82            */
     83          
     84          
     85          /* Private variables ---------------------------------------------------------*/
     86          /* Private function prototypes -----------------------------------------------*/
     87          /* Private functions ---------------------------------------------------------*/
     88          
     89          /** @defgroup RCCEx_Exported_Functions RCCEx Exported Functions
     90            * @{
     91            */
     92          
     93          /** @defgroup RCCEx_Exported_Functions_Group1 Extended Peripheral Control functions 
     94           *  @brief  Extended Peripheral Control functions  
     95           *
     96          @verbatim   
     97           ===============================================================================
     98                          ##### Extended Peripheral Control functions  #####
     99           ===============================================================================  
    100              [..]
    101              This subsection provides a set of functions allowing to control the RCC Clocks 
    102              frequencies.
    103              [..] 
    104              (@) Important note: Care must be taken when HAL_RCCEx_PeriphCLKConfig() is used to
    105                  select the RTC clock source; in this case the Backup domain will be reset in  
    106                  order to modify the RTC Clock source, as consequence RTC registers (including 
    107                  the backup registers) and RCC_BDCR register will be set to their reset values.
    108                
    109          @endverbatim
    110            * @{
    111            */
    112          /**
    113            * @brief  Initializes the RCC extended peripherals clocks according to the specified
    114            *         parameters in the RCC_PeriphCLKInitTypeDef.
    115            * @param  PeriphClkInit: pointer to an RCC_PeriphCLKInitTypeDef structure that
    116            *         contains the configuration information for the Extended Peripherals
    117            *         clocks(I2S, SAI, LTDC RTC, TIM, UARTs, USARTs, LTPIM, SDMMC...).
    118            *         
    119            * @note   Care must be taken when HAL_RCCEx_PeriphCLKConfig() is used to select 
    120            *         the RTC clock source; in this case the Backup domain will be reset in  
    121            *         order to modify the RTC Clock source, as consequence RTC registers (including 
    122            *         the backup registers) and RCC_BDCR register are set to their reset values.
    123            *
    124            * @retval HAL status
    125            */

   \                                 In section .text, align 4, keep-with-next
    126          HAL_StatusTypeDef HAL_RCCEx_PeriphCLKConfig(RCC_PeriphCLKInitTypeDef  *PeriphClkInit)
    127          {
   \                     HAL_RCCEx_PeriphCLKConfig: (+1)
   \   00000000   0xE92D 0x43F0      PUSH     {R4-R9,LR}
   \   00000004   0x4604             MOV      R4,R0
   \   00000006   0xB081             SUB      SP,SP,#+4
    128            uint32_t tickstart = 0;
    129            uint32_t tmpreg0 = 0;
    130            uint32_t tmpreg1 = 0;
    131            uint32_t plli2sused = 0;
   \   00000008   0x2700             MOVS     R7,#+0
    132            uint32_t pllsaiused = 0;
   \   0000000A   0x46B9             MOV      R9,R7
    133              
    134            /* Check the parameters */
    135            assert_param(IS_RCC_PERIPHCLOCK(PeriphClkInit->PeriphClockSelection));
    136            
    137            /*----------------------------------- I2S configuration ----------------------------------*/
    138            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_I2S) == (RCC_PERIPHCLK_I2S))
   \   0000000C   0x7820             LDRB     R0,[R4, #+0]
   \   0000000E   0x.... 0x....      LDR.W    R6,??DataTable2  ;; 0x40023800
   \   00000012   0x07C0             LSLS     R0,R0,#+31
   \   00000014   0xD50A             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_0
    139            {
    140              /* Check the parameters */
    141              assert_param(IS_RCC_I2SCLKSOURCE(PeriphClkInit->I2sClockSelection));
    142              
    143              /* Configure I2S Clock source */
    144              __HAL_RCC_I2S_CONFIG(PeriphClkInit->I2sClockSelection);
   \   00000016   0x68B0             LDR      R0,[R6, #+8]
   \   00000018   0xF420 0x0000      BIC      R0,R0,#0x800000
   \   0000001C   0x60B0             STR      R0,[R6, #+8]
   \   0000001E   0x68B0             LDR      R0,[R6, #+8]
   \   00000020   0x6B61             LDR      R1,[R4, #+52]
   \   00000022   0x4308             ORRS     R0,R1,R0
   \   00000024   0x60B0             STR      R0,[R6, #+8]
    145              
    146              /* Enable the PLLI2S when it's used as clock source for I2S */
    147              if(PeriphClkInit->I2sClockSelection == RCC_I2SCLKSOURCE_PLLI2S)
   \   00000026   0x6B60             LDR      R0,[R4, #+52]
   \   00000028   0xB900             CBNZ.N   R0,??HAL_RCCEx_PeriphCLKConfig_0
    148              {
    149                plli2sused = 1; 
   \   0000002A   0x2701             MOVS     R7,#+1
    150              }
    151            }
    152            
    153            /*------------------------------------ SAI1 configuration --------------------------------------*/
    154            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SAI1) == (RCC_PERIPHCLK_SAI1))
   \                     ??HAL_RCCEx_PeriphCLKConfig_0: (+1)
   \   0000002C   0x6820             LDR      R0,[R4, #+0]
   \   0000002E   0x0300             LSLS     R0,R0,#+12
   \   00000030   0xD510             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_1
    155            {
    156              /* Check the parameters */
    157              assert_param(IS_RCC_SAI1CLKSOURCE(PeriphClkInit->Sai1ClockSelection));
    158              
    159              /* Configure SAI1 Clock source */
    160              __HAL_RCC_SAI1_CONFIG(PeriphClkInit->Sai1ClockSelection);
   \   00000032   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   00000036   0x6BE1             LDR      R1,[R4, #+60]
   \   00000038   0xF420 0x1040      BIC      R0,R0,#0x300000
   \   0000003C   0x4308             ORRS     R0,R1,R0
   \   0000003E   0xF8C6 0x008C      STR      R0,[R6, #+140]
    161              /* Enable the PLLI2S when it's used as clock source for SAI */
    162              if(PeriphClkInit->Sai1ClockSelection == RCC_SAI1CLKSOURCE_PLLI2S)
   \   00000042   0x6BE0             LDR      R0,[R4, #+60]
   \   00000044   0xF5B0 0x1F80      CMP      R0,#+1048576
   \   00000048   0xBF08             IT       EQ 
   \   0000004A   0x2701             MOVEQ    R7,#+1
   \   0000004C   0xD002             BEQ.N    ??HAL_RCCEx_PeriphCLKConfig_1
    163              {
    164                plli2sused = 1; 
    165              }
    166              /* Enable the PLLSAI when it's used as clock source for SAI */
    167              if(PeriphClkInit->Sai1ClockSelection == RCC_SAI1CLKSOURCE_PLLSAI)
   \   0000004E   0xB908             CBNZ.N   R0,??HAL_RCCEx_PeriphCLKConfig_1
    168              {
    169                pllsaiused = 1; 
   \   00000050   0xF04F 0x0901      MOV      R9,#+1
    170              }
    171            }
    172            
    173            /*------------------------------------ SAI2 configuration --------------------------------------*/
    174            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SAI2) == (RCC_PERIPHCLK_SAI2))
   \                     ??HAL_RCCEx_PeriphCLKConfig_1: (+1)
   \   00000054   0x6820             LDR      R0,[R4, #+0]
   \   00000056   0x02C0             LSLS     R0,R0,#+11
   \   00000058   0xD510             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_2
    175            {
    176              /* Check the parameters */
    177              assert_param(IS_RCC_SAI2CLKSOURCE(PeriphClkInit->Sai2ClockSelection));
    178              
    179              /* Configure SAI2 Clock source */
    180              __HAL_RCC_SAI2_CONFIG(PeriphClkInit->Sai2ClockSelection);
   \   0000005A   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   0000005E   0x6C21             LDR      R1,[R4, #+64]
   \   00000060   0xF420 0x0040      BIC      R0,R0,#0xC00000
   \   00000064   0x4308             ORRS     R0,R1,R0
   \   00000066   0xF8C6 0x008C      STR      R0,[R6, #+140]
    181              
    182              /* Enable the PLLI2S when it's used as clock source for SAI */
    183              if(PeriphClkInit->Sai2ClockSelection == RCC_SAI2CLKSOURCE_PLLI2S)
   \   0000006A   0x6C20             LDR      R0,[R4, #+64]
   \   0000006C   0xF5B0 0x0F80      CMP      R0,#+4194304
   \   00000070   0xBF08             IT       EQ 
   \   00000072   0x2701             MOVEQ    R7,#+1
   \   00000074   0xD002             BEQ.N    ??HAL_RCCEx_PeriphCLKConfig_2
    184              {
    185                plli2sused = 1; 
    186              }
    187              /* Enable the PLLSAI when it's used as clock source for SAI */
    188              if(PeriphClkInit->Sai2ClockSelection == RCC_SAI2CLKSOURCE_PLLSAI)
   \   00000076   0xB908             CBNZ.N   R0,??HAL_RCCEx_PeriphCLKConfig_2
    189              {
    190                pllsaiused = 1; 
   \   00000078   0xF04F 0x0901      MOV      R9,#+1
    191              }
    192            }
    193            
    194            /*-------------------------------------- SPDIF-RX Configuration -----------------------------------*/
    195            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SPDIFRX) == RCC_PERIPHCLK_SPDIFRX)
   \                     ??HAL_RCCEx_PeriphCLKConfig_2: (+1)
   \   0000007C   0x6820             LDR      R0,[R4, #+0]
   \   0000007E   0x01C1             LSLS     R1,R0,#+7
   \   00000080   0xBF48             IT       MI 
   \   00000082   0x2701             MOVMI    R7,#+1
    196            {    
    197                plli2sused = 1; 
    198            }  
    199            
    200            /*------------------------------------ RTC configuration --------------------------------------*/
    201            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_RTC) == (RCC_PERIPHCLK_RTC))
   \   00000084   0x0680             LSLS     R0,R0,#+26
   \   00000086   0xD55F             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_3
    202            {
    203              /* Reset the Backup domain only if the RTC Clock source selection is modified */ 
    204              if((RCC->BDCR & RCC_BDCR_RTCSEL) != (PeriphClkInit->RTCClockSelection & RCC_BDCR_RTCSEL))
   \   00000088   0x6F30             LDR      R0,[R6, #+112]
   \   0000008A   0x6B21             LDR      R1,[R4, #+48]
   \   0000008C   0xF400 0x7040      AND      R0,R0,#0x300
   \   00000090   0xF401 0x7140      AND      R1,R1,#0x300
   \   00000094   0x4288             CMP      R0,R1
   \   00000096   0xD057             BEQ.N    ??HAL_RCCEx_PeriphCLKConfig_3
    205              {
    206                /* Enable Power Clock*/
    207                __HAL_RCC_PWR_CLK_ENABLE();
   \   00000098   0x6C30             LDR      R0,[R6, #+64]
    208                
    209                /* Enable write access to Backup domain */
    210                PWR->CR1 |= PWR_CR1_DBP;
   \   0000009A   0x.... 0x....      LDR.W    R8,??DataTable2_1  ;; 0x40007000
   \   0000009E   0xF040 0x5080      ORR      R0,R0,#0x10000000
   \   000000A2   0x6430             STR      R0,[R6, #+64]
   \   000000A4   0x6C30             LDR      R0,[R6, #+64]
   \   000000A6   0xF000 0x5080      AND      R0,R0,#0x10000000
   \   000000AA   0x9000             STR      R0,[SP, #+0]
   \   000000AC   0x9800             LDR      R0,[SP, #+0]
   \   000000AE   0xF8D8 0x0000      LDR      R0,[R8, #+0]
   \   000000B2   0xF440 0x7080      ORR      R0,R0,#0x100
   \   000000B6   0xF8C8 0x0000      STR      R0,[R8, #+0]
    211                
    212                /* Get Start Tick*/
    213                tickstart = HAL_GetTick();
   \   000000BA   0x.... 0x....      BL       HAL_GetTick
   \   000000BE   0x4605             MOV      R5,R0
    214                
    215                /* Wait for Backup domain Write protection disable */
    216                while((PWR->CR1 & PWR_CR1_DBP) == RESET)
   \                     ??HAL_RCCEx_PeriphCLKConfig_4: (+1)
   \   000000C0   0xF8D8 0x0000      LDR      R0,[R8, #+0]
   \   000000C4   0x05C0             LSLS     R0,R0,#+23
   \   000000C6   0xD408             BMI.N    ??HAL_RCCEx_PeriphCLKConfig_5
    217                {
    218                  if((HAL_GetTick() - tickstart) > RCC_DBP_TIMEOUT_VALUE)
   \   000000C8   0x.... 0x....      BL       HAL_GetTick
   \   000000CC   0x1B40             SUBS     R0,R0,R5
   \   000000CE   0x2865             CMP      R0,#+101
   \   000000D0   0xD3F6             BCC.N    ??HAL_RCCEx_PeriphCLKConfig_4
    219                  {
    220                    return HAL_TIMEOUT;
    221                  }      
    222                }
    223          
    224                /* Store the content of BDCR register before the reset of Backup Domain */
    225                tmpreg0 = (RCC->BDCR & ~(RCC_BDCR_RTCSEL));
    226                
    227                /* RTC Clock selection can be changed only if the Backup Domain is reset */
    228                __HAL_RCC_BACKUPRESET_FORCE();
    229                __HAL_RCC_BACKUPRESET_RELEASE();
    230                
    231                /* Restore the Content of BDCR register */
    232                RCC->BDCR = tmpreg0;
    233                
    234                /* If LSE is selected as RTC clock source, wait for LSE reactivation */
    235                if (HAL_IS_BIT_SET(tmpreg0, RCC_BDCR_LSERDY))
    236                {
    237                  /* Get Start Tick*/
    238                  tickstart = HAL_GetTick();
    239                  
    240                  /* Wait till LSE is ready */  
    241                  while(__HAL_RCC_GET_FLAG(RCC_FLAG_LSERDY) == RESET)
    242                  {
    243                    if((HAL_GetTick() - tickstart ) > RCC_LSE_TIMEOUT_VALUE)
    244                    {
    245                      return HAL_TIMEOUT;
    246                    }
    247                  }
    248                }
    249                __HAL_RCC_RTC_CONFIG(PeriphClkInit->RTCClockSelection); 			
    250              }
    251            }
    252          
    253            /*------------------------------------ TIM configuration --------------------------------------*/
    254            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_TIM) == (RCC_PERIPHCLK_TIM))
    255            {
    256              /* Check the parameters */
    257              assert_param(IS_RCC_TIMPRES(PeriphClkInit->TIMPresSelection));
    258              
    259              /* Configure Timer Prescaler */
    260              __HAL_RCC_TIMCLKPRESCALER(PeriphClkInit->TIMPresSelection);
    261            }
    262            
    263            /*-------------------------------------- I2C1 Configuration -----------------------------------*/
    264            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_I2C1) == RCC_PERIPHCLK_I2C1)
    265            {
    266              /* Check the parameters */
    267              assert_param(IS_RCC_I2C1CLKSOURCE(PeriphClkInit->I2c1ClockSelection));
    268              
    269              /* Configure the I2C1 clock source */
    270              __HAL_RCC_I2C1_CONFIG(PeriphClkInit->I2c1ClockSelection);
    271            }
    272            
    273            /*-------------------------------------- I2C2 Configuration -----------------------------------*/
    274            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_I2C2) == RCC_PERIPHCLK_I2C2)
    275            {
    276              /* Check the parameters */
    277              assert_param(IS_RCC_I2C2CLKSOURCE(PeriphClkInit->I2c2ClockSelection));
    278              
    279              /* Configure the I2C2 clock source */
    280              __HAL_RCC_I2C2_CONFIG(PeriphClkInit->I2c2ClockSelection);
    281            }
    282            
    283            /*-------------------------------------- I2C3 Configuration -----------------------------------*/
    284            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_I2C3) == RCC_PERIPHCLK_I2C3)
    285            {
    286              /* Check the parameters */
    287              assert_param(IS_RCC_I2C3CLKSOURCE(PeriphClkInit->I2c3ClockSelection));
    288              
    289              /* Configure the I2C3 clock source */
    290              __HAL_RCC_I2C3_CONFIG(PeriphClkInit->I2c3ClockSelection);
    291            }
    292              
    293            /*-------------------------------------- I2C4 Configuration -----------------------------------*/
    294            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_I2C4) == RCC_PERIPHCLK_I2C4)
    295            {
    296              /* Check the parameters */
    297              assert_param(IS_RCC_I2C4CLKSOURCE(PeriphClkInit->I2c4ClockSelection));
    298              
    299              /* Configure the I2C4 clock source */
    300              __HAL_RCC_I2C4_CONFIG(PeriphClkInit->I2c4ClockSelection);
    301            }
    302          
    303            /*-------------------------------------- USART1 Configuration -----------------------------------*/
    304            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_USART1) == RCC_PERIPHCLK_USART1)
    305            {
    306              /* Check the parameters */
    307              assert_param(IS_RCC_USART1CLKSOURCE(PeriphClkInit->Usart1ClockSelection));
    308              
    309              /* Configure the USART1 clock source */
    310              __HAL_RCC_USART1_CONFIG(PeriphClkInit->Usart1ClockSelection);
    311            }
    312          
    313            /*-------------------------------------- USART2 Configuration -----------------------------------*/
    314            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_USART2) == RCC_PERIPHCLK_USART2)
    315            {
    316              /* Check the parameters */
    317              assert_param(IS_RCC_USART2CLKSOURCE(PeriphClkInit->Usart2ClockSelection));
    318              
    319              /* Configure the USART2 clock source */
    320              __HAL_RCC_USART2_CONFIG(PeriphClkInit->Usart2ClockSelection);
    321            }
    322          
    323            /*-------------------------------------- USART3 Configuration -----------------------------------*/
    324            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_USART3) == RCC_PERIPHCLK_USART3)
    325            {
    326              /* Check the parameters */
    327              assert_param(IS_RCC_USART3CLKSOURCE(PeriphClkInit->Usart3ClockSelection));
    328              
    329              /* Configure the USART3 clock source */
    330              __HAL_RCC_USART3_CONFIG(PeriphClkInit->Usart3ClockSelection);
    331            }
    332          
    333            /*-------------------------------------- UART4 Configuration -----------------------------------*/
    334            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_UART4) == RCC_PERIPHCLK_UART4)
    335            {
    336              /* Check the parameters */
    337              assert_param(IS_RCC_UART4CLKSOURCE(PeriphClkInit->Uart4ClockSelection));
    338              
    339              /* Configure the UART4 clock source */
    340              __HAL_RCC_UART4_CONFIG(PeriphClkInit->Uart4ClockSelection);
    341            }
    342          
    343            /*-------------------------------------- UART5 Configuration -----------------------------------*/
    344            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_UART5) == RCC_PERIPHCLK_UART5)
    345            {
    346              /* Check the parameters */
    347              assert_param(IS_RCC_UART5CLKSOURCE(PeriphClkInit->Uart5ClockSelection));
    348              
    349              /* Configure the UART5 clock source */
    350              __HAL_RCC_UART5_CONFIG(PeriphClkInit->Uart5ClockSelection);
    351            }
    352          
    353            /*-------------------------------------- USART6 Configuration -----------------------------------*/
    354            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_USART6) == RCC_PERIPHCLK_USART6)
    355            {
    356              /* Check the parameters */
    357              assert_param(IS_RCC_USART6CLKSOURCE(PeriphClkInit->Usart6ClockSelection));
    358              
    359              /* Configure the USART6 clock source */
    360              __HAL_RCC_USART6_CONFIG(PeriphClkInit->Usart6ClockSelection);
    361            }
    362          
    363            /*-------------------------------------- UART7 Configuration -----------------------------------*/
    364            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_UART7) == RCC_PERIPHCLK_UART7)
    365            {
    366              /* Check the parameters */
    367              assert_param(IS_RCC_UART7CLKSOURCE(PeriphClkInit->Uart7ClockSelection));
    368              
    369              /* Configure the UART7 clock source */
    370              __HAL_RCC_UART7_CONFIG(PeriphClkInit->Uart7ClockSelection);
    371            }
    372          
    373            /*-------------------------------------- UART8 Configuration -----------------------------------*/
    374            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_UART8) == RCC_PERIPHCLK_UART8)
    375            {
    376              /* Check the parameters */
    377              assert_param(IS_RCC_UART8CLKSOURCE(PeriphClkInit->Uart8ClockSelection));
    378              
    379              /* Configure the UART8 clock source */
    380              __HAL_RCC_UART8_CONFIG(PeriphClkInit->Uart8ClockSelection);
    381            }
    382            
    383            /*--------------------------------------- CEC Configuration -----------------------------------*/
    384            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_CEC) == RCC_PERIPHCLK_CEC)
    385            {
    386              /* Check the parameters */
    387              assert_param(IS_RCC_CECCLKSOURCE(PeriphClkInit->CecClockSelection));
    388              
    389              /* Configure the CEC clock source */
    390              __HAL_RCC_CEC_CONFIG(PeriphClkInit->CecClockSelection);
    391            }
    392            
    393            /*-------------------------------------- CK48 Configuration -----------------------------------*/
    394            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_CLK48) == RCC_PERIPHCLK_CLK48)
    395            {
    396              /* Check the parameters */
    397              assert_param(IS_RCC_CLK48SOURCE(PeriphClkInit->Clk48ClockSelection));
    398              
    399              /* Configure the CLK48 source */
    400              __HAL_RCC_CLK48_CONFIG(PeriphClkInit->Clk48ClockSelection);
    401          
    402              /* Enable the PLLSAI when it's used as clock source for CK48 */
    403              if(PeriphClkInit->Clk48ClockSelection == RCC_CLK48SOURCE_PLLSAIP)
    404              {
    405                pllsaiused = 1; 
    406              }
    407            }
    408          
    409            /*-------------------------------------- LTDC Configuration -----------------------------------*/
    410          #if defined(STM32F756xx) || defined(STM32F746xx)
    411            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_LTDC) == RCC_PERIPHCLK_LTDC)
    412            {
    413              pllsaiused = 1; 
    414            }
    415          #endif /* STM32F756xx || STM32F746xx */
    416            /*-------------------------------------- LPTIM1 Configuration -----------------------------------*/
    417            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_LPTIM1) == RCC_PERIPHCLK_LPTIM1)
    418            {
    419              /* Check the parameters */
    420              assert_param(IS_RCC_LPTIM1CLK(PeriphClkInit->Lptim1ClockSelection));
    421              
    422              /* Configure the LTPIM1 clock source */
    423              __HAL_RCC_LPTIM1_CONFIG(PeriphClkInit->Lptim1ClockSelection);
    424             }
    425            
    426            /*------------------------------------- SDMMC Configuration ------------------------------------*/
    427            if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SDMMC1) == RCC_PERIPHCLK_SDMMC1)
    428            {
    429              /* Check the parameters */
    430              assert_param(IS_RCC_SDMMC1CLKSOURCE(PeriphClkInit->Sdmmc1ClockSelection));
    431              
    432              /* Configure the SDMMC1 clock source */
    433              __HAL_RCC_SDMMC1_CONFIG(PeriphClkInit->Sdmmc1ClockSelection);
    434            }
    435          
    436            /*-------------------------------------- PLLI2S Configuration ---------------------------------*/
    437            /* PLLI2S is configured when a peripheral will use it as source clock : SAI1, SAI2, I2S or SPDIF-RX */
    438            if((plli2sused == 1) || (PeriphClkInit->PeriphClockSelection == RCC_PERIPHCLK_PLLI2S))
    439            {
    440              /* Disable the PLLI2S */
    441              __HAL_RCC_PLLI2S_DISABLE();  
    442              
    443              /* Get Start Tick*/
    444              tickstart = HAL_GetTick();
    445              
    446              /* Wait till PLLI2S is disabled */
    447              while(__HAL_RCC_GET_FLAG(RCC_FLAG_PLLI2SRDY)  != RESET)
    448              {
    449                if((HAL_GetTick() - tickstart) > PLLI2S_TIMEOUT_VALUE)
    450                {
    451                  /* return in case of Timeout detected */         
    452                  return HAL_TIMEOUT;
    453                }
    454              }
    455              
    456              /* check for common PLLI2S Parameters */
    457              assert_param(IS_RCC_PLLI2SN_VALUE(PeriphClkInit->PLLI2S.PLLI2SN));
    458                
    459              /*----------------- In Case of PLLI2S is selected as source clock for I2S -------------------*/ 
    460              if(((((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_I2S) == RCC_PERIPHCLK_I2S) && (PeriphClkInit->I2sClockSelection == RCC_I2SCLKSOURCE_PLLI2S)))
    461              {
    462                /* check for Parameters */
    463                assert_param(IS_RCC_PLLI2SR_VALUE(PeriphClkInit->PLLI2S.PLLI2SR));
    464              
    465                /* Read PLLI2SP and PLLI2SQ value from PLLI2SCFGR register (this value is not needed for I2S configuration) */
    466                tmpreg0 = ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SP) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SP));
    467                tmpreg1 = ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SQ) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SQ));
    468                /* Configure the PLLI2S division factors */
    469                /* PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input) x (PLLI2SN/PLLM) */
    470                /* I2SCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SR */
    471                __HAL_RCC_PLLI2S_CONFIG(PeriphClkInit->PLLI2S.PLLI2SN , tmpreg0, tmpreg1, PeriphClkInit->PLLI2S.PLLI2SR);
    472              }
    473                  
    474              /*----------------- In Case of PLLI2S is selected as source clock for SAI -------------------*/  
    475              if(((((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SAI1) == RCC_PERIPHCLK_SAI1) && (PeriphClkInit->Sai1ClockSelection == RCC_SAI1CLKSOURCE_PLLI2S)) ||
    476                 ((((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SAI2) == RCC_PERIPHCLK_SAI2) && (PeriphClkInit->Sai2ClockSelection == RCC_SAI2CLKSOURCE_PLLI2S))) 
    477              {
    478                /* Check for PLLI2S Parameters */
    479                assert_param(IS_RCC_PLLI2SQ_VALUE(PeriphClkInit->PLLI2S.PLLI2SQ));
    480                /* Check for PLLI2S/DIVQ parameters */
    481                assert_param(IS_RCC_PLLI2S_DIVQ_VALUE(PeriphClkInit->PLLI2SDivQ));
    482                      
    483                /* Read PLLI2SP and PLLI2SR values from PLLI2SCFGR register (this value is not needed for SAI configuration) */
    484                tmpreg0 = ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SP) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SP));
    485                tmpreg1 = ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SR) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SR));
    486                /* Configure the PLLI2S division factors */      
    487                /* PLLI2S_VCO Input  = PLL_SOURCE/PLLM */
    488                /* PLLI2S_VCO Output = PLLI2S_VCO Input * PLLI2SN */
    489                /* SAI_CLK(first level) = PLLI2S_VCO Output/PLLI2SQ */
    490                __HAL_RCC_PLLI2S_CONFIG(PeriphClkInit->PLLI2S.PLLI2SN, tmpreg0, PeriphClkInit->PLLI2S.PLLI2SQ, tmpreg1);
    491             
    492                /* SAI_CLK_x = SAI_CLK(first level)/PLLI2SDIVQ */ 
    493                __HAL_RCC_PLLI2S_PLLSAICLKDIVQ_CONFIG(PeriphClkInit->PLLI2SDivQ);   
    494              }          
    495          
    496              /*----------------- In Case of PLLI2S is selected as source clock for SPDIF-RX -------------------*/  
    497              if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SPDIFRX) == RCC_PERIPHCLK_SPDIFRX)
    498              {
    499                /* check for Parameters */
    500                assert_param(IS_RCC_PLLI2SP_VALUE(PeriphClkInit->PLLI2S.PLLI2SP));
    501               
    502               /* Read PLLI2SR value from PLLI2SCFGR register (this value is not needed for SPDIF-RX configuration) */
    503                tmpreg0 = ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SQ) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SQ));
    504                tmpreg1 = ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SR) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SR));
    505                /* Configure the PLLI2S division factors */
    506                /* PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input) x (PLLI2SN/PLLM) */
    507                /* SPDIFCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SP */
    508                __HAL_RCC_PLLI2S_CONFIG(PeriphClkInit->PLLI2S.PLLI2SN , PeriphClkInit->PLLI2S.PLLI2SP, tmpreg0, tmpreg1);
    509              }  
    510                   
    511              /*----------------- In Case of PLLI2S is just selected  -----------------*/  
    512              if((PeriphClkInit->PeriphClockSelection & RCC_PERIPHCLK_PLLI2S) == RCC_PERIPHCLK_PLLI2S)
    513              {
    514                /* Check for Parameters */
    515                assert_param(IS_RCC_PLLI2SN_VALUE(PeriphClkInit->PLLI2S.PLLI2SN));
    516                assert_param(IS_RCC_PLLI2SP_VALUE(PeriphClkInit->PLLI2S.PLLI2SP));
    517                assert_param(IS_RCC_PLLI2SR_VALUE(PeriphClkInit->PLLI2S.PLLI2SR));
    518                assert_param(IS_RCC_PLLI2SQ_VALUE(PeriphClkInit->PLLI2S.PLLI2SQ));
    519          
    520                /* Configure the PLLI2S division factors */
    521                /* PLLI2S_VCO = f(VCO clock) = f(PLLI2S clock input) x (PLLI2SN/PLLI2SM) */
    522                /* SPDIFRXCLK = f(PLLI2S clock output) = f(VCO clock) / PLLI2SP */
    523                __HAL_RCC_PLLI2S_CONFIG(PeriphClkInit->PLLI2S.PLLI2SN , PeriphClkInit->PLLI2S.PLLI2SP, PeriphClkInit->PLLI2S.PLLI2SQ, PeriphClkInit->PLLI2S.PLLI2SR);
    524              } 
    525              
    526              /* Enable the PLLI2S */
    527              __HAL_RCC_PLLI2S_ENABLE();
    528              
    529              /* Get Start Tick*/
    530              tickstart = HAL_GetTick();
    531          
    532              /* Wait till PLLI2S is ready */
    533              while(__HAL_RCC_GET_FLAG(RCC_FLAG_PLLI2SRDY)  == RESET)
    534              {
    535                if((HAL_GetTick() - tickstart) > PLLI2S_TIMEOUT_VALUE)
    536                {
    537                  /* return in case of Timeout detected */                
    538                  return HAL_TIMEOUT;
    539                }
    540              }
    541            } 
    542            
    543            /*-------------------------------------- PLLSAI Configuration ---------------------------------*/
    544            /* PLLSAI is configured when a peripheral will use it as source clock : SAI1, SAI2, LTDC or CK48 */
    545            if(pllsaiused == 1)
    546            {
    547              /* Disable PLLSAI Clock */
    548              __HAL_RCC_PLLSAI_DISABLE(); 
    549              
    550              /* Get Start Tick*/
    551              tickstart = HAL_GetTick();
    552          
    553              /* Wait till PLLSAI is disabled */
    554              while(__HAL_RCC_PLLSAI_GET_FLAG() != RESET)
    555              {
    556                if((HAL_GetTick() - tickstart) > PLLSAI_TIMEOUT_VALUE)
    557                { 
    558                  /* return in case of Timeout detected */        
    559                  return HAL_TIMEOUT;
    560                }
    561              } 
    562              
    563              /* Check the PLLSAI division factors */
    564              assert_param(IS_RCC_PLLSAIN_VALUE(PeriphClkInit->PLLSAI.PLLSAIN));
    565              
    566              /*----------------- In Case of PLLSAI is selected as source clock for SAI -------------------*/  
    567              if(((((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SAI1) == RCC_PERIPHCLK_SAI1) && (PeriphClkInit->Sai1ClockSelection == RCC_SAI1CLKSOURCE_PLLSAI)) ||
    568                 ((((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_SAI2) == RCC_PERIPHCLK_SAI2) && (PeriphClkInit->Sai2ClockSelection == RCC_SAI2CLKSOURCE_PLLSAI)))
    569              {
    570                /* check for PLLSAIQ Parameter */
    571                assert_param(IS_RCC_PLLSAIQ_VALUE(PeriphClkInit->PLLSAI.PLLSAIQ));
    572                /* check for PLLSAI/DIVQ Parameter */
    573                assert_param(IS_RCC_PLLSAI_DIVQ_VALUE(PeriphClkInit->PLLSAIDivQ));
    574              
    575                /* Read PLLSAIP value from PLLSAICFGR register (this value is not needed for SAI configuration) */
    576                tmpreg0 = ((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIP) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIP));
    577                tmpreg1 = ((RCC->PLLSAICFGR & RCC_PLLI2SCFGR_PLLI2SR) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIR));
    578                /* PLLSAI_VCO Input  = PLL_SOURCE/PLLM */
    579                /* PLLSAI_VCO Output = PLLSAI_VCO Input * PLLSAIN */
    580                /* SAI_CLK(first level) = PLLSAI_VCO Output/PLLSAIQ */
    581                __HAL_RCC_PLLSAI_CONFIG(PeriphClkInit->PLLSAI.PLLSAIN , tmpreg0, PeriphClkInit->PLLSAI.PLLSAIQ, tmpreg1);
    582                
    583                /* SAI_CLK_x = SAI_CLK(first level)/PLLSAIDIVQ */ 
    584                __HAL_RCC_PLLSAI_PLLSAICLKDIVQ_CONFIG(PeriphClkInit->PLLSAIDivQ);
    585              }           
    586          
    587              /*----------------- In Case of PLLSAI is selected as source clock for CLK48 -------------------*/   
    588              /* In Case of PLLI2S is selected as source clock for CK48 */ 
    589              if((((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_CLK48) == RCC_PERIPHCLK_CLK48) && (PeriphClkInit->Clk48ClockSelection == RCC_CLK48SOURCE_PLLSAIP))
    590              {
    591                /* check for Parameters */
    592                assert_param(IS_RCC_PLLSAIP_VALUE(PeriphClkInit->PLLSAI.PLLSAIP));
    593                /* Read PLLSAIQ and PLLSAIR value from PLLSAICFGR register (this value is not needed for CK48 configuration) */
    594                tmpreg0 = ((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIQ) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIQ));
    595                tmpreg1 = ((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIR) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIR));
    596                
    597                /* Configure the PLLSAI division factors */
    598                /* PLLSAI_VCO = f(VCO clock) = f(PLLSAI clock input) x (PLLI2SN/PLLM) */
    599                /* 48CLK = f(PLLSAI clock output) = f(VCO clock) / PLLSAIP */
    600                __HAL_RCC_PLLSAI_CONFIG(PeriphClkInit->PLLSAI.PLLSAIN , PeriphClkInit->PLLSAI.PLLSAIP, tmpreg0, tmpreg1);
    601              }        
    602          
    603          #if defined(STM32F756xx) || defined(STM32F746xx)
    604              /*---------------------------- LTDC configuration -------------------------------*/
    605              if(((PeriphClkInit->PeriphClockSelection) & RCC_PERIPHCLK_LTDC) == (RCC_PERIPHCLK_LTDC))
    606              {
    607                assert_param(IS_RCC_PLLSAIR_VALUE(PeriphClkInit->PLLSAI.PLLSAIR));
    608                assert_param(IS_RCC_PLLSAI_DIVR_VALUE(PeriphClkInit->PLLSAIDivR));
    609                
    610                /* Read PLLSAIP and PLLSAIQ value from PLLSAICFGR register (these value are not needed for LTDC configuration) */
    611                tmpreg0 = ((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIQ) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIQ));
    612                tmpreg1 = ((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIP) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIP));
    613                
    614                /* PLLSAI_VCO Input  = PLL_SOURCE/PLLM */
    615                /* PLLSAI_VCO Output = PLLSAI_VCO Input * PLLSAIN */
    616                /* LTDC_CLK(first level) = PLLSAI_VCO Output/PLLSAIR */
    617                __HAL_RCC_PLLSAI_CONFIG(PeriphClkInit->PLLSAI.PLLSAIN , tmpreg1, tmpreg0, PeriphClkInit->PLLSAI.PLLSAIR);
    618                
    619                /* LTDC_CLK = LTDC_CLK(first level)/PLLSAIDIVR */ 
    620                __HAL_RCC_PLLSAI_PLLSAICLKDIVR_CONFIG(PeriphClkInit->PLLSAIDivR);
    621              }    
    622          #endif /* STM32F756xx || STM32F746xx */  
    623          
    624              /* Enable PLLSAI Clock */
    625              __HAL_RCC_PLLSAI_ENABLE();
    626              
    627              /* Get Start Tick*/
    628              tickstart = HAL_GetTick();
    629          
    630              /* Wait till PLLSAI is ready */
    631              while(__HAL_RCC_PLLSAI_GET_FLAG() == RESET)
    632              {
    633                if((HAL_GetTick() - tickstart) > PLLSAI_TIMEOUT_VALUE)
    634                { 
    635                  /* return in case of Timeout detected */        
    636                  return HAL_TIMEOUT;
   \   000000D2   0x2003             MOVS     R0,#+3
   \   000000D4   0xB001             ADD      SP,SP,#+4
   \   000000D6   0xE8BD 0x83F0      POP      {R4-R9,PC}
   \                     ??HAL_RCCEx_PeriphCLKConfig_5: (+1)
   \   000000DA   0x6F30             LDR      R0,[R6, #+112]
   \   000000DC   0x6F31             LDR      R1,[R6, #+112]
   \   000000DE   0xF441 0x3180      ORR      R1,R1,#0x10000
   \   000000E2   0x6731             STR      R1,[R6, #+112]
   \   000000E4   0x6F31             LDR      R1,[R6, #+112]
   \   000000E6   0xF420 0x7040      BIC      R0,R0,#0x300
   \   000000EA   0xF421 0x3180      BIC      R1,R1,#0x10000
   \   000000EE   0x6731             STR      R1,[R6, #+112]
   \   000000F0   0x6730             STR      R0,[R6, #+112]
   \   000000F2   0x0780             LSLS     R0,R0,#+30
   \   000000F4   0xD510             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_6
   \   000000F6   0x.... 0x....      BL       HAL_GetTick
   \   000000FA   0x4605             MOV      R5,R0
   \   000000FC   0xF241 0x3889      MOVW     R8,#+5001
   \                     ??HAL_RCCEx_PeriphCLKConfig_7: (+1)
   \   00000100   0x6F30             LDR      R0,[R6, #+112]
   \   00000102   0x0780             LSLS     R0,R0,#+30
   \   00000104   0xD408             BMI.N    ??HAL_RCCEx_PeriphCLKConfig_6
   \   00000106   0x.... 0x....      BL       HAL_GetTick
   \   0000010A   0x1B40             SUBS     R0,R0,R5
   \   0000010C   0x4540             CMP      R0,R8
   \   0000010E   0xD3F7             BCC.N    ??HAL_RCCEx_PeriphCLKConfig_7
   \   00000110   0x2003             MOVS     R0,#+3
   \   00000112   0xB001             ADD      SP,SP,#+4
   \   00000114   0xE8BD 0x83F0      POP      {R4-R9,PC}
   \                     ??HAL_RCCEx_PeriphCLKConfig_6: (+1)
   \   00000118   0x6B20             LDR      R0,[R4, #+48]
   \   0000011A   0xF400 0x7140      AND      R1,R0,#0x300
   \   0000011E   0xF5B1 0x7F40      CMP      R1,#+768
   \   00000122   0xD107             BNE.N    ??HAL_RCCEx_PeriphCLKConfig_8
   \   00000124   0x68B1             LDR      R1,[R6, #+8]
   \   00000126   0x.... 0x....      LDR.W    R2,??DataTable2_2  ;; 0xffffcff
   \   0000012A   0x4010             ANDS     R0,R2,R0
   \   0000012C   0xF421 0x11F8      BIC      R1,R1,#0x1F0000
   \   00000130   0x4308             ORRS     R0,R0,R1
   \   00000132   0xE002             B.N      ??HAL_RCCEx_PeriphCLKConfig_9
   \                     ??HAL_RCCEx_PeriphCLKConfig_8: (+1)
   \   00000134   0x68B0             LDR      R0,[R6, #+8]
   \   00000136   0xF420 0x10F8      BIC      R0,R0,#0x1F0000
   \                     ??HAL_RCCEx_PeriphCLKConfig_9: (+1)
   \   0000013A   0x60B0             STR      R0,[R6, #+8]
   \   0000013C   0x6F30             LDR      R0,[R6, #+112]
   \   0000013E   0x6B21             LDR      R1,[R4, #+48]
   \   00000140   0x0509             LSLS     R1,R1,#+20
   \   00000142   0xEA50 0x5011      ORRS     R0,R0,R1, LSR #+20
   \   00000146   0x6730             STR      R0,[R6, #+112]
   \                     ??HAL_RCCEx_PeriphCLKConfig_3: (+1)
   \   00000148   0x7820             LDRB     R0,[R4, #+0]
   \   0000014A   0x06C0             LSLS     R0,R0,#+27
   \   0000014C   0xD50B             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_10
   \   0000014E   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   00000152   0xF020 0x7080      BIC      R0,R0,#0x1000000
   \   00000156   0xF8C6 0x008C      STR      R0,[R6, #+140]
   \   0000015A   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   0000015E   0x6BA1             LDR      R1,[R4, #+56]
   \   00000160   0x4308             ORRS     R0,R1,R0
   \   00000162   0xF8C6 0x008C      STR      R0,[R6, #+140]
   \                     ??HAL_RCCEx_PeriphCLKConfig_10: (+1)
   \   00000166   0x6820             LDR      R0,[R4, #+0]
   \   00000168   0x0440             LSLS     R0,R0,#+17
   \   0000016A   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_11
   \   0000016C   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   00000170   0x6E61             LDR      R1,[R4, #+100]
   \   00000172   0xF420 0x3040      BIC      R0,R0,#0x30000
   \   00000176   0x4308             ORRS     R0,R1,R0
   \   00000178   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_11: (+1)
   \   0000017C   0x6820             LDR      R0,[R4, #+0]
   \   0000017E   0x0400             LSLS     R0,R0,#+16
   \   00000180   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_12
   \   00000182   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   00000186   0x6EA1             LDR      R1,[R4, #+104]
   \   00000188   0xF420 0x2040      BIC      R0,R0,#0xC0000
   \   0000018C   0x4308             ORRS     R0,R1,R0
   \   0000018E   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_12: (+1)
   \   00000192   0x6820             LDR      R0,[R4, #+0]
   \   00000194   0x03C0             LSLS     R0,R0,#+15
   \   00000196   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_13
   \   00000198   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   0000019C   0x6EE1             LDR      R1,[R4, #+108]
   \   0000019E   0xF420 0x1040      BIC      R0,R0,#0x300000
   \   000001A2   0x4308             ORRS     R0,R1,R0
   \   000001A4   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_13: (+1)
   \   000001A8   0x6820             LDR      R0,[R4, #+0]
   \   000001AA   0x0380             LSLS     R0,R0,#+14
   \   000001AC   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_14
   \   000001AE   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   000001B2   0x6F21             LDR      R1,[R4, #+112]
   \   000001B4   0xF420 0x0040      BIC      R0,R0,#0xC00000
   \   000001B8   0x4308             ORRS     R0,R1,R0
   \   000001BA   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_14: (+1)
   \   000001BE   0x7820             LDRB     R0,[R4, #+0]
   \   000001C0   0x0640             LSLS     R0,R0,#+25
   \   000001C2   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_15
   \   000001C4   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   000001C8   0x6C61             LDR      R1,[R4, #+68]
   \   000001CA   0x0880             LSRS     R0,R0,#+2
   \   000001CC   0xEA41 0x0080      ORR      R0,R1,R0, LSL #+2
   \   000001D0   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_15: (+1)
   \   000001D4   0x7820             LDRB     R0,[R4, #+0]
   \   000001D6   0x0600             LSLS     R0,R0,#+24
   \   000001D8   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_16
   \   000001DA   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   000001DE   0x6CA1             LDR      R1,[R4, #+72]
   \   000001E0   0xF020 0x000C      BIC      R0,R0,#0xC
   \   000001E4   0x4308             ORRS     R0,R1,R0
   \   000001E6   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_16: (+1)
   \   000001EA   0x6820             LDR      R0,[R4, #+0]
   \   000001EC   0x05C0             LSLS     R0,R0,#+23
   \   000001EE   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_17
   \   000001F0   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   000001F4   0x6CE1             LDR      R1,[R4, #+76]
   \   000001F6   0xF020 0x0030      BIC      R0,R0,#0x30
   \   000001FA   0x4308             ORRS     R0,R1,R0
   \   000001FC   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_17: (+1)
   \   00000200   0x6820             LDR      R0,[R4, #+0]
   \   00000202   0x0580             LSLS     R0,R0,#+22
   \   00000204   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_18
   \   00000206   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   0000020A   0x6D21             LDR      R1,[R4, #+80]
   \   0000020C   0xF020 0x00C0      BIC      R0,R0,#0xC0
   \   00000210   0x4308             ORRS     R0,R1,R0
   \   00000212   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_18: (+1)
   \   00000216   0x6820             LDR      R0,[R4, #+0]
   \   00000218   0x0540             LSLS     R0,R0,#+21
   \   0000021A   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_19
   \   0000021C   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   00000220   0x6D61             LDR      R1,[R4, #+84]
   \   00000222   0xF420 0x7040      BIC      R0,R0,#0x300
   \   00000226   0x4308             ORRS     R0,R1,R0
   \   00000228   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_19: (+1)
   \   0000022C   0x6820             LDR      R0,[R4, #+0]
   \   0000022E   0x0500             LSLS     R0,R0,#+20
   \   00000230   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_20
   \   00000232   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   00000236   0x6DA1             LDR      R1,[R4, #+88]
   \   00000238   0xF420 0x6040      BIC      R0,R0,#0xC00
   \   0000023C   0x4308             ORRS     R0,R1,R0
   \   0000023E   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_20: (+1)
   \   00000242   0x6820             LDR      R0,[R4, #+0]
   \   00000244   0x04C0             LSLS     R0,R0,#+19
   \   00000246   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_21
   \   00000248   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   0000024C   0x6DE1             LDR      R1,[R4, #+92]
   \   0000024E   0xF420 0x5040      BIC      R0,R0,#0x3000
   \   00000252   0x4308             ORRS     R0,R1,R0
   \   00000254   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_21: (+1)
   \   00000258   0x6820             LDR      R0,[R4, #+0]
   \   0000025A   0x0480             LSLS     R0,R0,#+18
   \   0000025C   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_22
   \   0000025E   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   00000262   0x6E21             LDR      R1,[R4, #+96]
   \   00000264   0xF420 0x4040      BIC      R0,R0,#0xC000
   \   00000268   0x4308             ORRS     R0,R1,R0
   \   0000026A   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_22: (+1)
   \   0000026E   0x6820             LDR      R0,[R4, #+0]
   \   00000270   0x0240             LSLS     R0,R0,#+9
   \   00000272   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_23
   \   00000274   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   00000278   0x6FA1             LDR      R1,[R4, #+120]
   \   0000027A   0xF020 0x6080      BIC      R0,R0,#0x4000000
   \   0000027E   0x4308             ORRS     R0,R1,R0
   \   00000280   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_23: (+1)
   \   00000284   0x6820             LDR      R0,[R4, #+0]
   \   00000286   0x0280             LSLS     R0,R0,#+10
   \   00000288   0xD50D             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_24
   \   0000028A   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   0000028E   0x6FE1             LDR      R1,[R4, #+124]
   \   00000290   0xF020 0x6000      BIC      R0,R0,#0x8000000
   \   00000294   0x4308             ORRS     R0,R1,R0
   \   00000296   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \   0000029A   0x6FE0             LDR      R0,[R4, #+124]
   \   0000029C   0xF1B0 0x6F00      CMP      R0,#+134217728
   \   000002A0   0xBF08             IT       EQ 
   \   000002A2   0xF04F 0x0901      MOVEQ    R9,#+1
   \                     ??HAL_RCCEx_PeriphCLKConfig_24: (+1)
   \   000002A6   0x6820             LDR      R0,[R4, #+0]
   \   000002A8   0x0701             LSLS     R1,R0,#+28
   \   000002AA   0xBF48             IT       MI 
   \   000002AC   0xF04F 0x0901      MOVMI    R9,#+1
   \   000002B0   0x0340             LSLS     R0,R0,#+13
   \   000002B2   0xD507             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_25
   \   000002B4   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   000002B8   0x6F61             LDR      R1,[R4, #+116]
   \   000002BA   0xF020 0x7040      BIC      R0,R0,#0x3000000
   \   000002BE   0x4308             ORRS     R0,R1,R0
   \   000002C0   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_25: (+1)
   \   000002C4   0x6820             LDR      R0,[R4, #+0]
   \   000002C6   0x0200             LSLS     R0,R0,#+8
   \   000002C8   0xD508             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_26
   \   000002CA   0xF8D6 0x0090      LDR      R0,[R6, #+144]
   \   000002CE   0xF8D4 0x1080      LDR      R1,[R4, #+128]
   \   000002D2   0xF020 0x5080      BIC      R0,R0,#0x10000000
   \   000002D6   0x4308             ORRS     R0,R1,R0
   \   000002D8   0xF8C6 0x0090      STR      R0,[R6, #+144]
   \                     ??HAL_RCCEx_PeriphCLKConfig_26: (+1)
   \   000002DC   0xB927             CBNZ.N   R7,??HAL_RCCEx_PeriphCLKConfig_27
   \   000002DE   0x6820             LDR      R0,[R4, #+0]
   \   000002E0   0xF1B0 0x7F00      CMP      R0,#+33554432
   \   000002E4   0xF040 0x8087      BNE.W    ??HAL_RCCEx_PeriphCLKConfig_28
   \                     ??HAL_RCCEx_PeriphCLKConfig_27: (+1)
   \   000002E8   0x6830             LDR      R0,[R6, #+0]
   \   000002EA   0xF020 0x6080      BIC      R0,R0,#0x4000000
   \   000002EE   0x6030             STR      R0,[R6, #+0]
   \   000002F0   0x.... 0x....      BL       HAL_GetTick
   \   000002F4   0x4605             MOV      R5,R0
   \                     ??HAL_RCCEx_PeriphCLKConfig_29: (+1)
   \   000002F6   0x6830             LDR      R0,[R6, #+0]
   \   000002F8   0x0100             LSLS     R0,R0,#+4
   \   000002FA   0xD508             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_30
   \   000002FC   0x.... 0x....      BL       HAL_GetTick
   \   00000300   0x1B40             SUBS     R0,R0,R5
   \   00000302   0x2865             CMP      R0,#+101
   \   00000304   0xD3F7             BCC.N    ??HAL_RCCEx_PeriphCLKConfig_29
   \   00000306   0x2003             MOVS     R0,#+3
   \   00000308   0xB001             ADD      SP,SP,#+4
   \   0000030A   0xE8BD 0x83F0      POP      {R4-R9,PC}
   \                     ??HAL_RCCEx_PeriphCLKConfig_30: (+1)
   \   0000030E   0x7820             LDRB     R0,[R4, #+0]
   \   00000310   0x07C0             LSLS     R0,R0,#+31
   \   00000312   0xD512             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_31
   \   00000314   0x6B60             LDR      R0,[R4, #+52]
   \   00000316   0xB980             CBNZ.N   R0,??HAL_RCCEx_PeriphCLKConfig_31
   \   00000318   0xF8D6 0x0084      LDR      R0,[R6, #+132]
   \   0000031C   0xF8D6 0x1084      LDR      R1,[R6, #+132]
   \   00000320   0x6862             LDR      R2,[R4, #+4]
   \   00000322   0xF400 0x3040      AND      R0,R0,#0x30000
   \   00000326   0xF001 0x6170      AND      R1,R1,#0xF000000
   \   0000032A   0xEA40 0x1082      ORR      R0,R0,R2, LSL #+6
   \   0000032E   0x4308             ORRS     R0,R1,R0
   \   00000330   0x68A1             LDR      R1,[R4, #+8]
   \   00000332   0xEA40 0x7001      ORR      R0,R0,R1, LSL #+28
   \   00000336   0xF8C6 0x0084      STR      R0,[R6, #+132]
   \                     ??HAL_RCCEx_PeriphCLKConfig_31: (+1)
   \   0000033A   0x6820             LDR      R0,[R4, #+0]
   \   0000033C   0x0301             LSLS     R1,R0,#+12
   \   0000033E   0xD503             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_32
   \   00000340   0x6BE1             LDR      R1,[R4, #+60]
   \   00000342   0xF5B1 0x1F80      CMP      R1,#+1048576
   \   00000346   0xD005             BEQ.N    ??HAL_RCCEx_PeriphCLKConfig_33
   \                     ??HAL_RCCEx_PeriphCLKConfig_32: (+1)
   \   00000348   0x02C0             LSLS     R0,R0,#+11
   \   0000034A   0xD51D             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_34
   \   0000034C   0x6C20             LDR      R0,[R4, #+64]
   \   0000034E   0xF5B0 0x0F80      CMP      R0,#+4194304
   \   00000352   0xD119             BNE.N    ??HAL_RCCEx_PeriphCLKConfig_34
   \                     ??HAL_RCCEx_PeriphCLKConfig_33: (+1)
   \   00000354   0xF8D6 0x0084      LDR      R0,[R6, #+132]
   \   00000358   0xF8D6 0x1084      LDR      R1,[R6, #+132]
   \   0000035C   0x6862             LDR      R2,[R4, #+4]
   \   0000035E   0xF400 0x3040      AND      R0,R0,#0x30000
   \   00000362   0xF001 0x41E0      AND      R1,R1,#0x70000000
   \   00000366   0xEA40 0x1082      ORR      R0,R0,R2, LSL #+6
   \   0000036A   0x68E2             LDR      R2,[R4, #+12]
   \   0000036C   0xEA40 0x6002      ORR      R0,R0,R2, LSL #+24
   \   00000370   0x4308             ORRS     R0,R1,R0
   \   00000372   0xF8C6 0x0084      STR      R0,[R6, #+132]
   \   00000376   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   0000037A   0x6A61             LDR      R1,[R4, #+36]
   \   0000037C   0x0940             LSRS     R0,R0,#+5
   \   0000037E   0x1E49             SUBS     R1,R1,#+1
   \   00000380   0xEA41 0x1040      ORR      R0,R1,R0, LSL #+5
   \   00000384   0xF8C6 0x008C      STR      R0,[R6, #+140]
   \                     ??HAL_RCCEx_PeriphCLKConfig_34: (+1)
   \   00000388   0x6820             LDR      R0,[R4, #+0]
   \   0000038A   0x01C0             LSLS     R0,R0,#+7
   \   0000038C   0xD510             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_35
   \   0000038E   0xF8D6 0x0084      LDR      R0,[R6, #+132]
   \   00000392   0xF8D6 0x1084      LDR      R1,[R6, #+132]
   \   00000396   0x6923             LDR      R3,[R4, #+16]
   \   00000398   0x6862             LDR      R2,[R4, #+4]
   \   0000039A   0xF000 0x6070      AND      R0,R0,#0xF000000
   \   0000039E   0xF001 0x41E0      AND      R1,R1,#0x70000000
   \   000003A2   0x041B             LSLS     R3,R3,#+16
   \   000003A4   0xEA43 0x1282      ORR      R2,R3,R2, LSL #+6
   \   000003A8   0x4310             ORRS     R0,R0,R2
   \   000003AA   0x4308             ORRS     R0,R1,R0
   \   000003AC   0xF8C6 0x0084      STR      R0,[R6, #+132]
   \                     ??HAL_RCCEx_PeriphCLKConfig_35: (+1)
   \   000003B0   0x6820             LDR      R0,[R4, #+0]
   \   000003B2   0x0180             LSLS     R0,R0,#+6
   \   000003B4   0xD50C             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_36
   \   000003B6   0x6921             LDR      R1,[R4, #+16]
   \   000003B8   0x6860             LDR      R0,[R4, #+4]
   \   000003BA   0x0409             LSLS     R1,R1,#+16
   \   000003BC   0xEA41 0x1080      ORR      R0,R1,R0, LSL #+6
   \   000003C0   0x68E1             LDR      R1,[R4, #+12]
   \   000003C2   0xEA40 0x6001      ORR      R0,R0,R1, LSL #+24
   \   000003C6   0x68A1             LDR      R1,[R4, #+8]
   \   000003C8   0xEA40 0x7001      ORR      R0,R0,R1, LSL #+28
   \   000003CC   0xF8C6 0x0084      STR      R0,[R6, #+132]
   \                     ??HAL_RCCEx_PeriphCLKConfig_36: (+1)
   \   000003D0   0x6830             LDR      R0,[R6, #+0]
   \   000003D2   0xF040 0x6080      ORR      R0,R0,#0x4000000
   \   000003D6   0x6030             STR      R0,[R6, #+0]
   \   000003D8   0x.... 0x....      BL       HAL_GetTick
   \   000003DC   0x4605             MOV      R5,R0
   \                     ??HAL_RCCEx_PeriphCLKConfig_37: (+1)
   \   000003DE   0x6830             LDR      R0,[R6, #+0]
   \   000003E0   0x0100             LSLS     R0,R0,#+4
   \   000003E2   0xD408             BMI.N    ??HAL_RCCEx_PeriphCLKConfig_28
   \   000003E4   0x.... 0x....      BL       HAL_GetTick
   \   000003E8   0x1B40             SUBS     R0,R0,R5
   \   000003EA   0x2865             CMP      R0,#+101
   \   000003EC   0xD3F7             BCC.N    ??HAL_RCCEx_PeriphCLKConfig_37
   \   000003EE   0x2003             MOVS     R0,#+3
   \   000003F0   0xB001             ADD      SP,SP,#+4
   \   000003F2   0xE8BD 0x83F0      POP      {R4-R9,PC}
   \                     ??HAL_RCCEx_PeriphCLKConfig_28: (+1)
   \   000003F6   0xF1B9 0x0F00      CMP      R9,#+0
   \   000003FA   0xD07D             BEQ.N    ??HAL_RCCEx_PeriphCLKConfig_38
   \   000003FC   0x6830             LDR      R0,[R6, #+0]
   \   000003FE   0xF020 0x5080      BIC      R0,R0,#0x10000000
   \   00000402   0x6030             STR      R0,[R6, #+0]
   \   00000404   0x.... 0x....      BL       HAL_GetTick
   \   00000408   0x4605             MOV      R5,R0
   \                     ??HAL_RCCEx_PeriphCLKConfig_39: (+1)
   \   0000040A   0x6830             LDR      R0,[R6, #+0]
   \   0000040C   0x0080             LSLS     R0,R0,#+2
   \   0000040E   0xD508             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_40
   \   00000410   0x.... 0x....      BL       HAL_GetTick
   \   00000414   0x1B40             SUBS     R0,R0,R5
   \   00000416   0x2865             CMP      R0,#+101
   \   00000418   0xD3F7             BCC.N    ??HAL_RCCEx_PeriphCLKConfig_39
   \   0000041A   0x2003             MOVS     R0,#+3
   \   0000041C   0xB001             ADD      SP,SP,#+4
   \   0000041E   0xE8BD 0x83F0      POP      {R4-R9,PC}
   \                     ??HAL_RCCEx_PeriphCLKConfig_40: (+1)
   \   00000422   0x6820             LDR      R0,[R4, #+0]
   \   00000424   0x0301             LSLS     R1,R0,#+12
   \   00000426   0xD501             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_41
   \   00000428   0x6BE1             LDR      R1,[R4, #+60]
   \   0000042A   0xB119             CBZ.N    R1,??HAL_RCCEx_PeriphCLKConfig_42
   \                     ??HAL_RCCEx_PeriphCLKConfig_41: (+1)
   \   0000042C   0x02C0             LSLS     R0,R0,#+11
   \   0000042E   0xD51C             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_43
   \   00000430   0x6C20             LDR      R0,[R4, #+64]
   \   00000432   0xB9D0             CBNZ.N   R0,??HAL_RCCEx_PeriphCLKConfig_43
   \                     ??HAL_RCCEx_PeriphCLKConfig_42: (+1)
   \   00000434   0xF8D6 0x0088      LDR      R0,[R6, #+136]
   \   00000438   0xF8D6 0x1088      LDR      R1,[R6, #+136]
   \   0000043C   0x6962             LDR      R2,[R4, #+20]
   \   0000043E   0xF400 0x3040      AND      R0,R0,#0x30000
   \   00000442   0xF001 0x41E0      AND      R1,R1,#0x70000000
   \   00000446   0xEA40 0x1082      ORR      R0,R0,R2, LSL #+6
   \   0000044A   0x69A2             LDR      R2,[R4, #+24]
   \   0000044C   0xEA40 0x6002      ORR      R0,R0,R2, LSL #+24
   \   00000450   0x4308             ORRS     R0,R1,R0
   \   00000452   0xF8C6 0x0088      STR      R0,[R6, #+136]
   \   00000456   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   0000045A   0x6AA1             LDR      R1,[R4, #+40]
   \   0000045C   0xF420 0x50F8      BIC      R0,R0,#0x1F00
   \   00000460   0x1E49             SUBS     R1,R1,#+1
   \   00000462   0xEA40 0x2001      ORR      R0,R0,R1, LSL #+8
   \   00000466   0xF8C6 0x008C      STR      R0,[R6, #+140]
   \                     ??HAL_RCCEx_PeriphCLKConfig_43: (+1)
   \   0000046A   0x6820             LDR      R0,[R4, #+0]
   \   0000046C   0x0280             LSLS     R0,R0,#+10
   \   0000046E   0xD514             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_44
   \   00000470   0x6FE0             LDR      R0,[R4, #+124]
   \   00000472   0xF1B0 0x6F00      CMP      R0,#+134217728
   \   00000476   0xD110             BNE.N    ??HAL_RCCEx_PeriphCLKConfig_44
   \   00000478   0xF8D6 0x0088      LDR      R0,[R6, #+136]
   \   0000047C   0xF8D6 0x1088      LDR      R1,[R6, #+136]
   \   00000480   0x6A23             LDR      R3,[R4, #+32]
   \   00000482   0x6962             LDR      R2,[R4, #+20]
   \   00000484   0xF000 0x6070      AND      R0,R0,#0xF000000
   \   00000488   0xF001 0x41E0      AND      R1,R1,#0x70000000
   \   0000048C   0x041B             LSLS     R3,R3,#+16
   \   0000048E   0xEA43 0x1282      ORR      R2,R3,R2, LSL #+6
   \   00000492   0x4310             ORRS     R0,R0,R2
   \   00000494   0x4308             ORRS     R0,R1,R0
   \   00000496   0xF8C6 0x0088      STR      R0,[R6, #+136]
   \                     ??HAL_RCCEx_PeriphCLKConfig_44: (+1)
   \   0000049A   0x7820             LDRB     R0,[R4, #+0]
   \   0000049C   0x0700             LSLS     R0,R0,#+28
   \   0000049E   0xD518             BPL.N    ??HAL_RCCEx_PeriphCLKConfig_45
   \   000004A0   0xF8D6 0x0088      LDR      R0,[R6, #+136]
   \   000004A4   0xF8D6 0x1088      LDR      R1,[R6, #+136]
   \   000004A8   0x6962             LDR      R2,[R4, #+20]
   \   000004AA   0xF401 0x3140      AND      R1,R1,#0x30000
   \   000004AE   0xF000 0x6070      AND      R0,R0,#0xF000000
   \   000004B2   0xEA41 0x1182      ORR      R1,R1,R2, LSL #+6
   \   000004B6   0x4308             ORRS     R0,R0,R1
   \   000004B8   0x69E1             LDR      R1,[R4, #+28]
   \   000004BA   0xEA40 0x7001      ORR      R0,R0,R1, LSL #+28
   \   000004BE   0xF8C6 0x0088      STR      R0,[R6, #+136]
   \   000004C2   0xF8D6 0x008C      LDR      R0,[R6, #+140]
   \   000004C6   0x6AE1             LDR      R1,[R4, #+44]
   \   000004C8   0xF420 0x3040      BIC      R0,R0,#0x30000
   \   000004CC   0x4308             ORRS     R0,R1,R0
   \   000004CE   0xF8C6 0x008C      STR      R0,[R6, #+140]
   \                     ??HAL_RCCEx_PeriphCLKConfig_45: (+1)
   \   000004D2   0x6830             LDR      R0,[R6, #+0]
   \   000004D4   0xF040 0x5080      ORR      R0,R0,#0x10000000
   \   000004D8   0x6030             STR      R0,[R6, #+0]
   \   000004DA   0x.... 0x....      BL       HAL_GetTick
   \   000004DE   0x4605             MOV      R5,R0
   \                     ??HAL_RCCEx_PeriphCLKConfig_46: (+1)
   \   000004E0   0x6830             LDR      R0,[R6, #+0]
   \   000004E2   0x0080             LSLS     R0,R0,#+2
   \   000004E4   0xD408             BMI.N    ??HAL_RCCEx_PeriphCLKConfig_38
   \   000004E6   0x.... 0x....      BL       HAL_GetTick
   \   000004EA   0x1B40             SUBS     R0,R0,R5
   \   000004EC   0x2865             CMP      R0,#+101
   \   000004EE   0xD3F7             BCC.N    ??HAL_RCCEx_PeriphCLKConfig_46
   \   000004F0   0x2003             MOVS     R0,#+3
   \   000004F2   0xB001             ADD      SP,SP,#+4
   \   000004F4   0xE8BD 0x83F0      POP      {R4-R9,PC}
    637                }
    638              }
    639            }
    640            return HAL_OK;
   \                     ??HAL_RCCEx_PeriphCLKConfig_38: (+1)
   \   000004F8   0x2000             MOVS     R0,#+0
   \   000004FA   0xB001             ADD      SP,SP,#+4
   \   000004FC   0xE8BD 0x83F0      POP      {R4-R9,PC}       ;; return
    641          }
    642          
    643          /**
    644            * @brief  Get the RCC_PeriphCLKInitTypeDef according to the internal
    645            *         RCC configuration registers.
    646            * @param  PeriphClkInit: pointer to the configured RCC_PeriphCLKInitTypeDef structure
    647            * @retval None
    648            */

   \                                 In section .text, align 2, keep-with-next
    649          void HAL_RCCEx_GetPeriphCLKConfig(RCC_PeriphCLKInitTypeDef  *PeriphClkInit)
    650          {
    651            uint32_t tempreg = 0;
    652            
    653            /* Set all possible values for the extended clock type parameter------------*/
    654            PeriphClkInit->PeriphClockSelection = RCC_PERIPHCLK_I2S      | RCC_PERIPHCLK_LPTIM1 |\
    655                                                  RCC_PERIPHCLK_SAI1     | RCC_PERIPHCLK_SAI2     |\
    656                                                  RCC_PERIPHCLK_TIM      | RCC_PERIPHCLK_RTC      |\
    657                                                  RCC_PERIPHCLK_CEC      | RCC_PERIPHCLK_I2C4     |\
    658                                                  RCC_PERIPHCLK_I2C1     | RCC_PERIPHCLK_I2C2     |\
    659                                                  RCC_PERIPHCLK_I2C3     | RCC_PERIPHCLK_USART1   |\
    660                                                  RCC_PERIPHCLK_USART2   | RCC_PERIPHCLK_USART3   |\
    661                                                  RCC_PERIPHCLK_UART4    | RCC_PERIPHCLK_UART5    |\
    662                                                  RCC_PERIPHCLK_USART6   | RCC_PERIPHCLK_UART7    |\
    663                                                  RCC_PERIPHCLK_UART8    | RCC_PERIPHCLK_SDMMC1    |\
    664                                                  RCC_PERIPHCLK_CLK48;          
   \                     HAL_RCCEx_GetPeriphCLKConfig: (+1)
   \   00000000   0x....             LDR.N    R1,??DataTable2_3  ;; 0xfffff1
   \   00000002   0x6001             STR      R1,[R0, #+0]
    665            
    666            /* Get the PLLI2S Clock configuration -----------------------------------------------*/
    667            PeriphClkInit->PLLI2S.PLLI2SN = (uint32_t)((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SN) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SN));
   \   00000004   0x....             LDR.N    R1,??DataTable2_4  ;; 0x40023808
   \   00000006   0x6FCA             LDR      R2,[R1, #+124]
   \   00000008   0xF3C2 0x1288      UBFX     R2,R2,#+6,#+9
   \   0000000C   0x6042             STR      R2,[R0, #+4]
    668            PeriphClkInit->PLLI2S.PLLI2SP = (uint32_t)((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SP) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SP));
   \   0000000E   0x6FCA             LDR      R2,[R1, #+124]
   \   00000010   0xF3C2 0x4201      UBFX     R2,R2,#+16,#+2
   \   00000014   0x6102             STR      R2,[R0, #+16]
    669            PeriphClkInit->PLLI2S.PLLI2SQ = (uint32_t)((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SQ) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SQ));
   \   00000016   0x6FCA             LDR      R2,[R1, #+124]
   \   00000018   0xF3C2 0x6203      UBFX     R2,R2,#+24,#+4
   \   0000001C   0x60C2             STR      R2,[R0, #+12]
    670            PeriphClkInit->PLLI2S.PLLI2SR = (uint32_t)((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SR) >> POSITION_VAL(RCC_PLLI2SCFGR_PLLI2SR));
   \   0000001E   0x6FCA             LDR      R2,[R1, #+124]
   \   00000020   0xF3C2 0x7202      UBFX     R2,R2,#+28,#+3
   \   00000024   0x6082             STR      R2,[R0, #+8]
    671            
    672            /* Get the PLLSAI Clock configuration -----------------------------------------------*/
    673            PeriphClkInit->PLLSAI.PLLSAIN = (uint32_t)((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIN) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIN));
   \   00000026   0xF8D1 0x2080      LDR      R2,[R1, #+128]
   \   0000002A   0xF3C2 0x1288      UBFX     R2,R2,#+6,#+9
   \   0000002E   0x6142             STR      R2,[R0, #+20]
    674            PeriphClkInit->PLLSAI.PLLSAIP = (uint32_t)((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIP) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIP));
   \   00000030   0xF8D1 0x2080      LDR      R2,[R1, #+128]
   \   00000034   0xF3C2 0x4201      UBFX     R2,R2,#+16,#+2
   \   00000038   0x6202             STR      R2,[R0, #+32]
    675            PeriphClkInit->PLLSAI.PLLSAIQ = (uint32_t)((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIQ) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIQ)); 
   \   0000003A   0xF8D1 0x2080      LDR      R2,[R1, #+128]
   \   0000003E   0xF3C2 0x6203      UBFX     R2,R2,#+24,#+4
   \   00000042   0x6182             STR      R2,[R0, #+24]
    676            PeriphClkInit->PLLSAI.PLLSAIR = (uint32_t)((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIR) >> POSITION_VAL(RCC_PLLSAICFGR_PLLSAIR)); 
   \   00000044   0xF8D1 0x2080      LDR      R2,[R1, #+128]
   \   00000048   0xF3C2 0x7202      UBFX     R2,R2,#+28,#+3
   \   0000004C   0x61C2             STR      R2,[R0, #+28]
    677            
    678            /* Get the PLLSAI/PLLI2S division factors -------------------------------------------*/
    679            PeriphClkInit->PLLI2SDivQ = (uint32_t)((RCC->DCKCFGR1 & RCC_DCKCFGR1_PLLI2SDIVQ) >> POSITION_VAL(RCC_DCKCFGR1_PLLI2SDIVQ));
   \   0000004E   0xF8D1 0x2084      LDR      R2,[R1, #+132]
   \   00000052   0xF002 0x021F      AND      R2,R2,#0x1F
   \   00000056   0x6242             STR      R2,[R0, #+36]
    680            PeriphClkInit->PLLSAIDivQ = (uint32_t)((RCC->DCKCFGR1 & RCC_DCKCFGR1_PLLSAIDIVQ) >> POSITION_VAL(RCC_DCKCFGR1_PLLSAIDIVQ));
   \   00000058   0xF8D1 0x2084      LDR      R2,[R1, #+132]
   \   0000005C   0xF3C2 0x2204      UBFX     R2,R2,#+8,#+5
   \   00000060   0x6282             STR      R2,[R0, #+40]
    681            PeriphClkInit->PLLSAIDivR = (uint32_t)((RCC->DCKCFGR1 & RCC_DCKCFGR1_PLLSAIDIVR) >> POSITION_VAL(RCC_DCKCFGR1_PLLSAIDIVR));
   \   00000062   0xF8D1 0x2084      LDR      R2,[R1, #+132]
   \   00000066   0xF3C2 0x4201      UBFX     R2,R2,#+16,#+2
   \   0000006A   0x62C2             STR      R2,[R0, #+44]
    682          
    683            /* Get the SAI1 clock configuration ----------------------------------------------*/
    684            PeriphClkInit->Sai1ClockSelection = __HAL_RCC_GET_SAI1_SOURCE();
   \   0000006C   0xF8D1 0x2084      LDR      R2,[R1, #+132]
   \   00000070   0xF402 0x1240      AND      R2,R2,#0x300000
   \   00000074   0x63C2             STR      R2,[R0, #+60]
    685            
    686            /* Get the SAI2 clock configuration ----------------------------------------------*/
    687            PeriphClkInit->Sai2ClockSelection = __HAL_RCC_GET_SAI2_SOURCE();
   \   00000076   0xF8D1 0x2084      LDR      R2,[R1, #+132]
   \   0000007A   0xF402 0x0240      AND      R2,R2,#0xC00000
   \   0000007E   0x6402             STR      R2,[R0, #+64]
    688            
    689            /* Get the I2S clock configuration ------------------------------------------*/
    690            PeriphClkInit->I2sClockSelection = __HAL_RCC_GET_I2SCLKSOURCE();
   \   00000080   0x680A             LDR      R2,[R1, #+0]
   \   00000082   0xF402 0x0200      AND      R2,R2,#0x800000
   \   00000086   0x6342             STR      R2,[R0, #+52]
    691            
    692            /* Get the I2C1 clock configuration ------------------------------------------*/
    693            PeriphClkInit->I2c1ClockSelection = __HAL_RCC_GET_I2C1_SOURCE();
   \   00000088   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   0000008C   0xF402 0x3240      AND      R2,R2,#0x30000
   \   00000090   0x6642             STR      R2,[R0, #+100]
    694            
    695            /* Get the I2C2 clock configuration ------------------------------------------*/
    696            PeriphClkInit->I2c2ClockSelection = __HAL_RCC_GET_I2C2_SOURCE();
   \   00000092   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   00000096   0xF402 0x2240      AND      R2,R2,#0xC0000
   \   0000009A   0x6682             STR      R2,[R0, #+104]
    697            
    698            /* Get the I2C3 clock configuration ------------------------------------------*/
    699            PeriphClkInit->I2c3ClockSelection = __HAL_RCC_GET_I2C3_SOURCE();
   \   0000009C   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000A0   0xF402 0x1240      AND      R2,R2,#0x300000
   \   000000A4   0x66C2             STR      R2,[R0, #+108]
    700            
    701            /* Get the I2C4 clock configuration ------------------------------------------*/
    702            PeriphClkInit->I2c4ClockSelection = __HAL_RCC_GET_I2C4_SOURCE();
   \   000000A6   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000AA   0xF402 0x0240      AND      R2,R2,#0xC00000
   \   000000AE   0x6702             STR      R2,[R0, #+112]
    703            
    704            /* Get the USART1 clock configuration ------------------------------------------*/
    705            PeriphClkInit->Usart1ClockSelection = __HAL_RCC_GET_USART1_SOURCE();
   \   000000B0   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000B4   0xF002 0x0203      AND      R2,R2,#0x3
   \   000000B8   0x6442             STR      R2,[R0, #+68]
    706            
    707            /* Get the USART2 clock configuration ------------------------------------------*/
    708            PeriphClkInit->Usart2ClockSelection = __HAL_RCC_GET_USART2_SOURCE();
   \   000000BA   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000BE   0xF002 0x020C      AND      R2,R2,#0xC
   \   000000C2   0x6482             STR      R2,[R0, #+72]
    709            
    710            /* Get the USART3 clock configuration ------------------------------------------*/
    711            PeriphClkInit->Usart3ClockSelection = __HAL_RCC_GET_USART3_SOURCE();
   \   000000C4   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000C8   0xF002 0x0230      AND      R2,R2,#0x30
   \   000000CC   0x64C2             STR      R2,[R0, #+76]
    712            
    713            /* Get the UART4 clock configuration ------------------------------------------*/
    714            PeriphClkInit->Uart4ClockSelection = __HAL_RCC_GET_UART4_SOURCE();
   \   000000CE   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000D2   0xF002 0x02C0      AND      R2,R2,#0xC0
   \   000000D6   0x6502             STR      R2,[R0, #+80]
    715            
    716            /* Get the UART5 clock configuration ------------------------------------------*/
    717            PeriphClkInit->Uart5ClockSelection = __HAL_RCC_GET_UART5_SOURCE();
   \   000000D8   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000DC   0xF402 0x7240      AND      R2,R2,#0x300
   \   000000E0   0x6542             STR      R2,[R0, #+84]
    718            
    719            /* Get the USART6 clock configuration ------------------------------------------*/
    720            PeriphClkInit->Usart6ClockSelection = __HAL_RCC_GET_USART6_SOURCE();
   \   000000E2   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000E6   0xF402 0x6240      AND      R2,R2,#0xC00
   \   000000EA   0x6582             STR      R2,[R0, #+88]
    721            
    722            /* Get the UART7 clock configuration ------------------------------------------*/
    723            PeriphClkInit->Uart7ClockSelection = __HAL_RCC_GET_UART7_SOURCE();
   \   000000EC   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000F0   0xF402 0x5240      AND      R2,R2,#0x3000
   \   000000F4   0x65C2             STR      R2,[R0, #+92]
    724            
    725            /* Get the UART8 clock configuration ------------------------------------------*/
    726            PeriphClkInit->Uart8ClockSelection = __HAL_RCC_GET_UART8_SOURCE();
   \   000000F6   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   000000FA   0xF402 0x4240      AND      R2,R2,#0xC000
   \   000000FE   0x6602             STR      R2,[R0, #+96]
    727            
    728            /* Get the LPTIM1 clock configuration ------------------------------------------*/
    729            PeriphClkInit->Lptim1ClockSelection = __HAL_RCC_GET_LPTIM1_SOURCE();
   \   00000100   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   00000104   0xF002 0x7240      AND      R2,R2,#0x3000000
   \   00000108   0x6742             STR      R2,[R0, #+116]
    730            
    731            /* Get the CEC clock configuration -----------------------------------------------*/
    732            PeriphClkInit->CecClockSelection = __HAL_RCC_GET_CEC_SOURCE();
   \   0000010A   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   0000010E   0xF002 0x6280      AND      R2,R2,#0x4000000
   \   00000112   0x6782             STR      R2,[R0, #+120]
    733            
    734            /* Get the CK48 clock configuration -----------------------------------------------*/
    735            PeriphClkInit->Clk48ClockSelection = __HAL_RCC_GET_CLK48_SOURCE();
   \   00000114   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   00000118   0xF002 0x6200      AND      R2,R2,#0x8000000
   \   0000011C   0x67C2             STR      R2,[R0, #+124]
    736          
    737            /* Get the SDMMC clock configuration -----------------------------------------------*/
    738            PeriphClkInit->Sdmmc1ClockSelection = __HAL_RCC_GET_SDMMC1_SOURCE();
   \   0000011E   0xF8D1 0x2088      LDR      R2,[R1, #+136]
   \   00000122   0xF002 0x5280      AND      R2,R2,#0x10000000
   \   00000126   0xF8C0 0x2080      STR      R2,[R0, #+128]
    739            
    740            /* Get the RTC Clock configuration -----------------------------------------------*/
    741            tempreg = (RCC->CFGR & RCC_CFGR_RTCPRE);
   \   0000012A   0x680A             LDR      R2,[R1, #+0]
    742            PeriphClkInit->RTCClockSelection = (uint32_t)((tempreg) | (RCC->BDCR & RCC_BDCR_RTCSEL));
   \   0000012C   0x6E8B             LDR      R3,[R1, #+104]
   \   0000012E   0xF402 0x12F8      AND      R2,R2,#0x1F0000
   \   00000132   0xF403 0x7340      AND      R3,R3,#0x300
   \   00000136   0x431A             ORRS     R2,R3,R2
   \   00000138   0x6302             STR      R2,[R0, #+48]
    743            
    744            /* Get the TIM Prescaler configuration --------------------------------------------*/
    745            if ((RCC->DCKCFGR1 & RCC_DCKCFGR1_TIMPRE) == RESET)
   \   0000013A   0xF8D1 0x1084      LDR      R1,[R1, #+132]
   \   0000013E   0x01C9             LSLS     R1,R1,#+7
   \   00000140   0xBF54             ITE      PL 
   \   00000142   0x2100             MOVPL    R1,#+0
   \   00000144   0xF04F 0x7180      MOVMI    R1,#+16777216
    746            {
    747              PeriphClkInit->TIMPresSelection = RCC_TIMPRES_DESACTIVATED;
    748            }
    749            else
    750            {
    751              PeriphClkInit->TIMPresSelection = RCC_TIMPRES_ACTIVATED;
   \   00000148   0x6381             STR      R1,[R0, #+56]
    752            }
    753          }
   \   0000014A   0x4770             BX       LR               ;; return
    754          
    755          /**
    756            * @brief  Return the peripheral clock frequency for a given peripheral(SAI..) 
    757            * @note   Return 0 if peripheral clock identifier not managed by this API
    758            * @param  PeriphClk: Peripheral clock identifier
    759            *         This parameter can be one of the following values:
    760            *            @arg RCC_PERIPHCLK_SAI1: SAI1 peripheral clock
    761            *            @arg RCC_PERIPHCLK_SAI2: SAI2 peripheral clock
    762            * @retval Frequency in KHz
    763            */

   \                                 In section .text, align 2, keep-with-next
    764          uint32_t HAL_RCCEx_GetPeriphCLKFreq(uint32_t PeriphClk)
    765          {
    766            uint32_t tmpreg = 0;
    767            /* This variable used to store the SAI clock frequency (value in Hz) */
    768            uint32_t frequency = 0;
   \                     HAL_RCCEx_GetPeriphCLKFreq: (+1)
   \   00000000   0x2100             MOVS     R1,#+0
    769            /* This variable used to store the VCO Input (value in Hz) */
    770            uint32_t vcoinput = 0;
    771            /* This variable used to store the SAI clock source */
    772            uint32_t saiclocksource = 0;
    773            if ((PeriphClk == RCC_PERIPHCLK_SAI1) || (PeriphClk == RCC_PERIPHCLK_SAI2))
   \   00000002   0xF5B0 0x2F00      CMP      R0,#+524288
   \   00000006   0xBF18             IT       NE 
   \   00000008   0xF5B0 0x1F80      CMPNE    R0,#+1048576
   \   0000000C   0xD150             BNE.N    ??HAL_RCCEx_GetPeriphCLKFreq_0
    774            {
    775              saiclocksource = RCC->DCKCFGR1;   
   \   0000000E   0x....             LDR.N    R0,??DataTable2_5  ;; 0x40023804
   \   00000010   0xF8D0 0x2088      LDR      R2,[R0, #+136]
    776              saiclocksource &= (RCC_DCKCFGR1_SAI1SEL | RCC_DCKCFGR1_SAI2SEL);
    777              switch (saiclocksource)
   \   00000014   0xF412 0x0270      ANDS     R2,R2,#0xF00000
   \   00000018   0xD00D             BEQ.N    ??HAL_RCCEx_GetPeriphCLKFreq_1
   \   0000001A   0xF5B2 0x1F80      CMP      R2,#+1048576
   \   0000001E   0xD028             BEQ.N    ??HAL_RCCEx_GetPeriphCLKFreq_2
   \   00000020   0xF5B2 0x1F00      CMP      R2,#+2097152
   \   00000024   0xD043             BEQ.N    ??HAL_RCCEx_GetPeriphCLKFreq_3
   \   00000026   0xF5B2 0x0F80      CMP      R2,#+4194304
   \   0000002A   0xD022             BEQ.N    ??HAL_RCCEx_GetPeriphCLKFreq_2
   \   0000002C   0xF5B2 0x0F00      CMP      R2,#+8388608
   \   00000030   0xD03D             BEQ.N    ??HAL_RCCEx_GetPeriphCLKFreq_3
    778              {
    779              case 0: /* PLLSAI is the clock source for SAI*/ 
    780                {
    781                  /* Configure the PLLSAI division factor */
    782                  /* PLLSAI_VCO Input  = PLL_SOURCE/PLLM */ 
    783                  if((RCC->PLLCFGR & RCC_PLLCFGR_PLLSRC) == RCC_PLLSOURCE_HSI)
    784                  {
    785                    /* In Case the PLL Source is HSI (Internal Clock) */
    786                    vcoinput = (HSI_VALUE / (uint32_t)(RCC->PLLCFGR & RCC_PLLCFGR_PLLM));
    787                  }
    788                  else
    789                  {
    790                    /* In Case the PLL Source is HSE (External Clock) */
    791                    vcoinput = ((HSE_VALUE / (uint32_t)(RCC->PLLCFGR & RCC_PLLCFGR_PLLM)));
    792                  }   
    793                  /* PLLSAI_VCO Output = PLLSAI_VCO Input * PLLSAIN */
    794                  /* SAI_CLK(first level) = PLLSAI_VCO Output/PLLSAIQ */
    795                  tmpreg = (RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIQ) >> 24;
    796                  frequency = (vcoinput * ((RCC->PLLSAICFGR & RCC_PLLSAICFGR_PLLSAIN) >> 6))/(tmpreg);
    797                  
    798                  /* SAI_CLK_x = SAI_CLK(first level)/PLLSAIDIVQ */
    799                  tmpreg = (((RCC->DCKCFGR1 & RCC_DCKCFGR1_PLLSAIDIVQ) >> 8) + 1);
    800                  frequency = frequency/(tmpreg); 
    801                  break;       
    802                }
    803              case RCC_DCKCFGR1_SAI1SEL_0: /* PLLI2S is the clock source for SAI*/
    804              case RCC_DCKCFGR1_SAI2SEL_0: /* PLLI2S is the clock source for SAI*/
    805                {  
    806                  /* Configure the PLLI2S division factor */
    807                  /* PLLI2S_VCO Input  = PLL_SOURCE/PLLM */ 
    808                  if((RCC->PLLCFGR & RCC_PLLCFGR_PLLSRC) == RCC_PLLSOURCE_HSI)
    809                  {
    810                    /* In Case the PLL Source is HSI (Internal Clock) */
    811                    vcoinput = (HSI_VALUE / (uint32_t)(RCC->PLLCFGR & RCC_PLLCFGR_PLLM));
    812                  }
    813                  else
    814                  {
    815                    /* In Case the PLL Source is HSE (External Clock) */
    816                    vcoinput = ((HSE_VALUE / (uint32_t)(RCC->PLLCFGR & RCC_PLLCFGR_PLLM)));
    817                  }
    818                  
    819                  /* PLLI2S_VCO Output = PLLI2S_VCO Input * PLLI2SN */
    820                  /* SAI_CLK(first level) = PLLI2S_VCO Output/PLLI2SQ */
    821                  tmpreg = (RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SQ) >> 24;
    822                  frequency = (vcoinput * ((RCC->PLLI2SCFGR & RCC_PLLI2SCFGR_PLLI2SN) >> 6))/(tmpreg);
    823                  
    824                  /* SAI_CLK_x = SAI_CLK(first level)/PLLI2SDIVQ */
    825                  tmpreg = ((RCC->DCKCFGR1 & RCC_DCKCFGR1_PLLI2SDIVQ) + 1); 
    826                  frequency = frequency/(tmpreg);
    827                  break;
    828                }
    829              case RCC_DCKCFGR1_SAI1SEL_1: /* External clock is the clock source for SAI*/
    830              case RCC_DCKCFGR1_SAI2SEL_1: /* External clock is the clock source for SAI*/
    831                {
    832                  frequency = EXTERNAL_CLOCK_VALUE;
    833                  break;       
    834                }
    835              default :
    836                {
    837                  break;
    838                }
    839              }
    840            }
    841            return frequency;
   \   00000032   0x4608             MOV      R0,R1
   \   00000034   0x4770             BX       LR
   \                     ??HAL_RCCEx_GetPeriphCLKFreq_1: (+1)
   \   00000036   0x6801             LDR      R1,[R0, #+0]
   \   00000038   0x0249             LSLS     R1,R1,#+9
   \   0000003A   0xBF54             ITE      PL 
   \   0000003C   0x....             LDRPL.N  R1,??DataTable2_6  ;; 0xf42400
   \   0000003E   0x....             LDRMI.N  R1,??DataTable2_7  ;; 0x17d7840
   \   00000040   0x6802             LDR      R2,[R0, #+0]
   \   00000042   0xF002 0x023F      AND      R2,R2,#0x3F
   \   00000046   0xFBB1 0xF1F2      UDIV     R1,R1,R2
   \   0000004A   0xF8D0 0x2084      LDR      R2,[R0, #+132]
   \   0000004E   0xF8D0 0x3084      LDR      R3,[R0, #+132]
   \   00000052   0xF8D0 0x0088      LDR      R0,[R0, #+136]
   \   00000056   0xF3C3 0x1388      UBFX     R3,R3,#+6,#+9
   \   0000005A   0xF3C2 0x6203      UBFX     R2,R2,#+24,#+4
   \   0000005E   0x4359             MULS     R1,R1,R3
   \   00000060   0xF3C0 0x2004      UBFX     R0,R0,#+8,#+5
   \   00000064   0x1C40             ADDS     R0,R0,#+1
   \   00000066   0xFBB1 0xF1F2      UDIV     R1,R1,R2
   \   0000006A   0xFBB1 0xF1F0      UDIV     R1,R1,R0
   \   0000006E   0x4608             MOV      R0,R1
   \   00000070   0x4770             BX       LR
   \                     ??HAL_RCCEx_GetPeriphCLKFreq_2: (+1)
   \   00000072   0x6801             LDR      R1,[R0, #+0]
   \   00000074   0x0249             LSLS     R1,R1,#+9
   \   00000076   0xBF54             ITE      PL 
   \   00000078   0x....             LDRPL.N  R1,??DataTable2_6  ;; 0xf42400
   \   0000007A   0x....             LDRMI.N  R1,??DataTable2_7  ;; 0x17d7840
   \   0000007C   0x6802             LDR      R2,[R0, #+0]
   \   0000007E   0xF002 0x023F      AND      R2,R2,#0x3F
   \   00000082   0xFBB1 0xF1F2      UDIV     R1,R1,R2
   \   00000086   0xF8D0 0x2080      LDR      R2,[R0, #+128]
   \   0000008A   0xF8D0 0x3080      LDR      R3,[R0, #+128]
   \   0000008E   0xF8D0 0x0088      LDR      R0,[R0, #+136]
   \   00000092   0xF3C3 0x1388      UBFX     R3,R3,#+6,#+9
   \   00000096   0xF3C2 0x6203      UBFX     R2,R2,#+24,#+4
   \   0000009A   0x4359             MULS     R1,R1,R3
   \   0000009C   0xF000 0x001F      AND      R0,R0,#0x1F
   \   000000A0   0x1C40             ADDS     R0,R0,#+1
   \   000000A2   0xFBB1 0xF1F2      UDIV     R1,R1,R2
   \   000000A6   0xFBB1 0xF1F0      UDIV     R1,R1,R0
   \   000000AA   0x4608             MOV      R0,R1
   \   000000AC   0x4770             BX       LR
   \                     ??HAL_RCCEx_GetPeriphCLKFreq_3: (+1)
   \   000000AE   0x....             LDR.N    R1,??DataTable2_8  ;; 0xbb8000
   \                     ??HAL_RCCEx_GetPeriphCLKFreq_0: (+1)
   \   000000B0   0x4608             MOV      R0,R1
   \   000000B2   0x4770             BX       LR               ;; return
    842          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   0x40023800         DC32     0x40023800

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \   00000000   0x40007000         DC32     0x40007000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \   00000000   0x0FFFFCFF         DC32     0xffffcff

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_3:
   \   00000000   0x00FFFFF1         DC32     0xfffff1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_4:
   \   00000000   0x40023808         DC32     0x40023808

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_5:
   \   00000000   0x40023804         DC32     0x40023804

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_6:
   \   00000000   0x00F42400         DC32     0xf42400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_7:
   \   00000000   0x017D7840         DC32     0x17d7840

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_8:
   \   00000000   0x00BB8000         DC32     0xbb8000
    843          
    844          /**
    845            * @}
    846            */
    847          
    848          /**
    849            * @}
    850            */
    851          
    852          #endif /* HAL_RCC_MODULE_ENABLED */
    853          /**
    854            * @}
    855            */
    856          
    857          /**
    858            * @}
    859            */
    860          
    861          /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   HAL_RCCEx_GetPeriphCLKConfig
       0   HAL_RCCEx_GetPeriphCLKFreq
      32   HAL_RCCEx_PeriphCLKConfig
        32   -> HAL_GetTick


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_2
       4  ??DataTable2_3
       4  ??DataTable2_4
       4  ??DataTable2_5
       4  ??DataTable2_6
       4  ??DataTable2_7
       4  ??DataTable2_8
     332  HAL_RCCEx_GetPeriphCLKConfig
     180  HAL_RCCEx_GetPeriphCLKFreq
    1280  HAL_RCCEx_PeriphCLKConfig

 
 1 828 bytes in section .text
 
 1 828 bytes of CODE memory

Errors: none
Warnings: none
